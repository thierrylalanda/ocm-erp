import{a as m,d as p,e as r}from"./chunk-6ZIFMK4B.js";import{ia as a,la as n,ma as o}from"./chunk-ODQYRIBQ.js";import{f as i}from"./chunk-EQDQRRRY.js";var h=new n("CreateUserUseCase");var u=class s{constructor(e){this.userRepository=e}execute(e){return i(this,null,function*(){this.validateCreateUserDto(e);let t=yield this.userRepository.findByEmail(e.email),c=yield this.userRepository.findByUsername(e.userName),U=r.toCreateCommand(e),l=p.create(U),f=yield this.userRepository.create(l);return r.toResponseDto(f)})}validateCreateUserDto(e){let t=[];if((!e.nomPrenom||e.nomPrenom.trim().length===0)&&t.push("Le nom et pr\xE9nom sont requis"),(!e.userName||e.userName.trim().length===0)&&t.push("Le nom d'utilisateur est requis"),(!e.email||!this.isValidEmail(e.email))&&t.push("Un email valide est requis"),(!e.password||e.password.trim().length<6)&&t.push("Le mot de passe doit contenir au moins 6 caract\xE8res"),(!e.pwdText||e.pwdText.trim().length===0)&&t.push("Le texte du mot de passe est requis"),(!e.societeId||e.societeId<=0)&&t.push("Un identifiant de soci\xE9t\xE9 valide est requis"),(!e.siteId||e.siteId<=0)&&t.push("Un identifiant de site valide est requis"),(!e.departementId||e.departementId<=0)&&t.push("Un identifiant de d\xE9partement valide est requis"),e.statut||t.push("Le statut est requis"),t.length>0)throw new Error(`Validation \xE9chou\xE9e: ${t.join(", ")}`)}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}isValidPhoneNumber(e){return/^[\d\s\-\+\(\)]{8,20}$/.test(e)}static \u0275fac=function(t){return new(t||s)(o(m))};static \u0275prov=a({token:s,factory:s.\u0275fac})};export{h as a,u as b};
