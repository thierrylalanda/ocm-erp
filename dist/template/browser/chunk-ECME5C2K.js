import{a as w}from"./chunk-ETTDFRY5.js";import{e as v}from"./chunk-IPRI2H5J.js";import{F as p,f as b,g as o,ha as y,r as f,v as d,w as c}from"./chunk-RKWTZGMB.js";var C=9007199254740991,x=class extends w{_data;_renderData=new o([]);_filter=new o("");_internalPageChanges=new b;_renderChangesSubscription=null;filteredData;get data(){return this._data.value}set data(e){e=Array.isArray(e)?e:[],this._data.next(e),this._renderChangesSubscription||this._filterData(e)}get filter(){return this._filter.value}set filter(e){this._filter.next(e),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(e){this._sort=e,this._updateChangeSubscription()}_sort;get paginator(){return this._paginator}set paginator(e){this._paginator=e,this._updateChangeSubscription()}_paginator;sortingDataAccessor=(e,t)=>{let a=e[t];if(v(a)){let r=Number(a);return r<C?r:a}return a};sortData=(e,t)=>{let a=t.active,r=t.direction;return!a||r==""?e:e.sort((m,u)=>{let i=this.sortingDataAccessor(m,a),n=this.sortingDataAccessor(u,a),h=typeof i,g=typeof n;h!==g&&(h==="number"&&(i+=""),g==="number"&&(n+=""));let l=0;return i!=null&&n!=null?i>n?l=1:i<n&&(l=-1):i!=null?l=1:n!=null&&(l=-1),l*(r=="asc"?1:-1)})};filterPredicate=(e,t)=>{let a=t.trim().toLowerCase();return Object.values(e).some(r=>`${r}`.toLowerCase().includes(a))};constructor(e=[]){super(),this._data=new o(e),this._updateChangeSubscription()}_updateChangeSubscription(){let e=this._sort?p(this._sort.sortChange,this._sort.initialized):f(null),t=this._paginator?p(this._paginator.page,this._internalPageChanges,this._paginator.initialized):f(null),a=this._data,r=c([a,this._filter]).pipe(d(([i])=>this._filterData(i))),m=c([r,e]).pipe(d(([i])=>this._orderData(i))),u=c([m,t]).pipe(d(([i])=>this._pageData(i)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=u.subscribe(i=>this._renderData.next(i))}_filterData(e){return this.filteredData=this.filter==null||this.filter===""?e:e.filter(t=>this.filterPredicate(t,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(e){return this.sort?this.sortData(e.slice(),this.sort):e}_pageData(e){if(!this.paginator)return e;let t=this.paginator.pageIndex*this.paginator.pageSize;return e.slice(t,t+this.paginator.pageSize)}_updatePaginator(e){Promise.resolve().then(()=>{let t=this.paginator;if(t&&(t.length=e,t.pageIndex>0)){let a=Math.ceil(t.length/t.pageSize)-1||0,r=Math.min(t.pageIndex,a);r!==t.pageIndex&&(t.pageIndex=r,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}};var D=class s{tablePageSize=new o({skip:0,limit:10,pageSize:10});calculatePageSize=new o({totalData:0,pageSize:10,tableData:[],serialNumberArray:[]});changePagesize=new o({pageSize:10});static \u0275fac=function(t){return new(t||s)};static \u0275prov=y({token:s,factory:s.\u0275fac,providedIn:"root"})};export{x as a,D as b};
