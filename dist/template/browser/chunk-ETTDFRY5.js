import{e as f,ka as w,r as d,t as D}from"./chunk-RKWTZGMB.js";var m=class{};function A(s){return s&&typeof s.connect=="function"&&!(s instanceof f)}var C=class extends m{_data;constructor(t){super(),this._data=t}connect(){return D(this._data)?this._data:d(this._data)}disconnect(){}},o=function(s){return s[s.REPLACED=0]="REPLACED",s[s.INSERTED=1]="INSERTED",s[s.MOVED=2]="MOVED",s[s.REMOVED=3]="REMOVED",s}(o||{}),M=new w("_ViewRepeater"),V=class{viewCacheSize=20;_viewCache=[];applyChanges(t,i,c,n,e){t.forEachOperation((h,_,a)=>{let E,l;if(h.previousIndex==null){let b=()=>c(h,_,a);E=this._insertView(b,a,i,n(h)),l=E?o.INSERTED:o.REPLACED}else a==null?(this._detachAndCacheView(_,i),l=o.REMOVED):(E=this._moveView(_,a,i,n(h)),l=o.MOVED);e&&e({context:E?.context,operation:l,record:h})})}detach(){for(let t of this._viewCache)t.destroy();this._viewCache=[]}_insertView(t,i,c,n){let e=this._insertViewFromCache(i,c);if(e){e.context.$implicit=n;return}let h=t();return c.createEmbeddedView(h.templateRef,h.context,h.index)}_detachAndCacheView(t,i){let c=i.detach(t);this._maybeCacheView(c,i)}_moveView(t,i,c,n){let e=c.get(t);return c.move(e,i),e.context.$implicit=n,e}_maybeCacheView(t,i){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(t);else{let c=i.indexOf(t);c===-1?t.destroy():i.remove(c)}}_insertViewFromCache(t,i){let c=this._viewCache.pop();return c&&i.insert(c,t),c||null}};export{m as a,A as b,C as c,M as d,V as e};
