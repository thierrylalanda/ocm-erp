import{A as lt,D as at,E as ct,a as X,d as Y,g as $,h as tt,i as et,j as nt,k as it,l as ot,n as rt,p as st}from"./chunk-ONBUWNZZ.js";import{c as O}from"./chunk-CPHVHMG6.js";import"./chunk-VLYMLFWW.js";import{e as J}from"./chunk-5IXW6HGI.js";import"./chunk-DIDBO66C.js";import"./chunk-DXRJN4NQ.js";import{j as G,k as q,l as H,p as W,y as Z}from"./chunk-AKUYEWL4.js";import{Ab as V,Jc as I,Kc as z,Lc as Q,Mc as U,Sb as d,Tb as l,Ub as a,Vb as S,Zb as B,_b as K,ac as w,ba as T,f as v,gc as h,ha as E,ib as g,ic as p,ja as D,mc as R,nc as A,ob as y,oc as j,sa as c,ta as u,vb as b,wa as M,wb as k,wc as N,xa as P,xc as m,zc as L}from"./chunk-ODQYRIBQ.js";import"./chunk-EQDQRRRY.js";var gt=s=>({"error-input":s});function ht(s,i){if(s&1&&(l(0,"span"),m(1),a()),s&2){let r=p(3);g(),L(" ",r.config.separator," ")}}function _t(s,i){if(s&1){let r=w();B(0),l(1,"input",5,0),h("paste",function(e){c(r);let n=p(2);return u(n.handlePaste(e))})("keyup",function(e){let n=c(r).index,o=p(2);return u(o.onKeyUp(e,n))})("input",function(e){let n=c(r).index,o=p(2);return u(o.onInput(e,n))})("keydown",function(e){let n=c(r).index,o=p(2);return u(o.onKeyDown(e,n))}),a(),V(3,ht,2,1,"span",6),K()}if(s&2){let r=i.$implicit,t=i.index,e=i.last,n=p(2);g(),N(I("otp-input ",n.config.inputClass)),d("pattern",n.config.allowNumbersOnly?"\\d*":"")("type",n.inputType)("placeholder",(n.config==null?null:n.config.placeholder)||"")("ngStyle",n.config.inputStyles)("formControl",n.otpForm.controls[r])("id",n.getBoxId(t))("ngClass",U(11,gt,(n.config==null?null:n.config.showError)&&(n.formControl==null?null:n.formControl.invalid)&&((n.formControl==null?null:n.formControl.dirty)||(n.formControl==null?null:n.formControl.touched)))),g(2),d("ngIf",n.config.separator&&!e)}}function Ct(s,i){if(s&1){let r=w();l(0,"div",2),h("focusin",function(){c(r);let e=p();return u(e.onFocusIn())})("focusout",function(){c(r);let e=p();return u(e.onFocusOut())}),l(1,"div",3),V(2,_t,4,13,"ng-container",4),a()()}if(s&2){let r=p();N(I("ng-otp-input-wrapper wrapper ",r.config.containerClass)),d("id",I("c_",r.componentKey))("ngStyle",r.config.containerStyles),g(2),d("ngForOf",r.controlKeys)}}var f=class{static ifTab(i){return this.ifKey(i,"Tab")}static ifDelete(i){return this.ifKey(i,"Delete;Del")}static ifBackspace(i){return this.ifKey(i,"Backspace")}static ifRightArrow(i){return this.ifKey(i,"ArrowRight;Right")}static ifLeftArrow(i){return this.ifKey(i,"ArrowLeft;Left")}static ifSpacebar(i){return this.ifKey(i,"Spacebar; ")}static ifKey(i,r){return r.split(";").some(e=>e===i.key)}},x=class{static keys(i){return i?Object.keys(i):[]}},F=(()=>{let i=class i{set disabled(t){this.setDisabledState(t)}get inputType(){return this.config?.isPasswordInput?"password":this.config?.allowNumbersOnly?"tel":"text"}get controlKeys(){return x.keys(this.otpForm?.controls)}get formControl(){return this.formCtrl??this.inj?.get($)}constructor(t,e){this.document=t,this.inj=e,this.config={length:4},this.onBlur=new v,this.onInputChange=new v,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+new Date().getTime().toString(36),this.destroy$=new v,this.activeFocusCount=0,this.onChange=()=>{},this.onTouched=()=>{},this._isDisabled=!1}ngOnInit(){this.otpForm=new nt({});for(let t=0;t<this.config.length;t++)this.otpForm.addControl(this.getControlName(t),new ot);this.otpForm.valueChanges.pipe(T(this.destroy$)).subscribe(t=>{x.keys(this.otpForm.controls).forEach(e=>{var n=this.otpForm.controls[e].value;n&&n.length>1&&(n.length>=this.config.length?this.setValue(n):this.rebuildValue())})})}setDisabledState(t){this._isDisabled=t,this.otpForm&&(t?this.otpForm.disable({emitEvent:!1}):this.otpForm.enable({emitEvent:!1}))}writeValue(t){this.currentVal=this.hasVal(t)?t:null,this.setValue(this.currentVal)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}onFocusIn(){this.onTouched(),this.activeFocusCount++}onFocusOut(){setTimeout(()=>{this.activeFocusCount--,this.activeFocusCount===0&&(this.onTouched(),this.onBlur.next())},0)}ngAfterViewInit(){if(!this.config.disableAutoFocus){let t=this.document.getElementById(`c_${this.componentKey}`);if(t){let e=t.getElementsByClassName("otp-input")[0];e&&e.focus&&e.focus()}}}getControlName(t){return`ctrl_${t}`}onKeyDown(t,e){let n=this.getBoxId(e-1),o=this.getBoxId(e);if(f.ifKey(t,"Enter")){let C=this.document.getElementById(o)?.closest("form");if(C){t.preventDefault();let mt=new Event("submit",{bubbles:!0,cancelable:!0});C.dispatchEvent(mt);return}}if(f.ifSpacebar(t))return t.preventDefault(),!1;if(f.ifBackspace(t)){t.target.value?this.clearInput(o,e):(this.clearInput(n,e-1),this.setSelected(n)),this.rebuildValue();return}if(f.ifDelete(t)){t.target.value?this.clearInput(o,e):(this.clearInput(n,e-1),this.setSelected(n)),this.rebuildValue();return}}hasVal(t){return t!=null&&t!=null&&(!t?.trim||t.trim()!="")}onInput(t,e){let n=this.hasVal(this.currentVal)?`${this.currentVal}${t.target.value}`:t.target.value;if(this.config.allowNumbersOnly&&!this.validateNumber(n)){t.target.value=null,t.stopPropagation(),t.preventDefault(),this.clearInput(null,e);return}if(this.ifValidKeyCode(null,t.target.value)){let o=this.getBoxId(e+1);this.setSelected(o),this.rebuildValue()}else{t.target.value=null;let o=this.getControlName(e);this.otpForm.controls[o]?.setValue(null),this.rebuildValue()}}onKeyUp(t,e){f.ifTab(t)&&(e-=1);let n=this.getBoxId(e+1),o=this.getBoxId(e-1);if(f.ifRightArrow(t)){t.preventDefault(),this.setSelected(n);return}if(f.ifLeftArrow(t)){t.preventDefault(),this.setSelected(o);return}}validateNumber(t){return t&&/^[0-9]+$/.test(t)}getBoxId(t){return`otp_${t}_${this.componentKey}`}clearInput(t,e){let n=this.getControlName(e);if(this.otpForm.controls[n]?.setValue(null),t){let o=this.document.getElementById(t);o&&o instanceof HTMLInputElement&&(o.value=null)}}setSelected(t){this.focusTo(t);let e=this.document.getElementById(t);e&&e.setSelectionRange&&setTimeout(()=>{e.setSelectionRange(0,1)},0)}ifValidKeyCode(t,e){let n=e??t.key;return this.config?.allowNumbersOnly?this.validateNumber(n):/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/^[a-zA-Z0-9%*_\-@#$!]$/.test(n)&&n.length==1}focusTo(t){let e=this.document.getElementById(t);e&&e.focus()}setValue(t){if(!(this.config.allowNumbersOnly&&isNaN(t))){if(this.otpForm?.reset(),!this.hasVal(t)){this.rebuildValue();return}t=t.toString().replace(/\s/g,""),Array.from(t).forEach((e,n)=>{this.otpForm.get(this.getControlName(n))&&this.otpForm.get(this.getControlName(n)).setValue(e)}),this.config.disableAutoFocus||setTimeout(()=>{let e=this.document.getElementById(`c_${this.componentKey}`);var n=t.length<this.config.length?t.length:this.config.length-1;let o=e.getElementsByClassName("otp-input")[n];o&&o.focus&&setTimeout(()=>{o.focus()},1)},0),this.rebuildValue()}}rebuildValue(){let t=null;x.keys(this.otpForm.controls).forEach(e=>{let n=this.otpForm.controls[e].value;if(n){let o=n.length>1,_=!this.config.allowNumbersOnly&&this.config.letterCase&&(this.config.letterCase.toLocaleLowerCase()=="upper"||this.config.letterCase.toLocaleLowerCase()=="lower");n=n[0];let C=_?this.config.letterCase.toLocaleLowerCase()=="upper"?n.toUpperCase():n.toLowerCase():n;_&&C==n?_=!1:n=C,t==null?t=n:t+=n,(o||_)&&this.otpForm.controls[e].setValue(n)}}),this.currentVal!=t&&(this.currentVal=t,this.onChange(t),this.formCtrl?.setValue&&this.formCtrl.setValue(t),this.onInputChange.next(t))}handlePaste(t){let e=t.clipboardData||window.clipboardData;if(e)var n=e.getData("Text");t.stopPropagation(),t.preventDefault(),!(!n||this.config.allowNumbersOnly&&!this.validateNumber(n))&&this.setValue(n)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(e){return new(e||i)(y(P),y(M))},i.\u0275cmp=b({type:i,selectors:[["ng-otp-input"],["ngx-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl",disabled:"disabled"},outputs:{onBlur:"onBlur",onInputChange:"onInputChange"},features:[z([{provide:X,useExisting:E(()=>i),multi:!0}])],decls:1,vars:1,consts:[["inp",""],["tabindex","0",3,"class","id","ngStyle","focusin","focusout",4,"ngIf"],["tabindex","0",3,"focusin","focusout","id","ngStyle"],[1,"n-o-c"],[4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"paste","keyup","input","keydown","pattern","type","placeholder","ngStyle","formControl","id","ngClass"],[4,"ngIf"]],template:function(e,n){e&1&&V(0,Ct,3,7,"div",1),e&2&&d("ngIf",n.otpForm==null?null:n.otpForm.controls)},dependencies:[ct,Y,tt,lt,st,H,q,W,G],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]{margin:0 .51rem}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:first-child{margin-left:0}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:last-child{margin-right:0}.n-o-c[_ngcontent-%COMP%]{display:flex;align-items:center}.error-input[_ngcontent-%COMP%]{border-color:red}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]});let s=i;return s})(),ut=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=k({type:i}),i.\u0275inj=D({imports:[F]});let s=i;return s})();var wt=["otpRef"],xt=()=>({length:4,allowNumbersOnly:!0}),pt=class s{constructor(i){this.router=i}routes=O;value;otpInput;handleOtpChange(i){console.log("OTP Changed:",i)}resetOtp(){this.otpInput?.setValue("")}redirectPage(){this.router.navigate([O.resetPassword])}static \u0275fac=function(r){return new(r||s)(y(J))};static \u0275cmp=b({type:s,selectors:[["app-two-step-verification"]],viewQuery:function(r,t){if(r&1&&R(wt,5),r&2){let e;A(e=j())&&(t.otpInput=e.first)}},decls:34,vars:2,consts:[["otpRef",""],[1,"main-wrapper","auth-bg"],[1,"container-fuild"],[1,"w-100","overflow-hidden","position-relative","flex-wrap","d-block","vh-100"],[1,"row","justify-content-center","align-items-center","vh-100","overflow-auto","flex-wrap"],[1,"col-lg-4","mx-auto"],[1,"digit-group","d-flex","justify-content-center","align-items-center",3,"ngSubmit"],[1,"d-flex","flex-column","justify-content-lg-center","p-4","p-lg-0","pb-0","flex-fill"],[1,"mx-auto","mb-5","text-center"],["src","assets/img/logo.svg","alt","Logo",1,"img-fluid"],[1,"card","border-0","p-lg-3","shadow-lg","rounded-2"],[1,"card-body"],[1,"mb-3","text-center"],[1,"isax","isax-tick-circle5","text-success","fs-48"],[1,"text-center","mb-3"],[1,"mb-2"],[1,"mb-0"],[1,"text-center","otp-input"],[1,"d-flex","align-items-center","justify-content-center","mb-3","custom-otp"],[3,"onInputChange","config"],[1,"d-flex","justify-content-center"],[1,"mb-3","d-flex","align-items-center"],[1,"text-gray-9","me-4","mb-0"],["href","javascript:void(0);",1,"text-primary",3,"click"],[1,"text-danger"],["type","submit",1,"btn","bg-primary-gradient","text-white","w-100"]],template:function(r,t){if(r&1){let e=w();l(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"form",6),h("ngSubmit",function(){return c(e),u(t.redirectPage())}),l(6,"div",7)(7,"div",8),S(8,"img",9),a(),l(9,"div",10)(10,"div",11)(11,"div",12)(12,"span"),S(13,"i",13),a()(),l(14,"div",14)(15,"h5",15),m(16,"Reset Password"),a(),l(17,"p",16),m(18,"We sent a code to info@example.com"),a()(),l(19,"div",17)(20,"div",18)(21,"ng-otp-input",19,0),h("onInputChange",function(o){return c(e),u(t.handleOtpChange(o))}),a()(),l(23,"div",20)(24,"div",21)(25,"p",22),m(26,"Didn't receive code. "),l(27,"a",23),h("click",function(){return c(e),u(t.resetOtp())}),m(28,"Resend Code"),a()(),l(29,"span",24),m(30,"00:45"),a()()()(),l(31,"div")(32,"button",25),m(33,"Reset Password"),a()()()()()()()()()()()}r&2&&(g(21),d("config",Q(1,xt)))},dependencies:[Z,at,rt,et,it,ut,F],encapsulation:2})};export{pt as TwoStepVerificationComponent};
