import{d as G,e as Te}from"./chunk-QUEWDR2J.js";import{a as A}from"./chunk-HP4GEL2V.js";import{b as D}from"./chunk-4TCBKJUY.js";import{a as Pe}from"./chunk-LYNBBFO6.js";import{a as Ee,b as Ue,c as we,d as Ie,e as Fe,f as ye}from"./chunk-VEBI74XV.js";import"./chunk-LPKSWXKS.js";import"./chunk-EC24VSHY.js";import"./chunk-PKRFMUL6.js";import"./chunk-NPBVNPNY.js";import"./chunk-Z4FQMWZ2.js";import"./chunk-WR2XZ5TW.js";import"./chunk-AYK4AKZR.js";import"./chunk-UJ5MSXFC.js";import"./chunk-5UGB2S5Z.js";import"./chunk-IEXRXU6D.js";import"./chunk-7RWCIHFI.js";import"./chunk-YYUD2I6S.js";import"./chunk-3WBD4RP4.js";import"./chunk-JAHFL35X.js";import{a as y,b as be}from"./chunk-2Y4LLCKE.js";import{a as Ce,c as Se}from"./chunk-6ZIFMK4B.js";import"./chunk-H5RQM42I.js";import{b as N}from"./chunk-RTG4BLL2.js";import{B as ve,D as xe,E as he,d as O,f as E,h as B,i as pe,j as ce,m as ue,n as fe,q as _e,r as ge}from"./chunk-ONBUWNZZ.js";import{b as k,h as de}from"./chunk-CPHVHMG6.js";import"./chunk-VLYMLFWW.js";import{e as me}from"./chunk-5IXW6HGI.js";import"./chunk-DIDBO66C.js";import{g as le}from"./chunk-DXRJN4NQ.js";import{j as se,k as T,l as M,y as V}from"./chunk-AKUYEWL4.js";import{Ab as C,Ac as Z,Cb as $,Dc as ee,Fc as te,Gc as ie,Hc as ne,Ia as L,Ic as w,Jc as re,Kc as ae,Lc as oe,Mb as Q,Nb as W,Pb as Y,Qb as j,Rb as q,Sb as p,Tb as r,Ub as n,Uc as m,Vb as h,Vc as d,ac as U,db as z,gc as f,ib as i,ic as _,mc as H,na as S,nc as J,oc as K,sa as g,ta as v,tc as X,uc as b,vb as P,xc as o,yc as x,zc as u}from"./chunk-ODQYRIBQ.js";import{f as I}from"./chunk-EQDQRRRY.js";function Ne(s,t){if(s&1){let e=U();r(0,"div",44),h(1,"i",45),o(2),m(3,"translate"),m(4,"translate"),r(5,"button",46),f("click",function(){g(e);let l=_();return v(l.success=!1)}),n()()}if(s&2){let e=_();i(2),u(" ",e.isEditMode?d(3,1,"forms.userForm.successEdit"):d(4,3,"forms.userForm.successCreate")," ")}}function De(s,t){if(s&1){let e=U();r(0,"div",47),h(1,"i",48),o(2),r(3,"button",46),f("click",function(){g(e);let l=_();return v(l.error=null)}),n()()}if(s&2){let e=_();i(2),u(" ",e.error," ")}}function Ae(s,t){if(s&1&&(r(0,"div",49),o(1),n()),s&2){let e=_();i(),u(" ",e.getFieldError("nomPrenom")," ")}}function Re(s,t){if(s&1&&(r(0,"div",49),o(1),n()),s&2){let e=_();i(),u(" ",e.getFieldError("email")," ")}}function ze(s,t){if(s&1&&(r(0,"div",49),o(1),n()),s&2){let e=_();i(),u(" ",e.getFieldError("userName")," ")}}function $e(s,t){if(s&1&&(r(0,"div",49),o(1),n()),s&2){let e=_(2);i(),u(" ",e.getFieldError("password")," ")}}function je(s,t){if(s&1&&(r(0,"div",6)(1,"label",50),o(2),m(3,"translate"),r(4,"span",8),o(5,"*"),n()(),h(6,"input",51),m(7,"translate"),C(8,$e,2,1,"div",10),n()),s&2){let e=_();i(2),u(" ",d(3,6,"forms.userForm.password")," "),i(4),b("is-invalid",e.isFieldInvalid("password")),p("placeholder",w(d(7,8,"forms.userForm.passwordPlaceholder"))),i(2),p("ngIf",e.isFieldInvalid("password"))}}function qe(s,t){if(s&1&&(r(0,"div",49),o(1),n()),s&2){let e=_(2);i(),u(" ",e.getFieldError("confirmPassword")," ")}}function Ge(s,t){if(s&1&&(r(0,"div",6)(1,"label",52),o(2),m(3,"translate"),r(4,"span",8),o(5,"*"),n()(),h(6,"input",53),m(7,"translate"),C(8,qe,2,1,"div",10),n()),s&2){let e=_();i(2),u(" ",d(3,6,"forms.userForm.confirmPassword")," "),i(4),b("is-invalid",e.isFieldInvalid("confirmPassword")),p("placeholder",w(d(7,8,"forms.userForm.confirmPasswordPlaceholder"))),i(2),p("ngIf",e.isFieldInvalid("confirmPassword"))}}function Le(s,t){if(s&1&&(r(0,"div",49),o(1),n()),s&2){let e=_();i(),u(" ",e.getFieldError("telephone")," ")}}function Qe(s,t){if(s&1&&(r(0,"mat-option",54),o(1),n()),s&2){let e=t.$implicit;p("value",e.value),i(),u(" ",e.label," ")}}function We(s,t){if(s&1&&(r(0,"mat-error"),o(1),n()),s&2){let e=_();i(),u(" ",e.getFieldError("siteId")," ")}}function Ye(s,t){if(s&1&&(r(0,"mat-option",54),o(1),n()),s&2){let e=t.$implicit;p("value",e.value),i(),u(" ",e.label," ")}}function He(s,t){if(s&1&&(r(0,"mat-error"),o(1),n()),s&2){let e=_();i(),u(" ",e.getFieldError("departementId")," ")}}function Je(s,t){if(s&1&&(r(0,"mat-option",54),o(1),n()),s&2){let e=t.$implicit;p("value",e.value),i(),u(" ",e.label," ")}}function Ke(s,t){if(s&1&&(r(0,"mat-error"),o(1),n()),s&2){let e=_();i(),u(" ",e.getFieldError("statut")," ")}}function Xe(s,t){s&1&&h(0,"span",55)}function Ze(s,t){s&1&&h(0,"i",56)}var R=class s{fb=S(ve);createUserUseCase=S(y);updateUserUseCase=S(G);siteService=S(D);departementService=S(A);authService=S(k);user;isEditMode=!1;userSaved=new $;cancelled=new $;userForm;loading=!1;error=null;success=!1;statusOptions=[{value:"ACTIF",label:"forms.userForm.statuses.ACTIF"},{value:"INACTIF",label:"forms.userForm.statuses.INACTIF"},{value:"EN_ATTENTE",label:"forms.userForm.statuses.EN_ATTENTE"}];siteOptions=[];departmentOptions=[];ngOnInit(){this.initForm(),this.loadSites(),this.loadDepartements()}ngOnChanges(){this.user&&this.isEditMode&&setTimeout(()=>{this.populateForm(this.user)},100)}initForm(){this.userForm=this.fb.group({id:[null],nomPrenom:["",[E.required,E.minLength(3)]],email:["",[E.required,E.email]],telephone:["",[E.pattern(/^[0-9+\s\-()]{10,}$/)]],adresse:[""],siteId:["",E.required],departementId:["",E.required],statut:["ACTIF",E.required],userName:["",[E.required,E.minLength(3)]],password:["",this.isEditMode?[]:[E.required,E.minLength(6)]],confirmPassword:["",this.isEditMode?[]:[E.required]],societeId:[this.authService.idUser,E.required],pwdText:[""],photo:[""],signature:[""],langue:["fr"]},{validators:this.passwordMatchValidator})}populateForm(t){this.userForm.patchValue({id:t.id,nomPrenom:t.nomPrenom,email:t.email,telephone:t.telephone||"",adresse:t.adresse||"",siteId:t.siteId||"",departementId:t.departementId||"",statut:t.statut||"ACTIF",userName:t.userName||t.email.split("@")[0],societeId:t.societeId||1,pwdText:t.pwdText||"",photo:t.photo||"",signature:t.signature||"",langue:t.langue||"fr"}),this.userForm.get("password")?.clearValidators(),this.userForm.get("confirmPassword")?.clearValidators(),this.userForm.get("password")?.updateValueAndValidity(),this.userForm.get("confirmPassword")?.updateValueAndValidity()}passwordMatchValidator(t){let e=t.get("password")?.value,a=t.get("confirmPassword")?.value;return e&&a&&e!==a?{passwordMismatch:!0}:null}onSubmit(){return I(this,null,function*(){if(this.userForm.invalid){this.markFormGroupTouched(this.userForm);return}this.loading=!0,this.error=null,this.success=!1;try{let t=this.userForm.value,e={id:t.id,nomPrenom:t.nomPrenom,email:t.email,telephone:t.telephone||"",adresse:t.adresse||"",userName:t.userName,password:t.password||"",pwdText:t.password||"",societeId:t.societeId,siteId:t.siteId,departementId:t.departementId,statut:t.statut,photo:t.photo||"",signature:t.signature||"",langue:t.langue||"fr"},a;this.isEditMode&&this.user?a=yield this.updateUserUseCase.execute(e.id,e):a=yield this.createUserUseCase.execute(e),this.success=!0,this.userSaved.emit(a),this.isEditMode||setTimeout(()=>{this.userForm.reset({statut:"ACTIF",siteId:"",departementId:"",societeId:1,langue:"fr"}),this.success=!1},2e3)}catch(t){console.error("Erreur lors de la sauvegarde de l'utilisateur:",t),this.error=t.message||"Une erreur est survenue lors de la sauvegarde. Veuillez r\xE9essayer."}finally{this.loading=!1}})}onCancel(){this.cancelled.emit()}markFormGroupTouched(t){Object.values(t.controls).forEach(e=>{e.markAsTouched(),e instanceof ce&&this.markFormGroupTouched(e)})}isFieldInvalid(t){let e=this.userForm.get(t);return e?e.invalid&&(e.dirty||e.touched):!1}getFieldError(t){let e=this.userForm.get(t);if(!e||!e.errors)return"";if(e.errors.required)return"forms.validation.required";if(e.errors.email)return"forms.validation.email";if(e.errors.minlength){let a=e.errors.minlength.requiredLength;return"forms.validation.minLength".replace("{min}",a.toString())}return e.errors.pattern?"Format invalide":e.errors.passwordMismatch?"forms.validation.passwordMismatch":"Valeur invalide"}generateUsername(){let t=this.userForm.get("email")?.value;if(t&&!this.userForm.get("userName")?.value){let e=t.split("@")[0];this.userForm.get("userName")?.setValue(e)}}loadSites(){this.siteService.getSites({page:0,size:100}).subscribe({next:t=>{this.siteOptions=t.content.map(e=>({value:e.id,label:`${e.nom} (${e.code})`}))},error:t=>{console.error("Erreur lors du chargement des sites:",t),this.siteOptions=[]}})}loadDepartements(){this.departementService.getDepartements(void 0,0,100).subscribe({next:t=>{this.departmentOptions=t.content.map(e=>({value:e.id,label:e.nom}))},error:t=>{console.error("Erreur lors du chargement des d\xE9partements:",t),this.departmentOptions=[]}})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=P({type:s,selectors:[["app-user-form"]],inputs:{user:"user",isEditMode:"isEditMode"},outputs:{userSaved:"userSaved",cancelled:"cancelled"},features:[ae([{provide:y,useClass:be},{provide:G,useClass:Te}]),L],decls:121,vars:108,consts:[[1,"user-form"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["novalidate","",1,"needs-validation",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-column"],[1,"form-group"],["for","nomPrenom",1,"form-label"],[1,"required"],["type","text","id","nomPrenom","formControlName","nomPrenom",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"blur","placeholder"],["for","userName",1,"form-label"],["type","text","id","userName","formControlName","userName",1,"form-control",3,"placeholder"],["class","form-group",4,"ngIf"],["for","telephone",1,"form-label"],["type","tel","id","telephone","formControlName","telephone",1,"form-control",3,"placeholder"],[1,"form-label"],["id","siteId","formControlName","siteId",1,"custom-mat-select","select"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["id","departementId","formControlName","departementId",1,"custom-mat-select","select"],["id","statut","formControlName","statut",1,"custom-mat-select","select"],["id","langue","formControlName","langue",1,"custom-mat-select","select"],["value","fr"],["value","en"],["value","es"],["for","adresse",1,"form-label"],["id","adresse","formControlName","adresse","rows","2",1,"form-control",3,"placeholder"],["type","hidden","formControlName","societeId"],["type","hidden","formControlName","pwdText"],["type","hidden","formControlName","photo"],["type","hidden","formControlName","signature"],[1,"form-actions"],[1,"action-buttons","d-flex","align-items-center","justify-content-between","gap-1"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-times","me-1"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1","role","status","aria-hidden","true",4,"ngIf"],["class","fas fa-save me-1",4,"ngIf"],[1,"form-help"],[1,"help-text"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"fas","fa-check-circle","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"fas","fa-exclamation-circle","me-2"],[1,"invalid-feedback"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control",3,"placeholder"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control",3,"placeholder"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"fas","fa-save","me-1"]],template:function(e,a){e&1&&(r(0,"div",0),C(1,Ne,6,5,"div",1)(2,De,4,1,"div",2),r(3,"form",3),f("ngSubmit",function(){return a.onSubmit()}),r(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),o(8),m(9,"translate"),r(10,"span",8),o(11,"*"),n()(),h(12,"input",9),m(13,"translate"),C(14,Ae,2,1,"div",10),n(),r(15,"div",6)(16,"label",11),o(17),m(18,"translate"),r(19,"span",8),o(20,"*"),n()(),r(21,"input",12),m(22,"translate"),f("blur",function(){return a.generateUsername()}),n(),C(23,Re,2,1,"div",10),n(),r(24,"div",6)(25,"label",13),o(26),m(27,"translate"),r(28,"span",8),o(29,"*"),n()(),h(30,"input",14),m(31,"translate"),C(32,ze,2,1,"div",10),n(),C(33,je,9,10,"div",15)(34,Ge,9,10,"div",15),r(35,"div",6)(36,"label",16),o(37),m(38,"translate"),n(),h(39,"input",17),m(40,"translate"),C(41,Le,2,1,"div",10),n()(),r(42,"div",5)(43,"div",6)(44,"label",18),o(45),m(46,"translate"),r(47,"span",8),o(48,"*"),n()(),r(49,"mat-select",19)(50,"mat-option",20),o(51),m(52,"translate"),n(),C(53,Qe,2,2,"mat-option",21),n(),C(54,We,2,1,"mat-error",22),n(),r(55,"div",6)(56,"label",18),o(57),m(58,"translate"),r(59,"span",8),o(60,"*"),n()(),r(61,"mat-select",23)(62,"mat-option",20),o(63),m(64,"translate"),n(),C(65,Ye,2,2,"mat-option",21),n(),C(66,He,2,1,"mat-error",22),n(),r(67,"div",6)(68,"label",18),o(69),m(70,"translate"),r(71,"span",8),o(72,"*"),n()(),r(73,"mat-select",24),C(74,Je,2,2,"mat-option",21),n(),C(75,Ke,2,1,"mat-error",22),n(),r(76,"div",6)(77,"label",18),o(78),m(79,"translate"),r(80,"span",8),o(81,"*"),n()(),r(82,"mat-select",25)(83,"mat-option",26),o(84),m(85,"translate"),n(),r(86,"mat-option",27),o(87),m(88,"translate"),n(),r(89,"mat-option",28),o(90),m(91,"translate"),n()()(),r(92,"div",6)(93,"label",29),o(94),m(95,"translate"),n(),h(96,"textarea",30),m(97,"translate"),n(),h(98,"input",31)(99,"input",32)(100,"input",33)(101,"input",34),n()(),r(102,"div",35)(103,"div",36)(104,"button",37),f("click",function(){return a.onCancel()}),h(105,"i",38),o(106),m(107,"translate"),n(),r(108,"button",39),C(109,Xe,1,0,"span",40)(110,Ze,1,0,"i",41),o(111),m(112,"translate"),m(113,"translate"),m(114,"translate"),n()()(),r(115,"div",42)(116,"p",43)(117,"span",8),o(118,"*"),n(),o(119),m(120,"translate"),n()()()()),e&2&&(i(),p("ngIf",a.success),i(),p("ngIf",a.error),i(),p("formGroup",a.userForm),i(5),u(" ",d(9,60,"forms.userForm.fullName")," "),i(4),b("is-invalid",a.isFieldInvalid("nomPrenom")),p("placeholder",w(d(13,62,"forms.userForm.fullNamePlaceholder"))),i(2),p("ngIf",a.isFieldInvalid("nomPrenom")),i(3),u(" ",d(18,64,"forms.userForm.email")," "),i(4),b("is-invalid",a.isFieldInvalid("email")),p("placeholder",w(d(22,66,"forms.userForm.emailPlaceholder"))),i(2),p("ngIf",a.isFieldInvalid("email")),i(3),u(" ",d(27,68,"forms.userForm.username")," "),i(4),b("is-invalid",a.isFieldInvalid("userName")),p("placeholder",w(d(31,70,"forms.userForm.usernamePlaceholder"))),i(2),p("ngIf",a.isFieldInvalid("userName")),i(),p("ngIf",!a.isEditMode),i(),p("ngIf",!a.isEditMode),i(3),x(d(38,72,"forms.userForm.phone")),i(2),b("is-invalid",a.isFieldInvalid("telephone")),p("placeholder",w(d(40,74,"forms.userForm.phonePlaceholder"))),i(2),p("ngIf",a.isFieldInvalid("telephone")),i(4),u("",d(46,76,"forms.userForm.site")," "),i(4),b("is-invalid",a.isFieldInvalid("siteId")),i(2),x(d(52,78,"forms.userForm.sitePlaceholder")),i(2),p("ngForOf",a.siteOptions),i(),p("ngIf",a.isFieldInvalid("siteId")),i(3),u("",d(58,80,"forms.userForm.department")," "),i(4),b("is-invalid",a.isFieldInvalid("departementId")),i(2),x(d(64,82,"forms.userForm.departmentPlaceholder")),i(2),p("ngForOf",a.departmentOptions),i(),p("ngIf",a.isFieldInvalid("departementId")),i(3),u("",d(70,84,"forms.userForm.status")," "),i(4),b("is-invalid",a.isFieldInvalid("statut")),i(),p("ngForOf",a.statusOptions),i(),p("ngIf",a.isFieldInvalid("statut")),i(3),u("",d(79,86,"forms.userForm.language")," "),i(6),x(d(85,88,"forms.userForm.languages.fr")),i(3),x(d(88,90,"forms.userForm.languages.en")),i(3),x(d(91,92,"forms.userForm.languages.es")),i(4),x(d(95,94,"forms.userForm.address")),i(2),p("placeholder",w(d(97,96,"forms.userForm.addressPlaceholder"))),i(8),p("disabled",a.loading),i(2),u(" ",d(107,98,"forms.userForm.cancel")," "),i(2),p("disabled",a.userForm.invalid||a.loading),i(),p("ngIf",a.loading),i(),p("ngIf",!a.loading),i(),u(" ",a.loading?d(112,100,"forms.userForm.saving"):a.isEditMode?d(113,102,"forms.userForm.edit"):d(114,104,"forms.userForm.create")," "),i(8),u(" ",d(120,106,"forms.userForm.requiredField")," "))},dependencies:[V,T,M,he,fe,O,B,pe,_e,ge,ye,Ue,Fe,Ee,Ie,we,Pe,N],styles:[".user-form[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:24px;box-shadow:0 2px 10px #0000001a}.form-header[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #eaeaea}.form-title[_ngcontent-%COMP%]{color:#333;font-size:1.5rem;font-weight:600;margin-bottom:8px}.form-description[_ngcontent-%COMP%]{color:#666;font-size:.95rem;margin-bottom:0}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:24px}.form-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:6px;font-size:.9rem}.form-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545;margin-left:2px}.form-control[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:6px;padding:10px 12px;font-size:.95rem;transition:all .2s ease;background-color:#fff;width:100%}.form-control[_ngcontent-%COMP%]:focus{border-color:#4a90e2;box-shadow:0 0 0 .2rem #4a90e240;outline:none}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #dc354540}textarea.form-control[_ngcontent-%COMP%]{min-height:80px;resize:vertical}.invalid-feedback[_ngcontent-%COMP%]{font-size:.85rem;margin-top:4px;color:#dc3545}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%]{display:none}mat-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{min-height:48px;padding-top:8px;padding-bottom:8px}mat-form-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{border-radius:6px;background-color:#fff}mat-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-flex[_ngcontent-%COMP%]{align-items:center}mat-form-field[_ngcontent-%COMP%]   .mat-mdc-select-value[_ngcontent-%COMP%]{font-size:.95rem}.mat-mdc-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{border-color:#dc3545}.mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:.85rem;color:#dc3545;margin-top:4px}.mat-mdc-option[_ngcontent-%COMP%]{font-size:.95rem}.mat-mdc-option[_ngcontent-%COMP%]:hover{background-color:#4a90e21a}.mat-mdc-select-panel[_ngcontent-%COMP%]{border-radius:6px;box-shadow:0 4px 12px #00000026}.alert[_ngcontent-%COMP%]{border-radius:6px;padding:12px 16px;margin-bottom:20px;border:none}.alert.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.alert.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.btn-close[_ngcontent-%COMP%]{opacity:.7}.btn-close[_ngcontent-%COMP%]:hover{opacity:1}.form-actions[_ngcontent-%COMP%]{padding-top:20px;border-top:1px solid #eaeaea;margin-top:24px}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.2em}.form-help[_ngcontent-%COMP%]{margin-top:16px;text-align:center}.help-text[_ngcontent-%COMP%]{color:#6c757d;font-size:.85rem;margin-bottom:0}.help-text[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545}@media (max-width: 768px){.user-form[_ngcontent-%COMP%]{padding:16px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.form-title[_ngcontent-%COMP%]{font-size:1.3rem}.btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-control[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%], .alert[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}"]})};var et=["userFormModal"],tt=()=>({standalone:!0}),it=(s,t)=>t.id;function nt(s,t){s&1&&(r(0,"li")(1,"a",43),h(2,"i",44),o(3,"Chargement... "),n()())}function rt(s,t){if(s&1){let e=U();r(0,"li")(1,"a",8),f("click",function(){let l=g(e).$implicit,c=_();return v(c.filterBySite(l.id))}),o(2),n()()}if(s&2){let e=t.$implicit;i(2),u(" ",e.nom," ")}}function at(s,t){s&1&&(r(0,"li")(1,"a",43),h(2,"i",44),o(3,"Chargement... "),n()())}function ot(s,t){if(s&1){let e=U();r(0,"li")(1,"a",8),f("click",function(){let l=g(e).$implicit,c=_();return v(c.filterByDepartment(l.id))}),o(2),n()()}if(s&2){let e=t.$implicit;i(2),u(" ",e.nom," ")}}function st(s,t){s&1&&(r(0,"div",45)(1,"div",46)(2,"span",47),o(3,"Chargement..."),n()(),r(4,"p",48),o(5,"Chargement des utilisateurs..."),n()())}function lt(s,t){if(s&1){let e=U();r(0,"div",49),h(1,"i",50),o(2),r(3,"button",51),f("click",function(){g(e);let l=_();return v(l.error=null)}),n()()}if(s&2){let e=_();i(2),u(" ",e.error," ")}}function mt(s,t){if(s&1){let e=U();r(0,"li")(1,"a",74),f("click",function(){g(e);let l=_().$implicit,c=_(2);return v(c.deactivateUser(l))}),h(2,"i",75),o(3,"D\xE9sactiver "),n()()}}function dt(s,t){if(s&1){let e=U();r(0,"li")(1,"a",76),f("click",function(){g(e);let l=_().$implicit,c=_(2);return v(c.activateUser(l))}),h(2,"i",77),o(3,"Activer "),n()()}}function pt(s,t){if(s&1){let e=U();r(0,"tr")(1,"td")(2,"div",57)(3,"div",58),h(4,"img",59),n(),r(5,"div")(6,"h6",60),o(7),n(),r(8,"small",61),o(9),n()()()(),r(10,"td")(11,"a",62),o(12),n(),r(13,"button",63),f("click",function(){let l=g(e).$implicit,c=_(2);return v(c.copyEmail(l))}),h(14,"i",64),n()(),r(15,"td"),o(16),m(17,"translate"),n(),r(18,"td"),o(19),n(),r(20,"td"),o(21),n(),r(22,"td"),o(23),m(24,"translate"),n(),r(25,"td"),o(26),n(),r(27,"td")(28,"span",65),o(29),n()(),r(30,"td",66)(31,"a",67),h(32,"i",68),n(),r(33,"ul",7)(34,"li")(35,"a",69),f("click",function(){let l=g(e).$implicit,c=_(2);return v(c.viewUserDetails(l))}),h(36,"i",70),o(37,"Voir d\xE9tails "),n()(),r(38,"li")(39,"a",69),f("click",function(){let l=g(e).$implicit,c=_(2);return v(c.openEditUserModal(l))}),h(40,"i",71),o(41,"Modifier "),n()(),C(42,mt,4,0,"li",28)(43,dt,4,0,"li",28),r(44,"li")(45,"a",72),f("click",function(){let l=g(e).$implicit,c=_(2);return v(c.deleteUser(l))}),h(46,"i",73),o(47,"Supprimer "),n()()()()()}if(s&2){let e=t.$implicit,a=_(2);i(4),p("src",e.photo||"assets/img/profiles/avatar-01.jpg",z),i(3),x(e.nomPrenom),i(2),x(e.userName),i(2),p("href",re("mailto:",e.email),z),i(),x(e.email),i(4),x(e.telephone||d(17,15,"manageUsers.notProvided")),i(3),x(e.siteNom||"Site "+e.siteId),i(2),x(e.departementNom||"D\xE9partement "+e.departementId),i(2),x(e.derniereConnexion?a.formatDate(e.derniereConnexion):d(24,17,"manageUsers.never")),i(3),x(a.formatDate(e.dateCreation)),i(2),p("ngClass",a.getStatusClass(e.statut)),i(),u(" ",a.getStatusText(e.statut)," "),i(13),p("ngIf",e.statut==="ACTIF"),i(),p("ngIf",e.statut==="INACTIF"||e.statut==="EN_ATTENTE")}}function ct(s,t){s&1&&(r(0,"tr")(1,"td",78)(2,"div",79),h(3,"i",80),r(4,"h6",81),o(5),m(6,"translate"),n(),r(7,"p",82),o(8),m(9,"translate"),n()()()()),s&2&&(i(5),x(d(6,2,"manageUsers.noUsers")),i(3),x(d(9,4,"manageUsers.noUsersMessage")))}function ut(s,t){if(s&1){let e=U();r(0,"li",84)(1,"a",85),f("click",function(){let l=g(e).$implicit,c=_(3);return v(c.changePage(l))}),o(2),n()()}if(s&2){let e=t.$implicit,a=_(3);b("active",e===a.currentPage),i(2),u(" ",e+1," ")}}function ft(s,t){if(s&1){let e=U();r(0,"div",56)(1,"div",61),o(2),m(3,"translate"),m(4,"translate"),m(5,"translate"),n(),r(6,"nav")(7,"ul",83)(8,"li",84)(9,"a",85),f("click",function(){g(e);let l=_(2);return v(l.changePage(l.currentPage-1))}),h(10,"i",86),n()(),j(11,ut,3,3,"li",87,Y),r(13,"li",84)(14,"a",85),f("click",function(){g(e);let l=_(2);return v(l.changePage(l.currentPage+1))}),h(15,"i",88),n()()()(),r(16,"div",4)(17,"a",89),o(18),m(19,"translate"),n(),r(20,"ul",7)(21,"li")(22,"a",8),f("click",function(){g(e);let l=_(2);return v(l.changePageSize(5))}),o(23),m(24,"translate"),n()(),r(25,"li")(26,"a",8),f("click",function(){g(e);let l=_(2);return v(l.changePageSize(10))}),o(27),m(28,"translate"),n()(),r(29,"li")(30,"a",8),f("click",function(){g(e);let l=_(2);return v(l.changePageSize(25))}),o(31),m(32,"translate"),n()(),r(33,"li")(34,"a",8),f("click",function(){g(e);let l=_(2);return v(l.changePageSize(50))}),o(35),m(36,"translate"),n()()()()()}if(s&2){let e=_(2);i(2),ee(" ",d(3,15,"manageUsers.showing")," ",e.users.length," ",d(4,17,"manageUsers.of")," ",e.totalElements," ",d(5,19,"manageUsers.users")," "),i(6),b("disabled",e.currentPage===0),i(3),q(e.getPageNumbers()),i(2),b("disabled",e.currentPage===e.totalPages-1),i(5),Z(" ",e.pageSize," ",d(19,21,"manageUsers.perPage")," "),i(5),u("5 ",d(24,23,"manageUsers.perPage")),i(4),u("10 ",d(28,25,"manageUsers.perPage")),i(4),u("25 ",d(32,27,"manageUsers.perPage")),i(4),u("50 ",d(36,29,"manageUsers.perPage"))}}function _t(s,t){if(s&1&&(r(0,"div",52)(1,"table",53)(2,"thead",54)(3,"tr")(4,"th"),o(5),m(6,"translate"),n(),r(7,"th"),o(8),m(9,"translate"),n(),r(10,"th"),o(11),m(12,"translate"),n(),r(13,"th"),o(14),m(15,"translate"),n(),r(16,"th"),o(17),m(18,"translate"),n(),r(19,"th"),o(20),m(21,"translate"),n(),r(22,"th"),o(23),m(24,"translate"),n(),r(25,"th"),o(26),m(27,"translate"),n(),r(28,"th",55),o(29),m(30,"translate"),n()()(),r(31,"tbody"),j(32,pt,48,19,"tr",null,it,!1,ct,10,6,"tr"),n()(),Q(35,ft,37,31,"div",56),n()),s&2){let e=_();i(5),x(d(6,11,"manageUsers.user")),i(3),x(d(9,13,"manageUsers.email")),i(3),x(d(12,15,"manageUsers.phone")),i(3),x(d(15,17,"manageUsers.site")),i(3),x(d(18,19,"manageUsers.department")),i(3),x(d(21,21,"manageUsers.lastLogin")),i(3),x(d(24,23,"manageUsers.creationDate")),i(3),x(d(27,25,"manageUsers.status")),i(3),x(d(30,27,"manageUsers.actions")),i(3),q(e.users),i(3),W(e.totalPages>1?35:-1)}}function gt(s,t){s&1&&h(0,"div",90),s&2&&b("show",!1)}var Me=class s{getUsersUseCase=S(Se);createUserUseCase=S(y);userRepository=S(Ce);siteService=S(D);departementService=S(A);authService=S(k);router=S(me);toastService=S(de);userFormModal;users=[];loading=!1;error=null;selectedUser=null;isEditMode=!1;modalTitle="Cr\xE9er un nouvel utilisateur";currentPage=0;pageSize=10;totalElements=0;totalPages=0;searchQuery="";statusFilter="";siteFilter=null;departmentFilter=null;sites=[];departments=[];loadingFilters=!1;constructor(){}ngOnInit(){this.loadUsers(),this.loadFiltersData()}loadUsers(){return I(this,null,function*(){this.loading=!0,this.error=null;try{let t={page:this.currentPage,size:this.pageSize,search:this.searchQuery||void 0,sortBy:"nomPrenom",sortOrder:"asc"},e;this.siteFilter?e=yield this.getUsersUseCase.executeBySite(this.siteFilter,t):this.departmentFilter?e=yield this.getUsersUseCase.executeByDepartment(this.departmentFilter,t):e=yield this.getUsersUseCase.execute(t),this.users=e.content,this.totalElements=e.totalElements,this.totalPages=e.totalPages}catch(t){console.error("Erreur lors du chargement des utilisateurs:",t),this.error="Impossible de charger la liste des utilisateurs. Veuillez r\xE9essayer.",this.users=[]}finally{this.loading=!1}})}loadFiltersData(){return I(this,null,function*(){this.loadingFilters=!0;try{let e=this.authService.user?.societeId;if(!e){console.warn("Aucune soci\xE9t\xE9 trouv\xE9e pour l'utilisateur connect\xE9"),this.sites=[],this.departments=[];return}let a=yield this.siteService.getSites({societeId:e,page:0,size:100,actif:!0}).toPromise();a?.content?this.sites=a.content.map(c=>({id:c.id,nom:c.nom||`Site ${c.id}`})):this.sites=[];let l=yield this.departementService.getDepartements(e,0,100,void 0,!0).toPromise();l?.content?this.departments=l.content.map(c=>({id:c.id,nom:c.nom||`D\xE9partement ${c.id}`})):this.departments=[]}catch(t){console.error("Erreur lors du chargement des filtres:",t),this.sites=[],this.departments=[]}finally{this.loadingFilters=!1}})}onSearch(){this.currentPage=0,this.loadUsers()}resetFilters(){this.searchQuery="",this.statusFilter="",this.siteFilter=null,this.departmentFilter=null,this.currentPage=0,this.loadUsers()}filterBySite(t){this.siteFilter=t,this.departmentFilter=null,this.currentPage=0,this.loadUsers()}filterByDepartment(t){this.departmentFilter=t,this.siteFilter=null,this.currentPage=0,this.loadUsers()}getSelectedSiteName(){if(!this.siteFilter)return"Tous";let t=this.sites.find(e=>e.id===this.siteFilter);return t?t.nom:`Site ${this.siteFilter}`}getSelectedDepartmentName(){if(!this.departmentFilter)return"Tous";let t=this.departments.find(e=>e.id===this.departmentFilter);return t?t.nom:`D\xE9partement ${this.departmentFilter}`}changePage(t){t>=0&&t<this.totalPages&&(this.currentPage=t,this.loadUsers())}changePageSize(t){this.pageSize=t,this.currentPage=0,this.loadUsers()}openCreateUserModal(){this.selectedUser=null,this.isEditMode=!1,this.modalTitle="Cr\xE9er un nouvel utilisateur",this.openModal()}openEditUserModal(t){this.selectedUser=t,this.isEditMode=!0,this.modalTitle=`Modifier l'utilisateur ${t.nomPrenom}`,this.openModal()}openModal(){let t=this.userFormModal?.nativeElement;t?new window.bootstrap.Modal(t).show():console.error("\xC9l\xE9ment modal non trouv\xE9")}activateUser(t){return I(this,null,function*(){try{yield this.userRepository.activateUser({value:t.id}),yield this.loadUsers(),this.toastService.typeSuccess(`L'utilisateur ${t.nomPrenom} a \xE9t\xE9 activ\xE9 avec succ\xE8s.`)}catch{this.error="Impossible d'activer l'utilisateur.",this.toastService.typeError("Erreur lors de l'activation de l'utilisateur.")}})}deactivateUser(t){return I(this,null,function*(){try{yield this.userRepository.deactivateUser({value:t.id}),yield this.loadUsers(),this.toastService.typeSuccess(`L'utilisateur ${t.nomPrenom} a \xE9t\xE9 d\xE9sactiv\xE9 avec succ\xE8s.`)}catch{this.error="Impossible de d\xE9sactiver l'utilisateur.",this.toastService.typeError("Erreur lors de la d\xE9sactivation de l'utilisateur.")}})}deleteUser(t){return I(this,null,function*(){if(confirm(`\xCAtes-vous s\xFBr de vouloir supprimer l'utilisateur ${t.nomPrenom} ?`))try{yield this.loadUsers()}catch{this.error="Impossible de supprimer l'utilisateur.",this.toastService.typeError("Erreur lors de la suppression de l'utilisateur.")}})}exportUsers(){this.toastService.typeSuccess("Exporter la liste des utilisateurs")}importUsers(){this.toastService.typeSuccess("Importer des utilisateurs")}generateReport(){this.toastService.typeSuccess("G\xE9n\xE9rer un rapport d'utilisateurs")}viewUserDetails(t){this.router.navigate(["/app/manage-users/user-detail",t.id])}copyEmail(t){navigator.clipboard.writeText(t.email).then(()=>{this.toastService.typeSuccess("Email copi\xE9 dans le presse-papier")}).catch(e=>{this.toastService.typeError("Erreur lors de la copie de l'email")})}formatDate(t){try{let e=new Date(t);return isNaN(e.getTime())?"Date invalide":e.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Date invalide"}}getStatusClass(t){switch(t){case"ACTIF":return"badge bg-success";case"INACTIF":return"badge bg-danger";case"EN_ATTENTE":return"badge bg-warning";default:return"badge bg-secondary"}}getStatusText(t){switch(t){case"ACTIF":return"Actif";case"INACTIF":return"Inactif";case"EN_ATTENTE":return"En attente";default:return t}}changeSort(t,e){console.log(`Trier par ${t} (${e})`),this.loadUsers()}filterByStatus(t){this.statusFilter=t,this.currentPage=0,this.loadUsers()}getPageNumbers(){let t=[],a=Math.max(0,this.currentPage-Math.floor(2.5)),l=Math.min(this.totalPages-1,a+5-1);l-a+1<5&&(a=Math.max(0,l-5+1));for(let c=a;c<=l;c++)t.push(c);return t}onUserSaved(t){this.toastService.typeSuccess("Utilisateur sauvegard\xE9"),this.loadUsers(),this.closeModal()}onFormCancelled(){this.closeModal()}closeModal(){let t=this.userFormModal?.nativeElement;if(t){let e=window.bootstrap.Modal.getInstance(t);e&&e.hide()}}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=P({type:s,selectors:[["app-users"]],viewQuery:function(e,a){if(e&1&&H(et,5),e&2){let l;J(l=K())&&(a.userFormModal=l.first)}},decls:122,vars:72,consts:[["userFormModal",""],[1,"content-two"],[1,"d-flex","d-block","align-items-center","justify-content-between","flex-wrap","gap-3","mb-3"],[1,"d-flex","my-xl-auto","right-content","align-items-center","flex-wrap","gap-2"],[1,"dropdown"],["href","javascript:void(0);","data-bs-toggle","dropdown",1,"btn","btn-outline-white","d-inline-flex","align-items-center"],[1,"isax","isax-export-1","me-1"],[1,"dropdown-menu"],["href","javascript:void(0);",1,"dropdown-item",3,"click"],["href","javascript:void(0);",1,"btn","btn-primary","d-flex","align-items-center",3,"click"],[1,"isax","isax-add-circle5","me-1"],[1,"mb-3"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-3"],[1,"d-flex","align-items-center","flex-wrap","gap-2"],[1,"table-search","d-flex","align-items-center","mb-0"],[1,"search-input"],["href","javascript:void(0);",1,"btn-searchset"],[1,"isax","isax-search-normal","fs-12"],["id","DataTables_Table_0_filter",1,"dataTables_filter"],["type","search","aria-controls","DataTables_Table_0",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],["href","javascript:void(0);",1,"btn","btn-outline-white","fw-normal","d-inline-flex","align-items-center",3,"click"],[1,"isax","isax-refresh","me-1"],["href","javascript:void(0);","data-bs-toggle","dropdown",1,"dropdown-toggle","btn","btn-outline-white","d-inline-flex","align-items-center"],[1,"isax","isax-sort","me-1"],[1,"fw-normal","ms-1"],[1,"dropdown-menu","dropdown-menu-end"],[1,"isax","isax-filter","me-1"],[1,"isax","isax-building","me-1"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"isax","isax-building-3","me-1"],["class","text-center py-4",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","table-responsive",4,"ngIf"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"userSaved","cancelled","user","isEditMode"],["class","modal-backdrop fade",3,"show",4,"ngIf"],["href","javascript:void(0);",1,"dropdown-item","disabled"],[1,"fas","fa-spinner","fa-spin","me-2"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"fas","fa-exclamation-circle","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"table-responsive"],[1,"table","table-nowrap","dataTable","datatable"],[1,"thead-light"],[1,"text-end"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-sm","rounded-circle","me-2","flex-shrink-0"],["alt","Avatar",1,"rounded-circle",3,"src"],[1,"fs-14","fw-medium","mb-0"],[1,"text-muted"],[1,"text-primary",3,"href"],["title","Copier l'email",1,"btn","btn-sm","btn-link","text-muted","p-0","ms-1",3,"click"],[1,"fas","fa-copy"],[1,"badge","d-inline-flex","align-items-center",3,"ngClass"],[1,"action-item"],["href","javascript:void(0);","data-bs-toggle","dropdown"],[1,"isax","isax-more"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"isax","isax-eye","me-2"],[1,"isax","isax-edit","me-2"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center","text-danger",3,"click"],[1,"isax","isax-trash","me-2"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center","text-warning",3,"click"],[1,"isax","isax-pause-circle","me-2"],["href","javascript:void(0);",1,"dropdown-item","d-flex","align-items-center","text-success",3,"click"],[1,"isax","isax-play-circle","me-2"],["colspan","9",1,"text-center","py-4"],[1,"empty-state"],[1,"isax","isax-user-square","fs-48","text-muted","mb-3"],[1,"mb-2"],[1,"text-muted","mb-0"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],["href","javascript:void(0);",1,"page-link",3,"click"],[1,"fas","fa-chevron-left"],[1,"page-item",3,"active"],[1,"fas","fa-chevron-right"],["href","javascript:void(0);","data-bs-toggle","dropdown",1,"btn","btn-outline-white","btn-sm","dropdown-toggle"],[1,"modal-backdrop","fade"]],template:function(e,a){if(e&1){let l=U();r(0,"div",1)(1,"div",2)(2,"div")(3,"h6"),o(4),m(5,"translate"),n()(),r(6,"div",3)(7,"div",4)(8,"a",5),h(9,"i",6),o(10),m(11,"translate"),n(),r(12,"ul",7)(13,"li")(14,"a",8),f("click",function(){return g(l),v(a.exportUsers())}),o(15),m(16,"translate"),n()(),r(17,"li")(18,"a",8),f("click",function(){return g(l),v(a.exportUsers())}),o(19),m(20,"translate"),n()()()(),r(21,"div")(22,"a",9),f("click",function(){return g(l),v(a.openCreateUserModal())}),h(23,"i",10),o(24),m(25,"translate"),n()()()(),r(26,"div",11)(27,"div",12)(28,"div",13)(29,"div",14)(30,"div",15)(31,"a",16),h(32,"i",17),n(),r(33,"div",18)(34,"label")(35,"input",19),m(36,"translate"),ne("ngModelChange",function(F){return g(l),ie(a.searchQuery,F)||(a.searchQuery=F),v(F)}),f("ngModelChange",function(){return g(l),v(a.onSearch())}),n()()()()(),r(37,"a",20),f("click",function(){return g(l),v(a.resetFilters())}),h(38,"i",21),o(39),m(40,"translate"),n()(),r(41,"div",13)(42,"div",4)(43,"a",22),h(44,"i",23),o(45),m(46,"translate"),r(47,"span",24),o(48,"Nom"),n()(),r(49,"ul",25)(50,"li")(51,"a",8),f("click",function(){return g(l),v(a.changeSort("nomPrenom","asc"))}),o(52),m(53,"translate"),n()(),r(54,"li")(55,"a",8),f("click",function(){return g(l),v(a.changeSort("nomPrenom","desc"))}),o(56),m(57,"translate"),n()(),r(58,"li")(59,"a",8),f("click",function(){return g(l),v(a.changeSort("dateCreation","desc"))}),o(60),m(61,"translate"),n()(),r(62,"li")(63,"a",8),f("click",function(){return g(l),v(a.changeSort("dateCreation","asc"))}),o(64),m(65,"translate"),n()()()(),r(66,"div",4)(67,"a",22),h(68,"i",26),o(69),m(70,"translate"),n(),r(71,"ul",7)(72,"li")(73,"a",8),f("click",function(){return g(l),v(a.filterByStatus(""))}),o(74),m(75,"translate"),n()(),r(76,"li")(77,"a",8),f("click",function(){return g(l),v(a.filterByStatus("ACTIF"))}),o(78),m(79,"translate"),n()(),r(80,"li")(81,"a",8),f("click",function(){return g(l),v(a.filterByStatus("INACTIF"))}),o(82),m(83,"translate"),n()(),r(84,"li")(85,"a",8),f("click",function(){return g(l),v(a.filterByStatus("EN_ATTENTE"))}),o(86),m(87,"translate"),n()()()(),r(88,"div",4)(89,"a",22),h(90,"i",27),o(91),n(),r(92,"ul",7)(93,"li")(94,"a",8),f("click",function(){return g(l),v(a.filterBySite(null))}),o(95," Tous les sites "),n()(),C(96,nt,4,0,"li",28)(97,rt,3,1,"li",29),n()(),r(98,"div",4)(99,"a",22),h(100,"i",30),o(101),n(),r(102,"ul",7)(103,"li")(104,"a",8),f("click",function(){return g(l),v(a.filterByDepartment(null))}),o(105," Tous les d\xE9partements "),n()(),C(106,at,4,0,"li",28)(107,ot,3,1,"li",29),n()()()()(),C(108,st,6,0,"div",31)(109,lt,4,1,"div",32)(110,_t,36,29,"div",33),n(),r(111,"div",34,0)(113,"div",35)(114,"div",36)(115,"div",37)(116,"h5",38),o(117),n(),r(118,"button",39),f("click",function(){return g(l),v(a.onFormCancelled())}),n()(),r(119,"div",40)(120,"app-user-form",41),f("userSaved",function(F){return g(l),v(a.onUserSaved(F))})("cancelled",function(){return g(l),v(a.onFormCancelled())}),n()()()()(),C(121,gt,1,2,"div",42)}e&2&&(i(4),x(d(5,37,"manageUsers.title")),i(6),u("",d(11,39,"manageUsers.export")," "),i(5),x(d(16,41,"manageUsers.exportPdf")),i(4),x(d(20,43,"manageUsers.exportExcel")),i(5),u("",d(25,45,"manageUsers.newUser")," "),i(11),p("placeholder",w(d(36,47,"manageUsers.search"))),te("ngModel",a.searchQuery),p("ngModelOptions",oe(71,tt)),i(4),u("",d(40,49,"manageUsers.reset")," "),i(6),u("",d(46,51,"manageUsers.sortBy")," "),i(7),x(d(53,53,"manageUsers.sortNameAsc")),i(4),x(d(57,55,"manageUsers.sortNameDesc")),i(4),x(d(61,57,"manageUsers.sortRecent")),i(4),x(d(65,59,"manageUsers.sortOldest")),i(5),u("",d(70,61,"manageUsers.filterStatus")," "),i(5),x(d(75,63,"manageUsers.filterAll")),i(4),x(d(79,65,"manageUsers.filterActive")),i(4),x(d(83,67,"manageUsers.filterInactive")),i(4),x(d(87,69,"manageUsers.filterPending")),i(5),u(" Site: ",a.getSelectedSiteName()," "),i(5),p("ngIf",a.loadingFilters),i(),p("ngForOf",a.sites),i(4),u(" D\xE9partement: ",a.getSelectedDepartmentName()," "),i(5),p("ngIf",a.loadingFilters),i(),p("ngForOf",a.departments),i(),p("ngIf",a.loading),i(),p("ngIf",a.error&&!a.loading),i(),p("ngIf",!a.loading&&!a.error),i(),X("display","none"),b("show",!1),i(6),u(" ",a.modalTitle," "),i(3),p("user",a.selectedUser||void 0)("isEditMode",a.isEditMode),i(),p("ngIf",!1))},dependencies:[V,se,T,M,xe,O,B,ue,le,R,N],encapsulation:2})};export{Me as UsersComponent};
