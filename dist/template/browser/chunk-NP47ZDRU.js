import{a as te}from"./chunk-LYNBBFO6.js";import{a as K,d as Q,e as Z,f as ee}from"./chunk-VEBI74XV.js";import"./chunk-LPKSWXKS.js";import"./chunk-EC24VSHY.js";import"./chunk-PKRFMUL6.js";import"./chunk-NPBVNPNY.js";import"./chunk-Z4FQMWZ2.js";import"./chunk-WR2XZ5TW.js";import"./chunk-AYK4AKZR.js";import"./chunk-UJ5MSXFC.js";import"./chunk-5UGB2S5Z.js";import"./chunk-IEXRXU6D.js";import"./chunk-7RWCIHFI.js";import"./chunk-YYUD2I6S.js";import"./chunk-3WBD4RP4.js";import"./chunk-JAHFL35X.js";import{a as X}from"./chunk-H5RQM42I.js";import"./chunk-X227H3FY.js";import{b as W}from"./chunk-RTG4BLL2.js";import{B as Y,E as J,b as N,d as k,f,h as V,i as j,j as G,n as $,o as A,q as z,r as H}from"./chunk-ONBUWNZZ.js";import{b as P}from"./chunk-CPHVHMG6.js";import"./chunk-VLYMLFWW.js";import"./chunk-5IXW6HGI.js";import"./chunk-DIDBO66C.js";import{c as R}from"./chunk-DXRJN4NQ.js";import{k as U,l as O,y as q}from"./chunk-AKUYEWL4.js";import{Ab as v,Ac as T,Ic as D,Sb as d,Tb as o,Ub as t,Uc as p,Vb as c,Vc as l,Yc as M,ac as C,db as L,gc as h,ia as F,ib as e,ic as y,ma as E,ob as I,sa as _,sc as w,ta as S,uc as x,vb as B,xc as r,yc as u,zc as m}from"./chunk-ODQYRIBQ.js";import"./chunk-EQDQRRRY.js";var b=class i{constructor(n,a){this.http=n;this.authService=a}baseUrl=X.api+"hierarchie/societes";getCompany(n){return this.http.get(`${this.baseUrl}/${n}`)}getCurrentUserCompany(){let n=this.authService.user;if(!n||!n.societeId)throw new Error("User not authenticated or company ID not found");return this.getCompany(n.societeId)}updateCompany(n,a){return this.http.put(`${this.baseUrl}/${n}`,a)}updateCurrentUserCompany(n){let a=this.authService.user;if(!a||!a.societeId)throw new Error("User not authenticated or company ID not found");return this.updateCompany(a.societeId,n)}uploadLogo(n,a){let g=new FormData;return g.append("file",a),this.http.post(`${this.baseUrl}/${n}/logo`,g)}uploadCurrentUserCompanyLogo(n){let a=this.authService.user;if(!a||!a.societeId)throw new Error("User not authenticated or company ID not found");return this.uploadLogo(a.societeId,n)}deleteLogo(n){return this.http.delete(`${this.baseUrl}/${n}/logo`)}deleteCurrentUserCompanyLogo(){let n=this.authService.user;if(!n||!n.societeId)throw new Error("User not authenticated or company ID not found");return this.deleteLogo(n.societeId)}static \u0275fac=function(a){return new(a||i)(E(R),E(P))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};function re(i,n){i&1&&(o(0,"div",8)(1,"div",9)(2,"span",10),r(3,"Loading..."),t()(),o(4,"p",11),r(5),p(6,"translate"),t()()),i&2&&(e(5),u(l(6,1,"companySettings.loading")))}function pe(i,n){if(i&1&&(o(0,"div",12),r(1),t()),i&2){let a=y();e(),m(" ",a.errorMessage," ")}}function le(i,n){if(i&1&&(o(0,"div",13),r(1),t()),i&2){let a=y();e(),m(" ",a.successMessage," ")}}function se(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.companyNameRequired")," "))}function me(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.emailRequired")," "))}function de(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.emailInvalid")," "))}function ce(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.phoneRequired")," "))}function ge(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.activityRequired")," "))}function ve(i,n){i&1&&(o(0,"span"),r(1),p(2,"translate"),t()),i&2&&(e(),u(l(2,1,"companySettings.uploadLogo")))}function ue(i,n){i&1&&(o(0,"span"),c(1,"span",90),r(2),p(3,"translate"),t()),i&2&&(e(2),m(" ",l(3,1,"companySettings.uploading")," "))}function fe(i,n){if(i&1){let a=C();o(0,"div",11)(1,"div",86),c(2,"i",87),r(3),t(),o(4,"button",88),h("click",function(){_(a);let s=y(2);return S(s.uploadLogo())}),v(5,ve,3,3,"span",84)(6,ue,4,3,"span",84),t(),o(7,"button",89),h("click",function(){_(a);let s=y(2);return s.selectedLogoFile=null,s.logoPreview=null,S(s.updateLogoPreview())}),r(8),p(9,"translate"),t()()}if(i&2){let a=y(2);e(3),T(" ",a.selectedLogoFile.name," (",(a.selectedLogoFile.size/1024).toFixed(2)," KB) "),e(),d("disabled",a.isUploadingLogo),e(),d("ngIf",!a.isUploadingLogo),e(),d("ngIf",a.isUploadingLogo),e(2),m(" ",l(9,6,"common.cancel")," ")}}function ye(i,n){i&1&&(o(0,"span"),c(1,"i",94),r(2),p(3,"translate"),t()),i&2&&(e(2),m("",l(3,1,"common.delete")," "))}function xe(i,n){i&1&&(o(0,"span"),c(1,"span",90),r(2),p(3,"translate"),t()),i&2&&(e(2),m(" ",l(3,1,"companySettings.deleting")," "))}function _e(i,n){if(i&1){let a=C();o(0,"div",91),c(1,"img",92),o(2,"div",11)(3,"button",93),h("click",function(){_(a);let s=y(2);return S(s.deleteLogo())}),v(4,ye,4,3,"span",84)(5,xe,4,3,"span",84),t()()()}if(i&2){let a=y(2);e(),d("src",a.logoPreview,L),e(2),d("disabled",a.isDeletingLogo||!(a.company!=null&&a.company.logo)),e(),d("ngIf",!a.isDeletingLogo),e(),d("ngIf",a.isDeletingLogo)}}function Se(i,n){i&1&&(o(0,"div",95),c(1,"i",96),o(2,"p",97),r(3),p(4,"translate"),t()()),i&2&&(e(3),u(l(4,1,"companySettings.noLogo")))}function he(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.addressRequired")," "))}function Ce(i,n){if(i&1&&(o(0,"mat-option",98),r(1),t()),i&2){let a=n.$implicit;d("value",a),e(),u(a)}}function be(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.countryRequired")," "))}function Ee(i,n){if(i&1&&(o(0,"mat-option",98),r(1),t()),i&2){let a=n.$implicit;d("value",a),e(),u(a)}}function Ie(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.regionRequired")," "))}function Fe(i,n){if(i&1&&(o(0,"mat-option",98),r(1),t()),i&2){let a=n.$implicit;d("value",a),e(),u(a)}}function Le(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.currencyRequired")," "))}function Be(i,n){if(i&1&&(o(0,"mat-option",98),r(1),t()),i&2){let a=n.$implicit;d("value",a),e(),u(a)}}function we(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.mainCurrencyRequired")," "))}function Te(i,n){if(i&1&&(o(0,"mat-option",98),r(1),t()),i&2){let a=n.$implicit;d("value",a),e(),u(a)}}function De(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.valuationMethodRequired")," "))}function Me(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.currentFiscalYearRequired")," "))}function Ue(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.yearRangeError")," "))}function Oe(i,n){i&1&&(o(0,"div",85),r(1),p(2,"translate"),t()),i&2&&(e(),m(" ",l(2,1,"companySettings.negativeCapitalError")," "))}function qe(i,n){i&1&&(o(0,"span"),r(1),p(2,"translate"),t()),i&2&&(e(),u(l(2,1,"companySettings.saveChanges")))}function Re(i,n){i&1&&(o(0,"span"),c(1,"span",90),r(2),p(3,"translate"),t()),i&2&&(e(2),m(" ",l(3,1,"companySettings.saving")," "))}function Pe(i,n){if(i&1){let a=C();o(0,"form",14),h("ngSubmit",function(){_(a);let s=y();return S(s.onSubmit())}),o(1,"div",15)(2,"div",16)(3,"h6",17)(4,"span",18),c(5,"i",19),t(),r(6),p(7,"translate"),t()(),o(8,"div",20)(9,"div",21)(10,"div",22)(11,"label",23),r(12),p(13,"translate"),o(14,"span",24),r(15,"*"),t()(),c(16,"input",25),v(17,se,3,3,"div",26),t()(),o(18,"div",21)(19,"div",22)(20,"label",23),r(21),p(22,"translate"),o(23,"span",24),r(24,"*"),t()(),c(25,"input",27),v(26,me,3,3,"div",26)(27,de,3,3,"div",26),t()(),o(28,"div",28)(29,"div",22)(30,"label",23),r(31),p(32,"translate"),o(33,"span",24),r(34,"*"),t()(),c(35,"input",29),v(36,ce,3,3,"div",26),t()(),o(37,"div",28)(38,"div",22)(39,"label",23),r(40),p(41,"translate"),o(42,"span",24),r(43,"*"),t()(),c(44,"input",30),v(45,ge,3,3,"div",26),t()()(),o(46,"div",20)(47,"div",28)(48,"div",22)(49,"label",23),r(50),p(51,"translate"),t(),c(52,"input",31),t()(),o(53,"div",28)(54,"div",22)(55,"label",23),r(56),p(57,"translate"),t(),c(58,"input",32),t()(),o(59,"div",28)(60,"div",22)(61,"label",23),r(62),p(63,"translate"),t(),c(64,"input",33),t()(),o(65,"div",28)(66,"div",22)(67,"label",23),r(68),p(69,"translate"),t(),c(70,"input",34),t()()()(),o(71,"div",35)(72,"div",16)(73,"h6",17)(74,"span",18),c(75,"i",36),t(),r(76),p(77,"translate"),t()(),o(78,"div",37)(79,"div",38)(80,"div",39)(81,"div",40)(82,"div",41)(83,"h6",42),r(84),p(85,"translate"),t(),o(86,"p",43),r(87),p(88,"translate"),t()()(),o(89,"div",40)(90,"div",44)(91,"div",45)(92,"div",46)(93,"div",47)(94,"input",48),h("change",function(s){_(a);let ne=y();return S(ne.onLogoSelected(s))}),t(),o(95,"div",49)(96,"h4"),c(97,"i",50),r(98),p(99,"translate"),t()()(),o(100,"span",43),r(101),p(102,"translate"),t(),v(103,fe,10,8,"div",51),t()()()()()(),o(104,"div",52)(105,"div",53),v(106,_e,6,4,"div",54)(107,Se,5,3,"ng-template",null,0,M),t()()(),o(109,"div",20)(110,"div",55)(111,"div",22)(112,"label",23),r(113),p(114,"translate"),t(),o(115,"div",56),c(116,"input",57),o(117,"button",58),p(118,"translate"),h("click",function(){_(a);let s=y();return S(s.copyLogoUrl())}),c(119,"i",59),t()(),o(120,"small",60),r(121),p(122,"translate"),t()()()()(),o(123,"div",61)(124,"div",16)(125,"h6",62)(126,"span",18),c(127,"i",63),t(),r(128),p(129,"translate"),t()(),o(130,"div",20)(131,"div",55)(132,"div",22)(133,"label",23),r(134),p(135,"translate"),o(136,"span",24),r(137,"*"),t()(),c(138,"input",64),v(139,he,3,3,"div",26),t()(),o(140,"div",28)(141,"div",22)(142,"label",23),r(143),p(144,"translate"),o(145,"span",24),r(146,"*"),t()(),o(147,"mat-select",65)(148,"mat-option",66),r(149),p(150,"translate"),t(),v(151,Ce,2,2,"mat-option",67),t(),v(152,be,3,3,"div",26),t()(),o(153,"div",28)(154,"div",22)(155,"label",23),r(156),p(157,"translate"),o(158,"span",24),r(159,"*"),t()(),o(160,"mat-select",68)(161,"mat-option",66),r(162),p(163,"translate"),t(),v(164,Ee,2,2,"mat-option",67),t(),v(165,Ie,3,3,"div",26),t()(),o(166,"div",28)(167,"div",22)(168,"label",23),r(169),p(170,"translate"),t(),c(171,"input",69),t()(),o(172,"div",28)(173,"div",22)(174,"label",23),r(175),p(176,"translate"),t(),c(177,"input",70),t()()()(),o(178,"div",71)(179,"div",16)(180,"h6",62)(181,"span",18),c(182,"i",72),t(),r(183),p(184,"translate"),t()(),o(185,"div",20)(186,"div",28)(187,"div",22)(188,"label",23),r(189),p(190,"translate"),o(191,"span",24),r(192,"*"),t()(),o(193,"mat-select",73)(194,"mat-option",66),r(195),p(196,"translate"),t(),v(197,Fe,2,2,"mat-option",67),t(),v(198,Le,3,3,"div",26),t()(),o(199,"div",28)(200,"div",22)(201,"label",23),r(202),p(203,"translate"),o(204,"span",24),r(205,"*"),t()(),o(206,"mat-select",74)(207,"mat-option",66),r(208),p(209,"translate"),t(),v(210,Be,2,2,"mat-option",67),t(),v(211,we,3,3,"div",26),t()(),o(212,"div",28)(213,"div",22)(214,"label",23),r(215),p(216,"translate"),o(217,"span",24),r(218,"*"),t()(),o(219,"mat-select",75)(220,"mat-option",66),r(221),p(222,"translate"),t(),v(223,Te,2,2,"mat-option",67),t(),v(224,De,3,3,"div",26),t()(),o(225,"div",28)(226,"div",22)(227,"label",23),r(228),p(229,"translate"),o(230,"span",24),r(231,"*"),t()(),c(232,"input",76),v(233,Me,3,3,"div",26)(234,Ue,3,3,"div",26),t()(),o(235,"div",28)(236,"div",22)(237,"label",23),r(238),p(239,"translate"),t(),c(240,"input",77),v(241,Oe,3,3,"div",26),t()(),o(242,"div",28)(243,"div",22)(244,"label",23),r(245),p(246,"translate"),t(),o(247,"div",78),c(248,"input",79),o(249,"label",80),r(250),p(251,"translate"),p(252,"translate"),t()()()()()(),o(253,"div",81)(254,"button",82),h("click",function(){_(a);let s=y();return S(s.onCancel())}),r(255),p(256,"translate"),t(),o(257,"button",83),v(258,qe,3,3,"span",84)(259,Re,4,3,"span",84),t()()()}if(i&2){let a,g=w(108),s=y();d("formGroup",s.companyForm),e(6),m(" ",l(7,89,"companySettings.generalInformation")," "),e(6),m(" ",l(13,91,"companySettings.companyName")," "),e(4),x("is-invalid",s.isFieldInvalid("nom")),e(),d("ngIf",s.hasError("nom","required")),e(4),m(" ",l(22,93,"companySettings.email")," "),e(4),x("is-invalid",s.isFieldInvalid("email")),e(),d("ngIf",s.hasError("email","required")),e(),d("ngIf",s.hasError("email","email")),e(4),m(" ",l(32,95,"companySettings.phone")," "),e(4),x("is-invalid",s.isFieldInvalid("telephone")),e(),d("ngIf",s.hasError("telephone","required")),e(4),m(" ",l(41,97,"companySettings.activity")," "),e(4),x("is-invalid",s.isFieldInvalid("activite")),e(),d("ngIf",s.hasError("activite","required")),e(5),m(" ",l(51,99,"companySettings.accountingNumber")," "),e(6),m(" ",l(57,101,"companySettings.rccm")," "),e(6),m(" ",l(63,103,"companySettings.taxRegime")," "),e(6),m(" ",l(69,105,"companySettings.legalForm")," "),e(8),m(" ",l(77,107,"companySettings.logoManagement")," "),e(8),u(l(85,109,"companySettings.companyLogo")),e(3),u(l(88,111,"companySettings.logoDescription")),e(11),u(l(99,113,"companySettings.selectFile")),e(3),u(l(102,115,"companySettings.recommendedSize")),e(2),d("ngIf",s.selectedLogoFile),e(3),d("ngIf",s.logoPreview)("ngIfElse",g),e(7),m(" ",l(114,117,"companySettings.logoUrl")," "),e(4),d("title",D(l(118,119,"companySettings.copyUrl"))),e(4),u(l(122,121,"companySettings.logoUrlDescription")),e(7),m(" ",l(129,123,"companySettings.addressInformation")," "),e(6),m(" ",l(135,125,"companySettings.address")," "),e(4),x("is-invalid",s.isFieldInvalid("adresse")),e(),d("ngIf",s.hasError("adresse","required")),e(4),m(" ",l(144,127,"companySettings.country")," "),e(4),x("is-invalid",s.isFieldInvalid("pays")),e(2),u(l(150,129,"companySettings.selectOption")),e(2),d("ngForOf",s.paysOptions),e(),d("ngIf",s.hasError("pays","required")),e(4),m(" ",l(157,131,"companySettings.region")," "),e(4),x("is-invalid",s.isFieldInvalid("region")),e(2),u(l(163,133,"companySettings.selectOption")),e(2),d("ngForOf",s.regionOptions),e(),d("ngIf",s.hasError("region","required")),e(4),m(" ",l(170,135,"companySettings.postalBox")," "),e(6),m(" ",l(176,137,"companySettings.website")," "),e(8),m(" ",l(184,139,"companySettings.financialInformation")," "),e(6),m(" ",l(190,141,"companySettings.currency")," "),e(4),x("is-invalid",s.isFieldInvalid("devise")),e(2),u(l(196,143,"companySettings.selectOption")),e(2),d("ngForOf",s.deviseOptions),e(),d("ngIf",s.hasError("devise","required")),e(4),m(" ",l(203,145,"companySettings.mainCurrency")," "),e(4),x("is-invalid",s.isFieldInvalid("devisePrincipale")),e(2),u(l(209,147,"companySettings.selectOption")),e(2),d("ngForOf",s.deviseOptions),e(),d("ngIf",s.hasError("devisePrincipale","required")),e(4),m(" ",l(216,149,"companySettings.valuationMethod")," "),e(4),x("is-invalid",s.isFieldInvalid("methodeValorisation")),e(2),u(l(222,151,"companySettings.selectOption")),e(2),d("ngForOf",s.methodeValorisationOptions),e(),d("ngIf",s.hasError("methodeValorisation","required")),e(4),m(" ",l(229,153,"companySettings.currentFiscalYear")," "),e(4),x("is-invalid",s.isFieldInvalid("exerciceEnCours")),e(),d("ngIf",s.hasError("exerciceEnCours","required")),e(),d("ngIf",s.hasError("exerciceEnCours","min")||s.hasError("exerciceEnCours","max")),e(4),m(" ",l(239,155,"companySettings.capital")," "),e(2),x("is-invalid",s.hasError("capital","min")),e(),d("ngIf",s.hasError("capital","min")),e(4),m(" ",l(246,157,"companySettings.status")," "),e(5),m(" ",(a=s.companyForm.get("actif"))!=null&&a.value?l(251,159,"companySettings.active"):l(252,161,"companySettings.inactive")," "),e(4),d("disabled",s.isSaving),e(),u(l(256,163,"common.cancel")),e(2),d("disabled",s.companyForm.invalid||s.isSaving||!s.companyForm.dirty),e(),d("ngIf",!s.isSaving),e(),d("ngIf",s.isSaving)}}var ie=class i{constructor(n,a){this.fb=n;this.companyService=a;this.companyForm=this.createForm()}companyForm;isLoading=!1;isSaving=!1;isUploadingLogo=!1;isDeletingLogo=!1;errorMessage="";successMessage="";company=null;selectedLogoFile=null;logoPreview=null;methodeValorisationOptions=["FIFO","LIFO","MOYENNE"];deviseOptions=["USD","EUR","XAF","XOF","GBP"];paysOptions=["Cameroun","France","USA","Canada","Belgique"];regionOptions=["Centre","Littoral","Ouest","Nord","Sud"];ngOnInit(){this.loadCompany()}createForm(){return this.fb.group({nom:["",[f.required]],activite:["",[f.required]],adresse:["",[f.required]],boitePostal:[""],pays:["",[f.required]],region:["",[f.required]],telephone:["",[f.required]],nc:[""],rccm:[""],regimeFiscal:[""],devise:["",[f.required]],email:["",[f.required,f.email]],siteWeb:[""],logo:[""],favicon:[""],actif:[!0],methodeValorisation:["FIFO",[f.required]],devisePrincipale:["",[f.required]],exerciceEnCours:[new Date().getFullYear(),[f.required,f.min(2e3),f.max(2100)]],capital:[0,[f.min(0)]],formeJuridique:[""]})}loadCompany(){this.isLoading=!0,this.errorMessage="",this.companyService.getCurrentUserCompany().subscribe({next:n=>{this.company=n,this.companyForm.patchValue(n),this.updateLogoPreview(),this.isLoading=!1},error:n=>{this.errorMessage="Erreur lors du chargement des donn\xE9es de la soci\xE9t\xE9: "+(n.error?.message||n.message),this.isLoading=!1,console.error("Error loading company:",n)}})}onSubmit(){if(this.companyForm.invalid){this.markFormGroupTouched(this.companyForm);return}this.isSaving=!0,this.errorMessage="",this.successMessage="";let n=this.companyForm.value;this.companyService.updateCurrentUserCompany(n).subscribe({next:a=>{this.company=a,this.successMessage="Les modifications ont \xE9t\xE9 enregistr\xE9es avec succ\xE8s.",this.isSaving=!1,this.companyForm.markAsPristine()},error:a=>{this.errorMessage="Erreur lors de la mise \xE0 jour: "+(a.error?.message||a.message),this.isSaving=!1,console.error("Error updating company:",a)}})}onCancel(){this.company&&(this.companyForm.reset(this.company),this.companyForm.markAsPristine()),this.errorMessage="",this.successMessage="",this.selectedLogoFile=null,this.logoPreview=null,this.updateLogoPreview()}onLogoSelected(n){let a=n.target;if(a.files&&a.files.length>0){this.selectedLogoFile=a.files[0];let g=new FileReader;g.onload=()=>{this.logoPreview=g.result},g.readAsDataURL(this.selectedLogoFile)}}uploadLogo(){if(!this.selectedLogoFile){this.errorMessage="Veuillez s\xE9lectionner un fichier logo.";return}this.isUploadingLogo=!0,this.errorMessage="",this.successMessage="",this.companyService.uploadCurrentUserCompanyLogo(this.selectedLogoFile).subscribe({next:n=>{this.company=n,this.companyForm.patchValue({logo:n.logo}),this.successMessage="Logo t\xE9l\xE9charg\xE9 avec succ\xE8s.",this.isUploadingLogo=!1,this.selectedLogoFile=null,this.updateLogoPreview()},error:n=>{this.errorMessage="Erreur lors du t\xE9l\xE9chargement du logo: "+(n.error?.message||n.message),this.isUploadingLogo=!1,console.error("Error uploading logo:",n)}})}deleteLogo(){confirm("\xCAtes-vous s\xFBr de vouloir supprimer le logo ?")&&(this.isDeletingLogo=!0,this.errorMessage="",this.successMessage="",this.companyService.deleteCurrentUserCompanyLogo().subscribe({next:n=>{this.company=n,this.companyForm.patchValue({logo:""}),this.successMessage="Logo supprim\xE9 avec succ\xE8s.",this.isDeletingLogo=!1,this.updateLogoPreview()},error:n=>{this.errorMessage="Erreur lors de la suppression du logo: "+(n.error?.message||n.message),this.isDeletingLogo=!1,console.error("Error deleting logo:",n)}}))}updateLogoPreview(){this.company?.logo?this.logoPreview=this.company.logo:this.logoPreview=null}copyLogoUrl(){let n=this.companyForm.get("logo")?.value;n&&navigator.clipboard.writeText(n).then(()=>{this.successMessage="URL du logo copi\xE9e dans le presse-papier.",setTimeout(()=>{this.successMessage==="URL du logo copi\xE9e dans le presse-papier."&&(this.successMessage="")},3e3)}).catch(a=>{console.error("Failed to copy: ",a),this.errorMessage="\xC9chec de la copie de l'URL."})}markFormGroupTouched(n){Object.values(n.controls).forEach(a=>{a.markAsTouched(),a instanceof G&&this.markFormGroupTouched(a)})}hasError(n,a){let g=this.companyForm.get(n);return g?g.hasError(a)&&g.touched:!1}isFieldInvalid(n){let a=this.companyForm.get(n);return a?a.invalid&&a.touched:!1}static \u0275fac=function(a){return new(a||i)(I(Y),I(b))};static \u0275cmp=B({type:i,selectors:[["app-company-settings"]],decls:9,vars:7,consts:[["noLogoTemplate",""],[1,"mb-3","pb-2"],[1,"mb-3","pb-3","border-bottom"],[1,"fw-bold","mb-0"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[3,"ngSubmit","formGroup"],[1,"border-bottom","mb-3"],[1,"card-title-head"],[1,"fs-16","fw-semibold","mb-3","d-flex","align-items-center"],[1,"fs-16","me-2","p-1","rounded","bg-dark","text-white","d-inline-flex","align-items-center","justify-content-center"],[1,"isax","isax-info-circle"],[1,"row"],[1,"col-xl-6","col-lg-6","col-md-4"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","nom",1,"form-control"],["class","invalid-feedback d-block",4,"ngIf"],["type","email","formControlName","email",1,"form-control"],[1,"col-md-6"],["type","text","formControlName","telephone",1,"form-control"],["type","text","formControlName","activite",1,"form-control"],["type","text","formControlName","nc",1,"form-control"],["type","text","formControlName","rccm",1,"form-control"],["type","text","formControlName","regimeFiscal",1,"form-control"],["type","text","formControlName","formeJuridique",1,"form-control"],[1,"border-bottom","mb-3","pb-3"],[1,"isax","isax-image"],[1,"row","align-items-center","pb-3","mb-3"],[1,"col-xl-9"],[1,"row","gy-3","align-items-center"],[1,"col-lg-6"],[1,"logo-info"],[1,"fs-14","fw-medium","mb-1"],[1,"fs-12"],[1,"profile-pic-upload","mb-0","justify-content-lg-end"],[1,"new-employee-field"],[1,"mb-0"],[1,"image-upload","mb-1"],["type","file","accept",".jpg,.jpeg,.png,.svg,.gif","id","logoUpload",3,"change"],[1,"image-uploads"],[1,"ti","ti-upload","me-1"],["class","mt-2",4,"ngIf"],[1,"col-xl-3"],[1,"new-logo","ms-xl-auto","bg-light","border","text-center","p-3"],["class","logo-preview-container",4,"ngIf","ngIfElse"],[1,"col-md-12"],[1,"input-group"],["type","text","formControlName","logo","readonly","",1,"form-control"],["type","button",1,"btn","btn-outline-secondary",3,"click","title"],[1,"isax","isax-copy"],[1,"text-muted"],[1,"company-address","pb-2","mb-3","border-bottom"],[1,"fs-16","fw-bold","mb-3","d-flex","align-items-center"],[1,"isax","isax-map"],["type","text","formControlName","adresse",1,"form-control"],["formControlName","pays",1,"custom-mat-select","select"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","region",1,"custom-mat-select","select"],["type","text","formControlName","boitePostal",1,"form-control"],["type","text","formControlName","siteWeb",1,"form-control"],[1,"company-financial","pb-2","mb-3","border-bottom"],[1,"isax","isax-dollar-circle"],["formControlName","devise",1,"custom-mat-select","select"],["formControlName","devisePrincipale",1,"custom-mat-select","select"],["formControlName","methodeValorisation",1,"custom-mat-select","select"],["type","number","formControlName","exerciceEnCours",1,"form-control"],["type","number","formControlName","capital",1,"form-control"],[1,"form-check","form-switch","mt-2"],["type","checkbox","formControlName","actif","id","actifSwitch",1,"form-check-input"],["for","actifSwitch",1,"form-check-label"],[1,"d-flex","align-items-center","justify-content-between","settings-bottom-btn","mt-0"],["type","button",1,"btn","btn-outline-white","me-2",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"invalid-feedback","d-block"],[1,"alert","alert-info","py-2","mb-2"],[1,"isax","isax-document","me-1"],["type","button",1,"btn","btn-primary","btn-sm","me-2",3,"click","disabled"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"logo-preview-container"],["alt","Logo de la soci\xE9t\xE9",1,"img-fluid",2,"max-height","100px",3,"src"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"isax","isax-trash","me-1"],[1,"text-muted","py-4"],[1,"isax","isax-image","fs-1"],[1,"mt-2","mb-0","fs-12"],[3,"value"]],template:function(a,g){a&1&&(o(0,"div",1)(1,"div",2)(2,"h6",3),r(3),p(4,"translate"),t()(),v(5,re,7,3,"div",4)(6,pe,2,1,"div",5)(7,le,2,1,"div",6)(8,Pe,260,165,"form",7),t()),a&2&&(e(3),u(l(4,5,"companySettings.title")),e(2),d("ngIf",g.isLoading),e(),d("ngIf",g.errorMessage&&!g.isLoading),e(),d("ngIf",g.successMessage),e(),d("ngIf",!g.isLoading))},dependencies:[q,U,O,ee,Z,K,te,Q,J,$,k,A,N,V,j,z,H,W],encapsulation:2})};export{ie as CompanySettingsComponent};
