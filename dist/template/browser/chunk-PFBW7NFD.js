import{a as oe}from"./chunk-H5RQM42I.js";import{D as ne,b as U,d as z,h as G,i as H,k as Y,m as J,n as K,o as Q,s as X,t as Z,u as $,v as ee,w as te,x as ie}from"./chunk-ONBUWNZZ.js";import{b as T,c as F,h as B}from"./chunk-CPHVHMG6.js";import"./chunk-VLYMLFWW.js";import"./chunk-5IXW6HGI.js";import"./chunk-DIDBO66C.js";import{c as j}from"./chunk-DXRJN4NQ.js";import{k as W,l as O,y as q}from"./chunk-AKUYEWL4.js";import{Ab as v,Ac as D,Fc as E,Gc as _,Hc as S,Sb as c,Tb as n,Ub as o,Vb as g,ac as C,db as N,gc as f,ia as L,ib as r,ic as h,ma as A,na as x,sa as u,ta as p,tc as w,uc as M,vb as P,wc as V,xc as s,yc as y,zc as b}from"./chunk-ODQYRIBQ.js";import{a as k,b as R}from"./chunk-EQDQRRRY.js";var I=class a{constructor(e,t){this.http=e;this.authService=t}baseUrl=oe.api+"notification/email-config";getEmailConfigs(e=0,t=10,i="id,desc"){let l=this.authService.user;if(!l||!l.societeId)throw new Error("User not authenticated or company ID not found");let d={societeId:l.societeId.toString(),page:e.toString(),size:t.toString(),sort:i};return this.http.get(this.baseUrl,{params:d})}getEmailConfig(e){return this.http.get(`${this.baseUrl}/${e}`)}createEmailConfig(e){let t=this.authService.user;if(!t||!t.societeId)throw new Error("User not authenticated or company ID not found");let i=R(k({},e),{societeId:t.societeId});return this.http.post(this.baseUrl,i)}updateEmailConfig(e,t){return this.http.put(`${this.baseUrl}/${e}`,t)}deleteEmailConfig(e){return this.http.delete(`${this.baseUrl}/${e}`)}toggleEmailConfigStatus(e,t){return this.http.patch(`${this.baseUrl}/${e}/active`,{isActive:t})}sendTestEmail(e){return this.http.post(`${this.baseUrl}/${e.configId}/test`,e)}sendTestEmailWithConfig(e,t){return this.sendTestEmail({emailAddress:t,configId:e})}getSmtpSecureOptions(){return[{value:"SSL",label:"SSL"},{value:"TLS",label:"TLS"},{value:"NONE",label:"Aucun"}]}getAuthTypeOptions(){return[{value:"PLAIN",label:"PLAIN"},{value:"LOGIN",label:"LOGIN"},{value:"CRAM-MD5",label:"CRAM-MD5"}]}validateEmailConfig(e){let t=[];return(!e.host||e.host.trim()==="")&&t.push("Le serveur SMTP est requis"),(!e.port||e.port<=0||e.port>65535)&&t.push("Le port SMTP doit \xEAtre entre 1 et 65535"),(!e.username||e.username.trim()==="")&&t.push("Le nom d'utilisateur est requis"),"passwordTxt"in e&&(!e.passwordTxt||e.passwordTxt.trim()==="")&&t.push("Le mot de passe est requis"),!e.fromAdress||e.fromAdress.trim()===""?t.push("L'adresse email d'exp\xE9dition est requise"):this.isValidEmail(e.fromAdress)||t.push("L'adresse email d'exp\xE9dition n'est pas valide"),(!e.fromName||e.fromName.trim()==="")&&t.push("Le nom d'exp\xE9diteur est requis"),t}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}static \u0275fac=function(t){return new(t||a)(A(j),A(T))};static \u0275prov=L({token:a,factory:a.\u0275fac,providedIn:"root"})};function ae(a,e){if(a&1){let t=C();n(0,"div",57),g(1,"i",58),s(2),n(3,"button",59),f("click",function(){u(t);let l=h();return p(l.error=null)}),o()()}if(a&2){let t=h();r(2),b("",t.error," ")}}function le(a,e){if(a&1){let t=C();n(0,"div",60),g(1,"i",61),s(2),n(3,"button",59),f("click",function(){u(t);let l=h();return p(l.success=null)}),o()()}if(a&2){let t=h();r(2),b("",t.success," ")}}function me(a,e){a&1&&(n(0,"div",62)(1,"div",63)(2,"span",64),s(3,"Chargement..."),o()(),n(4,"p",65),s(5,"Chargement des configurations email..."),o()())}function de(a,e){if(a&1){let t=C();n(0,"div",62)(1,"div",22),g(2,"img",67),o(),n(3,"h6",68),s(4,"Aucune configuration email"),o(),n(5,"p",69),s(6,"Commencez par ajouter une configuration email pour envoyer des emails depuis votre application."),o(),n(7,"button",5),f("click",function(){u(t);let l=h(2);return p(l.openCreateModal())}),g(8,"i",6),s(9,"Ajouter une configuration "),o()()}}function ce(a,e){if(a&1){let t=C();n(0,"div",71)(1,"div",72)(2,"div",73)(3,"div",74)(4,"div",75)(5,"span",76),g(6,"img",77),o(),n(7,"div")(8,"p",78),s(9),o(),n(10,"small",26),s(11),o()()(),n(12,"span"),g(13,"span"),s(14),o()(),n(15,"p",79)(16,"strong"),s(17,"Exp\xE9diteur :"),o(),s(18),o(),n(19,"p",79)(20,"strong"),s(21,"Authentification :"),o(),s(22),o(),n(23,"p",80)(24,"strong"),s(25,"Cr\xE9\xE9 le :"),o(),s(26),o()(),n(27,"div",81)(28,"div",82)(29,"div",82)(30,"button",83),f("click",function(){let l=u(t).$implicit,d=h(3);return p(d.openDeleteModal(l))}),g(31,"i",84),o(),n(32,"button",85),f("click",function(){let l=u(t).$implicit,d=h(3);return p(d.openEditModal(l))}),g(33,"i",86),o(),n(34,"button",87),f("click",function(){let l=u(t).$implicit,d=h(3);return p(d.openTestModal(l))}),g(35,"i",88),o()(),n(36,"div",89)(37,"input",90),f("change",function(l){let d=u(t).$implicit,m=h(3);return p(m.toggleConfigStatus(d,l))}),o()()()()()()}if(a&2){let t=e.$implicit,i=h(3);r(6),c("src",i.getConfigIcon(t),N),r(3),y(i.getConfigType(t)),r(2),D("",t.host,":",t.port),r(),V("badge "+i.getStatusBadge(t).class+" d-flex align-items-center"),r(),V("badge-dot "+(t.isActive?"bg-success":"bg-dark")+" me-1"),r(),b(" ",i.getStatusBadge(t).text," "),r(4),D(" ",t.fromName," <",t.fromAdress,"> "),r(4),b(" ",t.authType," "),r(4),b(" ",i.formatDate(t.dateCreation)," "),r(11),c("checked",t.isActive)}}function ue(a,e){if(a&1&&(n(0,"div",20),v(1,ce,38,14,"div",70),o()),a&2){let t=h(2);r(),c("ngForOf",t.emailConfigs)}}function pe(a,e){if(a&1&&(n(0,"div",4),v(1,de,10,0,"div",9)(2,ue,2,1,"div",66),o()),a&2){let t=h();r(),c("ngIf",t.emailConfigs.length===0),r(),c("ngIf",t.emailConfigs.length>0)}}function ge(a,e){if(a&1&&(n(0,"option",91),s(1),o()),a&2){let t=e.$implicit;c("value",t.value),r(),y(t.label)}}function fe(a,e){if(a&1&&(n(0,"option",91),s(1),o()),a&2){let t=e.$implicit;c("value",t.value),r(),y(t.label)}}function he(a,e){a&1&&(n(0,"small",26),s(1,"Laissez vide pour ne pas modifier"),o())}function ve(a,e){a&1&&g(0,"span",92)}function Ee(a,e){if(a&1&&(n(0,"option",91),s(1),o()),a&2){let t=e.$implicit,i=h(2);c("value",t.id),r(),D(" ",i.getConfigType(t)," (",t.host,") ")}}function _e(a,e){if(a&1){let t=C();n(0,"div",36)(1,"div",22)(2,"label",23),s(3,"Configuration \xE0 tester"),o(),n(4,"select",93),S("ngModelChange",function(l){u(t);let d=h();return _(d.testEmailData.configId,l)||(d.testEmailData.configId=l),p(l)}),n(5,"option",91),s(6,"Configuration par d\xE9faut"),o(),v(7,Ee,2,3,"option",29),o()()()}if(a&2){let t=h();r(4),E("ngModel",t.testEmailData.configId),r(),c("value",void 0),r(2),c("ngForOf",t.emailConfigs)}}function Se(a,e){a&1&&g(0,"span",92)}function Ce(a,e){if(a&1&&(n(0,"p",22),s(1," \xCAtes-vous s\xFBr de vouloir supprimer la configuration "),n(2,"strong"),s(3),o(),s(4," ? "),o()),a&2){let t=h();r(3),y(t.configToDelete.host)}}function be(a,e){a&1&&g(0,"span",92)}var se=class a{emailConfigService=x(I);authService=x(T);toasterService=x(B);loading=!1;saving=!1;testing=!1;error=null;success=null;emailConfigs=[];currentConfig=null;formData={host:"",port:587,auth:1,authType:"PLAIN",username:"",passwordTxt:"",fromAdress:"",fromName:"",societeId:0,smtpSecure:"TLS",isActive:!0,testEmail:""};testEmailData={emailAddress:"",configId:void 0};smtpSecureOptions=this.emailConfigService.getSmtpSecureOptions();authTypeOptions=this.emailConfigService.getAuthTypeOptions();routes=F;showConfigModal=!1;showTestModal=!1;showDeleteModal=!1;configToDelete=null;isEditMode=!1;ngOnInit(){this.loadEmailConfigs(),this.initializeForm()}loadEmailConfigs(){this.loading=!0,this.error=null,this.emailConfigService.getEmailConfigs(0,100,"id,desc").subscribe({next:e=>{this.emailConfigs=e.content||[],this.loading=!1},error:e=>{console.error("Erreur lors du chargement des configurations email:",e),this.error=e.message||"Erreur lors du chargement des configurations email",this.loading=!1}})}initializeForm(){let e=this.authService.user;e&&(this.formData.societeId=e.societeId||0,this.formData.fromName=e.nom||e.nomPrenom||"",this.formData.fromAdress=e.email||"",this.formData.username=e.email||"")}openCreateModal(){this.isEditMode=!1;let e=this.authService.user;this.formData={host:"",port:587,auth:1,authType:"PLAIN",username:e?.email||"",passwordTxt:"",fromAdress:e?.email||"",fromName:e?.nom||e?.nomPrenom||"",societeId:e?.societeId||0,smtpSecure:"TLS",isActive:!0,testEmail:""},this.showConfigModal=!0}openEditModal(e){this.isEditMode=!0,this.currentConfig=e,this.formData={host:e.host,port:e.port,auth:e.auth,authType:e.authType,username:e.username,passwordTxt:"",fromAdress:e.fromAdress,fromName:e.fromName,societeId:e.societeId,smtpSecure:e.smtpSecure,isActive:e.isActive,testEmail:e.testEmail||""},this.showConfigModal=!0}openDeleteModal(e){this.configToDelete=e,this.showDeleteModal=!0}openTestModal(e){this.testEmailData={emailAddress:"",configId:e?.id},this.showTestModal=!0}closeModals(){this.showConfigModal=!1,this.showTestModal=!1,this.showDeleteModal=!1,this.configToDelete=null,this.currentConfig=null,setTimeout(()=>{this.error=null,this.success=null},5e3)}submitConfig(){let e=this.emailConfigService.validateEmailConfig(this.formData);if(e.length>0){this.error=e.join(", ");return}if(this.saving=!0,this.error=null,this.success=null,this.isEditMode&&this.currentConfig){let t={host:this.formData.host,port:this.formData.port,auth:this.formData.auth,authType:this.formData.authType,username:this.formData.username,passwordTxt:this.formData.passwordTxt||void 0,fromAdress:this.formData.fromAdress,fromName:this.formData.fromName,smtpSecure:this.formData.smtpSecure,isActive:this.formData.isActive,testEmail:this.formData.testEmail||void 0};this.emailConfigService.updateEmailConfig(this.currentConfig.id,t).subscribe({next:i=>{this.success="Configuration mise \xE0 jour avec succ\xE8s",this.loadEmailConfigs(),this.closeModals(),this.saving=!1,this.toasterService.typeSuccess(this.success,"Mis a jour config")},error:i=>{console.error("Erreur lors de la mise \xE0 jour:",i),this.error=i.message||"Erreur lors de la mise \xE0 jour",this.saving=!1,this.closeModals(),this.toasterService.typeError(this.error,"Mise a jour config")}})}else this.emailConfigService.createEmailConfig(this.formData).subscribe({next:t=>{this.success="Configuration cr\xE9\xE9e avec succ\xE8s",this.loadEmailConfigs(),this.closeModals(),this.saving=!1,this.toasterService.typeSuccess(this.success,"Creation Config Email")},error:t=>{console.error("Erreur lors de la cr\xE9ation:",t),this.error=t.message||"Erreur lors de la cr\xE9ation",this.saving=!1,this.closeModals(),this.toasterService.typeError(this.error,"Creation Config Email")}})}deleteConfig(){this.configToDelete&&(this.saving=!0,this.emailConfigService.deleteEmailConfig(this.configToDelete.id).subscribe({next:()=>{this.success="Configuration supprim\xE9e avec succ\xE8s",this.loadEmailConfigs(),this.closeModals(),this.saving=!1,this.toasterService.typeSuccess(this.success,"Suppression Config")},error:e=>{this.error=e.message||"Erreur lors de la suppression",this.saving=!1,this.toasterService.typeError(this.error,"Suppression Config")}}))}sendTestEmail(){if(!this.testEmailData.emailAddress){this.error="Veuillez saisir une adresse email";return}this.testing=!0,this.error=null,this.success=null,this.emailConfigService.sendTestEmail(this.testEmailData).subscribe({next:e=>{this.success=e.message||"Email de test envoy\xE9 avec succ\xE8s",this.testing=!1,this.toasterService.typeSuccess(this.success,"Email Test"),setTimeout(()=>{this.closeModals()},2e3)},error:e=>{console.error("Erreur lors de l'envoi de l'email de test:",e),this.error=e.message||"Erreur lors de l'envoi de l'email de test",this.testing=!1,this.toasterService.typeError(this.error,"Email Test")}})}toggleConfigStatus(e,t){t.stopPropagation();let i=t.target,l=i.checked;this.emailConfigService.toggleEmailConfigStatus(e.id,l).subscribe({next:d=>{e.isActive=d.isActive,this.success=`Configuration ${l?"activ\xE9e":"d\xE9sactiv\xE9e"} avec succ\xE8s`,this.toasterService.typeSuccess(this.success,"Status Config")},error:d=>{console.error("Erreur lors du changement de statut:",d),this.error=d.message||"Erreur lors du changement de statut",i.checked=!l,this.toasterService.typeError(this.error,"Status config")}})}formatDate(e){return new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}getStatusBadge(e){return e.isActive?{class:"badge-soft-success",text:"Connect\xE9"}:{class:"badge-soft-primary",text:"Non connect\xE9"}}getConfigIcon(e){let t=e.host.toLowerCase();return t.includes("gmail")||t.includes("google")?"assets/img/settings/gmail.svg":t.includes("outlook")||t.includes("office365")||t.includes("microsoft")?"assets/img/settings/outlook.svg":t.includes("yahoo")?"assets/img/settings/yahoo.svg":t.includes("sendgrid")?"assets/img/settings/sendgrid.svg":"assets/img/settings/smtp.svg"}getConfigType(e){let t=e.host.toLowerCase();return t.includes("gmail")||t.includes("google")?"Gmail":t.includes("outlook")||t.includes("office365")||t.includes("microsoft")?"Outlook/Office 365":t.includes("yahoo")?"Yahoo Mail":t.includes("sendgrid")?"SendGrid":"SMTP Personnalis\xE9"}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=P({type:a,selectors:[["app-email-settings"]],decls:151,vars:54,consts:[["configForm","ngForm"],["testForm","ngForm"],[1,""],[1,"pb-3","d-flex","align-items-center","justify-content-between","border-bottom","mb-3"],[1,"mb-0"],["type","button",1,"btn","btn-primary",3,"click"],[1,"isax","isax-add","me-1"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","mb-0",4,"ngIf"],["tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close","btn-close-modal","custom-btn-close",3,"click"],[1,"fa-solid","fa-x"],[3,"ngSubmit"],[1,"modal-body"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],["type","text","name","host","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-muted"],["type","number","name","port","required","","min","1","max","65535",1,"form-control",3,"ngModelChange","ngModel"],["name","smtpSecure","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","authType","required","",1,"form-select",3,"ngModelChange","ngModel"],["type","text","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","passwordTxt",1,"form-control",3,"ngModelChange","ngModel","required"],["class","text-muted",4,"ngIf"],["type","email","name","fromAdress","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","fromName","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-12"],["type","email","name","testEmail",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check","form-switch","mb-3"],["type","checkbox","role","switch","name","isActive","id","isActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","isActive",1,"form-check-label"],[1,"modal-footer","d-flex","align-items-center","justify-content-between","gap-1"],["type","button",1,"btn","btn-outline-white",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"modal-dialog","modal-dialog-centered"],["type","email","name","emailAddress","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","col-md-12",4,"ngIf"],[1,"modal-dialog","modal-dialog-centered","modal-sm"],[1,"modal-body","text-center"],["src","assets/img/icons/delete.svg","alt","Suppression"],[1,"mb-1"],["class","mb-3",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-outline-white","me-3",3,"click","disabled"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"modal-backdrop","fade"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"isax","isax-danger","me-2"],["type","button",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"isax","isax-tick-circle","me-2"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],["class","row",4,"ngIf"],["src","assets/img/icons/email.svg","alt","Aucune configuration",1,"img-fluid",2,"max-width","100px"],[1,"mb-2"],[1,"text-muted","mb-4"],["class","col-md-6 d-flex",4,"ngFor","ngForOf"],[1,"col-md-6","d-flex"],[1,"card","flex-fill"],[1,"card-body"],[1,"d-flex","align-items-center","justify-content-between","mb-3","flex-wrap","gap-2"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-lg","bg-light","me-2","p-2","flex-shrink-0"],["alt","img",1,"img-fluid",3,"src"],[1,"text-gray-9","fw-medium","mb-0"],[1,"fs-13","mb-2"],[1,"fs-13","mb-0"],[1,"card-footer","bg-light"],[1,"d-flex","justify-content-between","align-items-center"],["type","button","title","Supprimer",1,"btn","btn-sm","btn-dark","rounded-2","d-inline-flex","align-items-center","justify-content-center","p-1","me-2",3,"click"],[1,"isax","isax-trash","fs-14"],["type","button","title","Modifier",1,"btn","btn-sm","btn-dark","rounded-2","d-inline-flex","align-items-center","justify-content-center","p-1","me-2",3,"click"],[1,"isax","isax-setting-2","fs-14"],["type","button","title","Tester",1,"btn","btn-sm","btn-dark","rounded-2","d-inline-flex","align-items-center","justify-content-center","p-1","me-2",3,"click"],[1,"isax","isax-send-25","fs-14"],[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input","ms-0",3,"change","checked"],[3,"value"],[1,"spinner-border","spinner-border-sm","me-1"],["name","configId",1,"form-select",3,"ngModelChange","ngModel"]],template:function(t,i){if(t&1){let l=C();n(0,"div",2)(1,"div")(2,"div",3)(3,"h6",4),s(4,"Param\xE8tres Email"),o(),n(5,"button",5),f("click",function(){return u(l),p(i.openCreateModal())}),g(6,"i",6),s(7,"Ajouter une configuration "),o()(),v(8,ae,4,1,"div",7)(9,le,4,1,"div",8)(10,me,6,0,"div",9)(11,pe,3,2,"div",10),o()(),n(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"h4",15),s(17),o(),n(18,"button",16),f("click",function(){return u(l),p(i.closeModals())}),g(19,"i",17),o()(),n(20,"form",18,0),f("ngSubmit",function(){return u(l),p(i.submitConfig())}),n(22,"div",19)(23,"div",20)(24,"div",21)(25,"div",22)(26,"label",23),s(27,"Serveur SMTP "),n(28,"span",24),s(29,"*"),o()(),n(30,"input",25),S("ngModelChange",function(m){return u(l),_(i.formData.host,m)||(i.formData.host=m),p(m)}),o(),n(31,"small",26),s(32,"Ex: smtp.gmail.com, smtp.office365.com"),o()()(),n(33,"div",21)(34,"div",22)(35,"label",23),s(36,"Port "),n(37,"span",24),s(38,"*"),o()(),n(39,"input",27),S("ngModelChange",function(m){return u(l),_(i.formData.port,m)||(i.formData.port=m),p(m)}),o(),n(40,"small",26),s(41,"Ex: 587 (TLS), 465 (SSL), 25 (standard)"),o()()(),n(42,"div",21)(43,"div",22)(44,"label",23),s(45,"S\xE9curit\xE9 SMTP "),n(46,"span",24),s(47,"*"),o()(),n(48,"select",28),S("ngModelChange",function(m){return u(l),_(i.formData.smtpSecure,m)||(i.formData.smtpSecure=m),p(m)}),v(49,ge,2,2,"option",29),o()()(),n(50,"div",21)(51,"div",22)(52,"label",23),s(53,"Type d'authentification "),n(54,"span",24),s(55,"*"),o()(),n(56,"select",30),S("ngModelChange",function(m){return u(l),_(i.formData.authType,m)||(i.formData.authType=m),p(m)}),v(57,fe,2,2,"option",29),o()()(),n(58,"div",21)(59,"div",22)(60,"label",23),s(61,"Nom d'utilisateur "),n(62,"span",24),s(63,"*"),o()(),n(64,"input",31),S("ngModelChange",function(m){return u(l),_(i.formData.username,m)||(i.formData.username=m),p(m)}),o(),n(65,"small",26),s(66,"G\xE9n\xE9ralement votre adresse email"),o()()(),n(67,"div",21)(68,"div",22)(69,"label",23),s(70,"Mot de passe "),n(71,"span",24),s(72,"*"),o()(),n(73,"input",32),S("ngModelChange",function(m){return u(l),_(i.formData.passwordTxt,m)||(i.formData.passwordTxt=m),p(m)}),o(),v(74,he,2,0,"small",33),o()(),n(75,"div",21)(76,"div",22)(77,"label",23),s(78,"Adresse d'exp\xE9dition "),n(79,"span",24),s(80,"*"),o()(),n(81,"input",34),S("ngModelChange",function(m){return u(l),_(i.formData.fromAdress,m)||(i.formData.fromAdress=m),p(m)}),o()()(),n(82,"div",21)(83,"div",22)(84,"label",23),s(85,"Nom d'exp\xE9diteur "),n(86,"span",24),s(87,"*"),o()(),n(88,"input",35),S("ngModelChange",function(m){return u(l),_(i.formData.fromName,m)||(i.formData.fromName=m),p(m)}),o()()(),n(89,"div",36)(90,"div",22)(91,"label",23),s(92,"Email de test"),o(),n(93,"input",37),S("ngModelChange",function(m){return u(l),_(i.formData.testEmail,m)||(i.formData.testEmail=m),p(m)}),o(),n(94,"small",26),s(95,"Adresse email pour les tests de configuration"),o()()(),n(96,"div",36)(97,"div",38)(98,"input",39),S("ngModelChange",function(m){return u(l),_(i.formData.isActive,m)||(i.formData.isActive=m),p(m)}),o(),n(99,"label",40),s(100,"Configuration active"),o()()()()(),n(101,"div",41)(102,"button",42),f("click",function(){return u(l),p(i.closeModals())}),s(103,"Annuler"),o(),n(104,"button",43),v(105,ve,1,0,"span",44),s(106),o()()()()()(),n(107,"div",11)(108,"div",45)(109,"div",13)(110,"div",14)(111,"h4",15),s(112,"Test d'envoi d'email"),o(),n(113,"button",16),f("click",function(){return u(l),p(i.closeModals())}),g(114,"i",17),o()(),n(115,"form",18,1),f("ngSubmit",function(){return u(l),p(i.sendTestEmail())}),n(117,"div",19)(118,"div",20)(119,"div",36)(120,"div",22)(121,"label",23),s(122,"Adresse email de test "),n(123,"span",24),s(124,"*"),o()(),n(125,"input",46),S("ngModelChange",function(m){return u(l),_(i.testEmailData.emailAddress,m)||(i.testEmailData.emailAddress=m),p(m)}),o(),n(126,"small",26),s(127,"L'email de test sera envoy\xE9 \xE0 cette adresse"),o()()(),v(128,_e,8,3,"div",47),o()(),n(129,"div",41)(130,"button",42),f("click",function(){return u(l),p(i.closeModals())}),s(131,"Annuler"),o(),n(132,"button",43),v(133,Se,1,0,"span",44),s(134," Envoyer le test "),o()()()()()(),n(135,"div",11)(136,"div",48)(137,"div",13)(138,"div",49)(139,"div",22),g(140,"img",50),o(),n(141,"h6",51),s(142,"Confirmer la suppression"),o(),v(143,Ce,5,1,"p",52),n(144,"div",53)(145,"button",54),f("click",function(){return u(l),p(i.closeModals())}),s(146,"Annuler"),o(),n(147,"button",55),f("click",function(){return u(l),p(i.deleteConfig())}),v(148,be,1,0,"span",44),s(149," Supprimer "),o()()()()()(),g(150,"div",56)}t&2&&(r(8),c("ngIf",i.error),r(),c("ngIf",i.success),r(),c("ngIf",i.loading),r(),c("ngIf",!i.loading),r(),w("display",i.showConfigModal?"block":"none"),M("show",i.showConfigModal)("d-block",i.showConfigModal),r(5),y(i.isEditMode?"Modifier la configuration":"Nouvelle configuration"),r(13),E("ngModel",i.formData.host),r(9),E("ngModel",i.formData.port),r(9),E("ngModel",i.formData.smtpSecure),r(),c("ngForOf",i.smtpSecureOptions),r(7),E("ngModel",i.formData.authType),r(),c("ngForOf",i.authTypeOptions),r(7),E("ngModel",i.formData.username),r(9),E("ngModel",i.formData.passwordTxt),c("required",!i.isEditMode),r(),c("ngIf",i.isEditMode),r(7),E("ngModel",i.formData.fromAdress),r(7),E("ngModel",i.formData.fromName),r(5),E("ngModel",i.formData.testEmail),r(5),E("ngModel",i.formData.isActive),r(4),c("disabled",i.saving),r(2),c("disabled",i.saving),r(),c("ngIf",i.saving),r(),b(" ",i.isEditMode?"Mettre \xE0 jour":"Cr\xE9er"," "),r(),w("display",i.showTestModal?"block":"none"),M("show",i.showTestModal)("d-block",i.showTestModal),r(18),E("ngModel",i.testEmailData.emailAddress),r(3),c("ngIf",i.emailConfigs.length>1),r(2),c("disabled",i.testing),r(2),c("disabled",i.testing),r(),c("ngIf",i.testing),r(2),w("display",i.showDeleteModal?"block":"none"),M("show",i.showDeleteModal)("d-block",i.showDeleteModal),r(8),c("ngIf",i.configToDelete),r(2),c("disabled",i.saving),r(2),c("disabled",i.saving),r(),c("ngIf",i.saving),r(2),w("display",i.showConfigModal||i.showTestModal||i.showDeleteModal?"block":"none"),M("show",i.showConfigModal||i.showTestModal||i.showDeleteModal))},dependencies:[q,W,O,ne,K,Z,$,z,Q,U,X,G,H,ie,te,ee,J,Y],encapsulation:2})};export{se as EmailSettingsComponent};
