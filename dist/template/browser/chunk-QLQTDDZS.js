import{a as Q}from"./chunk-H5RQM42I.js";import{D as J,d as j,h as B,m as K,s as H,t as G,u as Y}from"./chunk-ONBUWNZZ.js";import{b as N,h as $}from"./chunk-CPHVHMG6.js";import"./chunk-VLYMLFWW.js";import{f as z,i as q}from"./chunk-5IXW6HGI.js";import"./chunk-DIDBO66C.js";import{c as W}from"./chunk-DXRJN4NQ.js";import{j as R,k as L,l as V,y as U}from"./chunk-AKUYEWL4.js";import{Ab as _,Bc as D,Fc as y,Gc as S,Hc as E,Sb as d,Tb as n,Ub as o,Vb as m,ac as h,gc as p,ia as A,ib as a,ic as u,na as M,sa as f,ta as b,tc as P,uc as C,vb as F,wc as O,xc as r,yc as g,zc as x}from"./chunk-ODQYRIBQ.js";import{a as w,b as I}from"./chunk-EQDQRRRY.js";var k=class l{baseUrl=Q.api+"notification/notifications";authService=M(N);http=M(W);getNotifications(e={}){let t=this.authService.user;if(!t||!t.id)throw new Error("User not authenticated");let i={destinataireId:t.id.toString(),page:e.page?.toString()||"0",size:e.size?.toString()||"20",sort:e.sort||"nsDateCreation,desc"};return e.statut&&(i.statut=e.statut),e.canal&&(i.canal=e.canal),e.type&&(i.type=e.type),e.priorite&&(i.priorite=e.priorite),e.dateDebut&&(i.dateDebut=e.dateDebut),e.dateFin&&(i.dateFin=e.dateFin),this.http.get(this.baseUrl,{params:i})}getNotification(e){return this.http.get(`${this.baseUrl}/${e}`)}markAsRead(e){return this.http.patch(`${this.baseUrl}/${e}/read`,{})}markMultipleAsRead(e){return this.http.patch(`${this.baseUrl}/batch-read`,{ids:e})}markAllAsRead(){let e=this.authService.user;if(!e||!e.id)throw new Error("User not authenticated");return this.http.patch(`${this.baseUrl}/mark-all-read`,{destinataireId:e.id})}deleteNotification(e){return this.http.delete(`${this.baseUrl}/${e}`)}deleteMultipleNotifications(e){return this.http.post(`${this.baseUrl}/batch-delete`,{ids:e})}getNotificationStats(){let e=this.authService.user;if(!e||!e.id)throw new Error("User not authenticated");return this.http.get(`${this.baseUrl}/stats`,{params:{destinataireId:e.id.toString()}})}getUnreadCount(){let e=this.authService.user;if(!e||!e.id)throw new Error("User not authenticated");return this.http.get(`${this.baseUrl}/unread-count`,{params:{destinataireId:e.id.toString()}})}getNotificationTypeOptions(){return[{value:"NOUVEAU_TICKET",label:"Nouveau ticket"},{value:"TICKET_MODIFIE",label:"Ticket modifi\xE9"},{value:"TICKET_RESOLU",label:"Ticket r\xE9solu"},{value:"NOUVELLE_PLAINTE",label:"Nouvelle plainte"},{value:"PLAINTE_MODIFIEE",label:"Plainte modifi\xE9e"},{value:"PLAINTE_RESOLUE",label:"Plainte r\xE9solue"},{value:"NOUVEAU_MESSAGE",label:"Nouveau message"},{value:"RAPPEL",label:"Rappel"},{value:"ALERTE",label:"Alerte"},{value:"AUTRE",label:"Autre"}]}getPriorityOptions(){return[{value:"INFO",label:"Information",color:"primary"},{value:"WARNING",label:"Avertissement",color:"warning"},{value:"ERROR",label:"Erreur",color:"danger"},{value:"CRITICAL",label:"Critique",color:"dark"}]}getChannelOptions(){return[{value:"EMAIL",label:"Email",icon:"isax isax-sms"},{value:"SMS",label:"SMS",icon:"isax isax-message"},{value:"NOTIFICATION_INTERNE",label:"Notification interne",icon:"isax isax-notification"},{value:"WHATSAPP",label:"WhatsApp",icon:"isax isax-whatsapp"}]}getStatusOptions(){return[{value:"EN_ATTENTE",label:"En attente",badgeClass:"badge-soft-warning"},{value:"ENVOYE",label:"Envoy\xE9",badgeClass:"badge-soft-info"},{value:"DELIVRE",label:"D\xE9livr\xE9",badgeClass:"badge-soft-primary"},{value:"LU",label:"Lu",badgeClass:"badge-soft-success"},{value:"ECHEC",label:"\xC9chec",badgeClass:"badge-soft-danger"}]}formatDate(e){let t=new Date(e),s=new Date().getTime()-t.getTime(),c=Math.floor(s/6e4),v=Math.floor(s/36e5),T=Math.floor(s/864e5);return c<1?"\xC0 l'instant":c<60?`Il y a ${c} min`:v<24?`Il y a ${v} h`:T<7?`Il y a ${T} j`:t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}getNotificationIcon(e){return{NOUVEAU_TICKET:"isax isax-ticket",TICKET_MODIFIE:"isax isax-edit",TICKET_RESOLU:"isax isax-tick-circle",NOUVELLE_PLAINTE:"isax isax-danger",PLAINTE_MODIFIEE:"isax isax-edit-2",PLAINTE_RESOLUE:"isax isax-tick-circle",NOUVEAU_MESSAGE:"isax isax-message",RAPPEL:"isax isax-calendar",ALERTE:"isax isax-notification",AUTRE:"isax isax-info-circle"}[e]||"isax isax-info-circle"}getPriorityColor(e){return{INFO:"primary",WARNING:"warning",ERROR:"danger",CRITICAL:"dark"}[e]||"primary"}isRecentNotification(e){let t=new Date(e);return(new Date().getTime()-t.getTime())/36e5<24}extractActionLink(e){if(e.plainteId&&e.plainteNumero)return`/complaints/${e.plainteId}`;switch(e.nsType){case"NOUVEAU_TICKET":case"TICKET_MODIFIE":case"TICKET_RESOLU":return"/tickets";case"NOUVELLE_PLAINTE":case"PLAINTE_MODIFIEE":case"PLAINTE_RESOLUE":return"/complaints";case"NOUVEAU_MESSAGE":return"/messages";default:return null}}static \u0275fac=function(t){return new(t||l)};static \u0275prov=A({token:l,factory:l.\u0275fac,providedIn:"root"})};function tt(l,e){if(l&1&&(n(0,"div",43)(1,"div",44)(2,"div",45)(3,"div",46)(4,"div",47)(5,"div",48),m(6,"i",49),o(),n(7,"div")(8,"p",50),r(9,"Total"),o(),n(10,"h4",2),r(11),o()()()()()(),n(12,"div",44)(13,"div",45)(14,"div",46)(15,"div",47)(16,"div",51),m(17,"i",52),o(),n(18,"div")(19,"p",50),r(20,"Non lues"),o(),n(21,"h4",2),r(22),o()()()()()(),n(23,"div",44)(24,"div",45)(25,"div",46)(26,"div",47)(27,"div",53),m(28,"i",54),o(),n(29,"div")(30,"p",50),r(31,"Lues"),o(),n(32,"h4",2),r(33),o()()()()()(),n(34,"div",44)(35,"div",45)(36,"div",46)(37,"div",47)(38,"div",55),m(39,"i",56),o(),n(40,"div")(41,"p",50),r(42,"\xC9checs"),o(),n(43,"h4",2),r(44),o()()()()()()()),l&2){let t=u();a(11),g(t.stats.total||0),a(11),g(t.stats.nonLues||t.unreadCount),a(11),g(t.stats.lues||0),a(11),g(t.stats.echecs||0)}}function et(l,e){if(l&1){let t=h();n(0,"div",57),m(1,"i",58),r(2),n(3,"button",59),p("click",function(){f(t);let s=u();return b(s.error=null)}),o()()}if(l&2){let t=u();a(2),x("",t.error," ")}}function it(l,e){if(l&1){let t=h();n(0,"div",60),m(1,"i",61),r(2),n(3,"button",59),p("click",function(){f(t);let s=u();return b(s.success=null)}),o()()}if(l&2){let t=u();a(2),x("",t.success," ")}}function nt(l,e){if(l&1){let t=h();n(0,"div",62)(1,"div",63)(2,"div"),m(3,"i",64),n(4,"strong"),r(5),o()(),n(6,"div",32)(7,"button",65),p("click",function(){f(t);let s=u();return b(s.markSelectedAsRead())}),m(8,"i",7),r(9,"Marquer comme lu "),o(),n(10,"button",66),p("click",function(){f(t);let s=u();return b(s.openDeleteModal())}),m(11,"i",67),r(12,"Supprimer "),o()()()()}if(l&2){let t=u();a(5),x("",t.selectedNotifications.size," notification(s) s\xE9lectionn\xE9e(s)"),a(2),d("disabled",t.processing),a(3),d("disabled",t.processing)}}function ot(l,e){l&1&&(n(0,"div",68)(1,"div",69)(2,"span",70),r(3,"Chargement..."),o()(),n(4,"p",71),r(5,"Chargement des notifications..."),o()())}function at(l,e){l&1&&(n(0,"div",68)(1,"div",24),m(2,"img",74),o(),n(3,"h6",75),r(4,"Aucune notification"),o(),n(5,"p",76),r(6,"Vous n'avez aucune notification pour le moment."),o()())}function rt(l,e){if(l&1&&(n(0,"a",101),m(1,"i",102),o()),l&2){let t=u().$implicit,i=u(3);d("routerLink",i.getActionLink(t))}}function st(l,e){if(l&1){let t=h();n(0,"tr")(1,"td")(2,"div",80)(3,"input",81),p("change",function(){let s=f(t).$implicit,c=u(3);return b(c.toggleSelection(s.id))}),o()()(),n(4,"td")(5,"div",87),m(6,"i"),o()(),n(7,"td")(8,"div",88)(9,"strong",37),r(10),o(),n(11,"small",89),r(12),o(),n(13,"div",90)(14,"small",89),m(15,"i",91),r(16),o(),n(17,"small",92),m(18,"i",93),r(19),o()()()(),n(20,"td")(21,"span",94),r(22),o()(),n(23,"td")(24,"div",47),m(25,"i"),n(26,"span"),r(27),o()()(),n(28,"td")(29,"span"),r(30),o()(),n(31,"td")(32,"small",89),r(33),o()(),n(34,"td")(35,"div",95)(36,"button",96),p("click",function(s){let c=f(t).$implicit,v=u(3);return b(v.markAsRead(c,s))}),m(37,"i",97),o(),_(38,rt,2,1,"a",98),n(39,"button",99),p("click",function(s){let c=f(t).$implicit,v=u(3);return b(v.deleteNotification(c,s))}),m(40,"i",100),o()()()()}if(l&2){let t=e.$implicit,i=u(3);C("table-primary",t.nsStatut!=="LU")("bg-light",i.isRecentNotification(t.nsDateCreation)),a(3),d("checked",i.selectedNotifications.has(t.id)),a(2),d("ngClass","bg-light-"+i.getPriorityColor(t.nsPriorite)),a(),O(i.getNotificationIcon(t.nsType)+" text-"+i.getPriorityColor(t.nsPriorite)),a(4),g(t.nsTitre),a(2),g(t.nsMessage),a(4),x(" ",t.destinataireNom," "),a(3),x(" ",t.destinataireEmail," "),a(3),g(i.getTypeText(t.nsType)),a(3),O(i.getChannelIcon(t.nsCanal)+" me-1"),a(2),g(i.getChannelText(t.nsCanal)),a(2),O("badge "+i.getStatusBadgeClass(t.nsStatut)),a(),x(" ",i.getStatusText(t.nsStatut)," "),a(3),g(i.formatDate(t.nsDateCreation)),a(3),d("disabled",t.nsStatut==="LU"||i.processing),a(2),d("ngIf",i.getActionLink(t)),a(),d("disabled",i.processing)}}function lt(l,e){if(l&1){let t=h();n(0,"div",77)(1,"table",78)(2,"thead")(3,"tr")(4,"th",79)(5,"div",80)(6,"input",81),p("change",function(){f(t);let s=u(2);return b(s.toggleSelectAll())}),o()()(),m(7,"th",82),n(8,"th"),r(9,"Notification"),o(),n(10,"th",83),r(11,"Type"),o(),n(12,"th",83),r(13,"Canal"),o(),n(14,"th",83),r(15,"Statut"),o(),n(16,"th",84),r(17,"Date"),o(),n(18,"th",85),r(19,"Actions"),o()()(),n(20,"tbody"),_(21,st,41,23,"tr",86),o()()()}if(l&2){let t=u(2);a(6),d("checked",t.selectedNotifications.size===t.notifications.length),a(15),d("ngForOf",t.notifications)}}function ct(l,e){if(l&1){let t=h();n(0,"li",105)(1,"a",106),p("click",function(){let s=f(t).$implicit,c=u(3);return b(c.changePage(s))}),r(2),o()()}if(l&2){let t=e.$implicit,i=u(3);C("active",t===i.currentPage),a(2),g(t+1)}}function dt(l,e){if(l&1){let t=h();n(0,"div",103)(1,"div")(2,"small",89),r(3),o()(),n(4,"div")(5,"nav")(6,"ul",104)(7,"li",105)(8,"a",106),p("click",function(){f(t);let s=u(2);return b(s.changePage(s.currentPage-1))}),m(9,"i",107),o()(),_(10,ct,3,3,"li",108),n(11,"li",105)(12,"a",106),p("click",function(){f(t);let s=u(2);return b(s.changePage(s.currentPage+1))}),m(13,"i",109),o()()()()()()}if(l&2){let t=u(2);a(3),D(" Affichage de ",t.currentPage*t.pageSize+1," \xE0 ",t.min((t.currentPage+1)*t.pageSize,t.totalElements)," sur ",t.totalElements," notifications "),a(4),C("disabled",t.currentPage===0),a(3),d("ngForOf",t.getPages()),a(),C("disabled",t.currentPage===t.totalPages-1)}}function mt(l,e){if(l&1&&(n(0,"div",2),_(1,at,7,0,"div",12)(2,lt,22,2,"div",72)(3,dt,14,8,"div",73),o()),l&2){let t=u();a(),d("ngIf",t.notifications.length===0),a(),d("ngIf",t.notifications.length>0),a(),d("ngIf",t.notifications.length>0)}}function ut(l,e){if(l&1&&(n(0,"option",27),r(1),o()),l&2){let t=e.$implicit;d("value",t.value),a(),g(t.label)}}function pt(l,e){if(l&1&&(n(0,"option",27),r(1),o()),l&2){let t=e.$implicit;d("value",t.value),a(),g(t.label)}}function gt(l,e){if(l&1&&(n(0,"option",27),r(1),o()),l&2){let t=e.$implicit;d("value",t.value),a(),g(t.label)}}function ft(l,e){if(l&1&&(n(0,"option",27),r(1),o()),l&2){let t=e.$implicit;d("value",t.value),a(),g(t.label)}}function bt(l,e){l&1&&m(0,"span",110)}function _t(l,e){l&1&&m(0,"span",110)}var X=class l{notificationService=M(k);authService=M(N);toasterService=M($);subscriptions=[];loading=!1;loadingStats=!1;processing=!1;error=null;success=null;notifications=[];selectedNotifications=new Set;stats=null;unreadCount=0;currentPage=0;pageSize=20;totalElements=0;totalPages=0;filters={page:0,size:20,sort:"nsDateCreation,desc"};typeOptions=this.notificationService.getNotificationTypeOptions();priorityOptions=this.notificationService.getPriorityOptions();channelOptions=this.notificationService.getChannelOptions();statusOptions=this.notificationService.getStatusOptions();activeFilters={};showFiltersModal=!1;showDeleteModal=!1;showMarkAllModal=!1;ngOnInit(){this.loadNotifications(),this.loadStats(),this.loadUnreadCount()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadNotifications(){this.loading=!0,this.error=null;let e=this.notificationService.getNotifications(this.filters).subscribe({next:t=>{this.notifications=t.content,this.currentPage=t.page,this.pageSize=t.size,this.totalElements=t.totalElements,this.totalPages=t.totalPages,this.loading=!1,this.selectedNotifications.clear()},error:t=>{console.error("Erreur lors du chargement des notifications:",t),this.error=t.message||"Erreur lors du chargement des notifications",this.loading=!1,this.error&&this.toasterService.typeError(this.error)}});this.subscriptions.push(e)}loadStats(){this.loadingStats=!0;let e=this.notificationService.getNotificationStats().subscribe({next:t=>{this.stats=t,this.loadingStats=!1},error:t=>{console.error("Erreur lors du chargement des statistiques:",t),this.loadingStats=!1}});this.subscriptions.push(e)}loadUnreadCount(){let e=this.notificationService.getUnreadCount().subscribe({next:t=>{this.unreadCount=t.count},error:t=>{console.error("Erreur lors du chargement du nombre de notifications non lues:",t)}});this.subscriptions.push(e)}applyFilters(){this.filters=I(w(w({},this.filters),this.activeFilters),{page:0}),this.loadNotifications(),this.closeFiltersModal()}resetFilters(){this.activeFilters={},this.filters={page:0,size:20,sort:"nsDateCreation,desc"},this.loadNotifications(),this.closeFiltersModal()}changePage(e){e>=0&&e<this.totalPages&&(this.filters.page=e,this.loadNotifications())}toggleSelection(e){this.selectedNotifications.has(e)?this.selectedNotifications.delete(e):this.selectedNotifications.add(e)}toggleSelectAll(){this.selectedNotifications.size===this.notifications.length?this.selectedNotifications.clear():this.notifications.forEach(e=>{this.selectedNotifications.add(e.id)})}markAsRead(e,t){if(t&&t.stopPropagation(),e.nsStatut==="LU")return;this.processing=!0;let i=this.notificationService.markAsRead(e.id).subscribe({next:s=>{e.nsStatut=s.nsStatut,this.unreadCount=Math.max(0,this.unreadCount-1),this.toasterService.typeSuccess("Notification marqu\xE9e comme lue"),this.processing=!1},error:s=>{console.error("Erreur lors du marquage comme lu:",s),this.toasterService.typeError("Erreur lors du marquage comme lu"),this.processing=!1}});this.subscriptions.push(i)}markSelectedAsRead(){if(this.selectedNotifications.size===0)return;let e=Array.from(this.selectedNotifications);this.processing=!0;let t=this.notificationService.markMultipleAsRead(e).subscribe({next:i=>{i.forEach(s=>{let c=this.notifications.find(v=>v.id===s.id);c&&(c.nsStatut=s.nsStatut)}),this.unreadCount=Math.max(0,this.unreadCount-e.length),this.selectedNotifications.clear(),this.toasterService.typeSuccess(`${e.length} notification(s) marqu\xE9e(s) comme lue(s)`),this.processing=!1},error:i=>{console.error("Erreur lors du marquage multiple comme lu:",i),this.toasterService.typeError("Erreur lors du marquage comme lu"),this.processing=!1}});this.subscriptions.push(t)}markAllAsRead(){this.processing=!0;let e=this.notificationService.markAllAsRead().subscribe({next:t=>{this.notifications.forEach(i=>{i.nsStatut!=="LU"&&(i.nsStatut="LU")}),this.unreadCount=0,this.toasterService.typeSuccess(`${t.count} notification(s) marqu\xE9e(s) comme lue(s)`),this.processing=!1,this.closeMarkAllModal()},error:t=>{console.error("Erreur lors du marquage de toutes les notifications comme lues:",t),this.toasterService.typeError("Erreur lors du marquage comme lu"),this.processing=!1}});this.subscriptions.push(e)}deleteNotification(e,t){t&&t.stopPropagation(),this.processing=!0;let i=this.notificationService.deleteNotification(e.id).subscribe({next:()=>{this.notifications=this.notifications.filter(s=>s.id!==e.id),e.nsStatut!=="LU"&&(this.unreadCount=Math.max(0,this.unreadCount-1)),this.totalElements--,this.toasterService.typeSuccess("Notification supprim\xE9e"),this.processing=!1},error:s=>{console.error("Erreur lors de la suppression:",s),this.toasterService.typeError("Erreur lors de la suppression"),this.processing=!1}});this.subscriptions.push(i)}deleteSelectedNotifications(){if(this.selectedNotifications.size===0)return;let e=Array.from(this.selectedNotifications);this.processing=!0;let t=this.notificationService.deleteMultipleNotifications(e).subscribe({next:i=>{this.notifications=this.notifications.filter(c=>!e.includes(c.id));let s=this.notifications.filter(c=>e.includes(c.id)&&c.nsStatut!=="LU").length;this.unreadCount=Math.max(0,this.unreadCount-s),this.totalElements-=i.count,this.selectedNotifications.clear(),this.toasterService.typeSuccess(`${i.count} notification(s) supprim\xE9e(s)`),this.processing=!1,this.closeDeleteModal()},error:i=>{console.error("Erreur lors de la suppression multiple:",i),this.toasterService.typeError("Erreur lors de la suppression"),this.processing=!1}});this.subscriptions.push(t)}openFiltersModal(){this.showFiltersModal=!0}closeFiltersModal(){this.showFiltersModal=!1}openDeleteModal(){if(this.selectedNotifications.size===0){this.toasterService.typeWarning("Veuillez s\xE9lectionner au moins une notification");return}this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1}openMarkAllModal(){this.showMarkAllModal=!0}closeMarkAllModal(){this.showMarkAllModal=!1}getNotificationIcon(e){return this.notificationService.getNotificationIcon(e)}getPriorityColor(e){return this.notificationService.getPriorityColor(e)}formatDate(e){return this.notificationService.formatDate(e)}isRecentNotification(e){return this.notificationService.isRecentNotification(e)}getActionLink(e){return this.notificationService.extractActionLink(e)}getStatusText(e){let t=this.statusOptions.find(i=>i.value===e);return t?t.label:e}getStatusBadgeClass(e){let t=this.statusOptions.find(i=>i.value===e);return t?t.badgeClass:"badge-soft-secondary"}getTypeText(e){let t=this.typeOptions.find(i=>i.value===e);return t?t.label:e}getChannelText(e){let t=this.channelOptions.find(i=>i.value===e);return t?t.label:e}getChannelIcon(e){let t=this.channelOptions.find(i=>i.value===e);return t?t.icon:"isax isax-info-circle"}getPages(){let e=[],i=Math.max(0,this.currentPage-Math.floor(2.5)),s=Math.min(this.totalPages-1,i+5-1);s-i+1<5&&(i=Math.max(0,s-5+1));for(let c=i;c<=s;c++)e.push(c);return e}min(e,t){return Math.min(e,t)}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=F({type:l,selectors:[["app-notifications"]],decls:110,vars:46,consts:[[1,""],[1,"pb-3","d-flex","align-items-center","justify-content-between","border-bottom","mb-3"],[1,"mb-0"],[1,"d-flex","align-items-center","gap-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"isax","isax-filter","me-1"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"isax","isax-tick-circle","me-1"],["class","row mb-4",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-info alert-dismissible fade show mb-3","role","alert",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","mb-0",4,"ngIf"],["tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close","btn-close-modal","custom-btn-close",3,"click"],[1,"fa-solid","fa-x"],[1,"modal-body"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer","d-flex","align-items-center","justify-content-between","gap-1"],["type","button",1,"btn","btn-outline-white",3,"click"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-dialog","modal-dialog-centered","modal-sm"],[1,"modal-body","text-center"],["src","assets/img/icons/notification-check.svg","alt","Marquer toutes comme lues"],[1,"mb-1"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-outline-white","me-3",3,"click","disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["src","assets/img/icons/delete.svg","alt","Suppression"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"row","mb-4"],[1,"col-md-3","col-sm-6"],[1,"card"],[1,"card-body"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-lg","bg-light-primary","me-3","p-2"],[1,"isax","isax-notification","fs-24","text-primary"],[1,"text-gray-9","fw-medium","mb-0"],[1,"avatar","avatar-lg","bg-light-warning","me-3","p-2"],[1,"isax","isax-notification-1","fs-24","text-warning"],[1,"avatar","avatar-lg","bg-light-success","me-3","p-2"],[1,"isax","isax-tick-circle","fs-24","text-success"],[1,"avatar","avatar-lg","bg-light-danger","me-3","p-2"],[1,"isax","isax-danger","fs-24","text-danger"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"isax","isax-danger","me-2"],["type","button",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"isax","isax-tick-circle","me-2"],["role","alert",1,"alert","alert-info","alert-dismissible","fade","show","mb-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"isax","isax-info-circle","me-2"],["type","button",1,"btn","btn-sm","btn-success",3,"click","disabled"],["type","button",1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"isax","isax-trash","me-1"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],["class","table-responsive",4,"ngIf"],["class","d-flex justify-content-between align-items-center mt-3",4,"ngIf"],["src","assets/img/icons/notification.svg","alt","Aucune notification",1,"img-fluid",2,"max-width","100px"],[1,"mb-2"],[1,"text-muted","mb-4"],[1,"table-responsive"],[1,"table","table-hover"],["width","50"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","checked"],["width","60"],["width","120"],["width","150"],["width","100"],[3,"table-primary","bg-light",4,"ngFor","ngForOf"],[1,"avatar","avatar-sm",3,"ngClass"],[1,"d-flex","flex-column"],[1,"text-muted"],[1,"mt-1"],[1,"isax","isax-user","me-1"],[1,"text-muted","ms-3"],[1,"isax","isax-sms","me-1"],[1,"badge","badge-soft-primary"],[1,"d-flex","gap-1"],["type","button","title","Marquer comme lu",1,"btn","btn-sm","btn-outline-primary",3,"click","disabled"],[1,"isax","isax-tick-circle"],["class","btn btn-sm btn-outline-info","title","Voir les d\xE9tails",3,"routerLink",4,"ngIf"],["type","button","title","Supprimer",1,"btn","btn-sm","btn-outline-danger",3,"click","disabled"],[1,"isax","isax-trash"],["title","Voir les d\xE9tails",1,"btn","btn-sm","btn-outline-info",3,"routerLink"],[1,"isax","isax-eye"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],["href","javascript:void(0);",1,"page-link",3,"click"],[1,"isax","isax-arrow-left"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"isax","isax-arrow-right"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div")(2,"div",1)(3,"h6",2),r(4,"Notifications"),o(),n(5,"div",3)(6,"button",4),p("click",function(){return i.openFiltersModal()}),m(7,"i",5),r(8,"Filtres "),o(),n(9,"button",6),p("click",function(){return i.openMarkAllModal()}),m(10,"i",7),r(11,"Tout marquer comme lu "),o()()(),_(12,tt,45,4,"div",8)(13,et,4,1,"div",9)(14,it,4,1,"div",10)(15,nt,13,3,"div",11)(16,ot,6,0,"div",12)(17,mt,4,3,"div",13),o()(),n(18,"div",14)(19,"div",15)(20,"div",16)(21,"div",17)(22,"h4",18),r(23,"Filtrer les notifications"),o(),n(24,"button",19),p("click",function(){return i.closeFiltersModal()}),m(25,"i",20),o()(),n(26,"div",21)(27,"div",22)(28,"div",23)(29,"div",24)(30,"label",25),r(31,"Type"),o(),n(32,"select",26),E("ngModelChange",function(c){return S(i.activeFilters.type,c)||(i.activeFilters.type=c),c}),n(33,"option",27),r(34,"Tous les types"),o(),_(35,ut,2,2,"option",28),o()()(),n(36,"div",23)(37,"div",24)(38,"label",25),r(39,"Statut"),o(),n(40,"select",26),E("ngModelChange",function(c){return S(i.activeFilters.statut,c)||(i.activeFilters.statut=c),c}),n(41,"option",27),r(42,"Tous les statuts"),o(),_(43,pt,2,2,"option",28),o()()(),n(44,"div",23)(45,"div",24)(46,"label",25),r(47,"Canal"),o(),n(48,"select",26),E("ngModelChange",function(c){return S(i.activeFilters.canal,c)||(i.activeFilters.canal=c),c}),n(49,"option",27),r(50,"Tous les canaux"),o(),_(51,gt,2,2,"option",28),o()()(),n(52,"div",23)(53,"div",24)(54,"label",25),r(55,"Priorit\xE9"),o(),n(56,"select",26),E("ngModelChange",function(c){return S(i.activeFilters.priorite,c)||(i.activeFilters.priorite=c),c}),n(57,"option",27),r(58,"Toutes les priorit\xE9s"),o(),_(59,ft,2,2,"option",28),o()()(),n(60,"div",23)(61,"div",24)(62,"label",25),r(63,"Date de d\xE9but"),o(),n(64,"input",29),E("ngModelChange",function(c){return S(i.activeFilters.dateDebut,c)||(i.activeFilters.dateDebut=c),c}),o()()(),n(65,"div",23)(66,"div",24)(67,"label",25),r(68,"Date de fin"),o(),n(69,"input",29),E("ngModelChange",function(c){return S(i.activeFilters.dateFin,c)||(i.activeFilters.dateFin=c),c}),o()()()()(),n(70,"div",30)(71,"button",31),p("click",function(){return i.resetFilters()}),r(72,"R\xE9initialiser"),o(),n(73,"div",32)(74,"button",31),p("click",function(){return i.closeFiltersModal()}),r(75,"Annuler"),o(),n(76,"button",33),p("click",function(){return i.applyFilters()}),r(77,"Appliquer"),o()()()()()(),n(78,"div",14)(79,"div",34)(80,"div",16)(81,"div",35)(82,"div",24),m(83,"img",36),o(),n(84,"h6",37),r(85,"Marquer toutes comme lues"),o(),n(86,"p",24),r(87," \xCAtes-vous s\xFBr de vouloir marquer toutes les notifications comme lues ? "),o(),n(88,"div",38)(89,"button",39),p("click",function(){return i.closeMarkAllModal()}),r(90,"Annuler"),o(),n(91,"button",6),p("click",function(){return i.markAllAsRead()}),_(92,bt,1,0,"span",40),r(93," Confirmer "),o()()()()()(),n(94,"div",14)(95,"div",34)(96,"div",16)(97,"div",35)(98,"div",24),m(99,"img",41),o(),n(100,"h6",37),r(101,"Supprimer les notifications"),o(),n(102,"p",24),r(103),o(),n(104,"div",38)(105,"button",39),p("click",function(){return i.closeDeleteModal()}),r(106,"Annuler"),o(),n(107,"button",42),p("click",function(){return i.deleteSelectedNotifications()}),_(108,_t,1,0,"span",40),r(109," Supprimer "),o()()()()()()),t&2&&(a(9),d("disabled",i.unreadCount===0),a(3),d("ngIf",!i.loadingStats&&i.stats),a(),d("ngIf",i.error),a(),d("ngIf",i.success),a(),d("ngIf",i.selectedNotifications.size>0),a(),d("ngIf",i.loading),a(),d("ngIf",!i.loading),a(),P("display",i.showFiltersModal?"block":"none"),C("show",i.showFiltersModal)("d-block",i.showFiltersModal),a(14),y("ngModel",i.activeFilters.type),a(),d("value",void 0),a(2),d("ngForOf",i.typeOptions),a(5),y("ngModel",i.activeFilters.statut),a(),d("value",void 0),a(2),d("ngForOf",i.statusOptions),a(5),y("ngModel",i.activeFilters.canal),a(),d("value",void 0),a(2),d("ngForOf",i.channelOptions),a(5),y("ngModel",i.activeFilters.priorite),a(),d("value",void 0),a(2),d("ngForOf",i.priorityOptions),a(5),y("ngModel",i.activeFilters.dateDebut),a(5),y("ngModel",i.activeFilters.dateFin),a(9),P("display",i.showMarkAllModal?"block":"none"),C("show",i.showMarkAllModal)("d-block",i.showMarkAllModal),a(11),d("disabled",i.processing),a(2),d("disabled",i.processing),a(),d("ngIf",i.processing),a(2),P("display",i.showDeleteModal?"block":"none"),C("show",i.showDeleteModal)("d-block",i.showDeleteModal),a(9),x(" \xCAtes-vous s\xFBr de vouloir supprimer ",i.selectedNotifications.size," notification(s) s\xE9lectionn\xE9e(s) ? "),a(2),d("disabled",i.processing),a(2),d("disabled",i.processing),a(),d("ngIf",i.processing))},dependencies:[U,R,L,V,J,G,Y,j,H,B,K,q,z],styles:[".notifications-container[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]{transition:all .3s ease}.notifications-container[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]:hover{background-color:rgba(var(--bs-primary-rgb),.05)}.notifications-container[_ngcontent-%COMP%]   .notification-item.unread[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.1);border-left:3px solid var(--bs-primary)}.notifications-container[_ngcontent-%COMP%]   .notification-item.recent[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}.notifications-container[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:8px}.notifications-container[_ngcontent-%COMP%]   .notification-icon.priority-info[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.1);color:var(--bs-primary)}.notifications-container[_ngcontent-%COMP%]   .notification-icon.priority-warning[_ngcontent-%COMP%]{background-color:rgba(var(--bs-warning-rgb),.1);color:var(--bs-warning)}.notifications-container[_ngcontent-%COMP%]   .notification-icon.priority-error[_ngcontent-%COMP%]{background-color:rgba(var(--bs-danger-rgb),.1);color:var(--bs-danger)}.notifications-container[_ngcontent-%COMP%]   .notification-icon.priority-critical[_ngcontent-%COMP%]{background-color:rgba(var(--bs-dark-rgb),.1);color:var(--bs-dark)}.notifications-container[_ngcontent-%COMP%]   .notification-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem}.notifications-container[_ngcontent-%COMP%]   .notification-badge.status-en-attente[_ngcontent-%COMP%]{background-color:rgba(var(--bs-warning-rgb),.1);color:var(--bs-warning)}.notifications-container[_ngcontent-%COMP%]   .notification-badge.status-envoye[_ngcontent-%COMP%]{background-color:rgba(var(--bs-info-rgb),.1);color:var(--bs-info)}.notifications-container[_ngcontent-%COMP%]   .notification-badge.status-delivre[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.1);color:var(--bs-primary)}.notifications-container[_ngcontent-%COMP%]   .notification-badge.status-lu[_ngcontent-%COMP%]{background-color:rgba(var(--bs-success-rgb),.1);color:var(--bs-success)}.notifications-container[_ngcontent-%COMP%]   .notification-badge.status-echec[_ngcontent-%COMP%]{background-color:rgba(var(--bs-danger-rgb),.1);color:var(--bs-danger)}.notifications-container[_ngcontent-%COMP%]   .notification-actions[_ngcontent-%COMP%]{opacity:0;transition:opacity .3s ease}.notification-item[_ngcontent-%COMP%]:hover   .notifications-container[_ngcontent-%COMP%]   .notification-actions[_ngcontent-%COMP%]{opacity:1}.notifications-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]{transition:transform .3s ease}.notifications-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.notifications-container[_ngcontent-%COMP%]   .filters-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border-radius:12px;border:none;box-shadow:0 10px 40px #0000001a}.notifications-container[_ngcontent-%COMP%]   .filters-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--bs-border-color);padding:1.5rem}.notifications-container[_ngcontent-%COMP%]   .filters-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:600;color:var(--bs-heading-color)}.notifications-container[_ngcontent-%COMP%]   .filters-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem}.notifications-container[_ngcontent-%COMP%]   .filters-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top:1px solid var(--bs-border-color);padding:1rem 1.5rem}.notifications-container[_ngcontent-%COMP%]   .confirmation-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border-radius:12px;border:none;box-shadow:0 10px 40px #0000001a}.notifications-container[_ngcontent-%COMP%]   .confirmation-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:2rem}.notifications-container[_ngcontent-%COMP%]   .confirmation-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80px;margin:0 auto 1.5rem}.notifications-container[_ngcontent-%COMP%]   .confirmation-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;color:var(--bs-heading-color)}.notifications-container[_ngcontent-%COMP%]   .confirmation-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--bs-secondary-color);margin-bottom:1.5rem}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 rgba(var(--bs-primary-rgb),.4)}70%{box-shadow:0 0 0 10px rgba(var(--bs-primary-rgb),0)}to{box-shadow:0 0 rgba(var(--bs-primary-rgb),0)}}@media (max-width: 768px){.notifications-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]{margin-bottom:1rem}.notifications-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{font-size:.875rem}.notifications-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .notifications-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem}.notifications-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .notification-actions[_ngcontent-%COMP%]{opacity:1}.notifications-container[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{margin:.5rem}.notifications-container[_ngcontent-%COMP%]   .modal-dialog.modal-dialog-centered[_ngcontent-%COMP%]{min-height:calc(100% - 1rem)}}[data-bs-theme=dark][_ngcontent-%COMP%]   .notifications-container[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]:hover{background-color:#ffffff0d}[data-bs-theme=dark][_ngcontent-%COMP%]   .notifications-container[_ngcontent-%COMP%]   .notification-item.unread[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.15)}[data-bs-theme=dark][_ngcontent-%COMP%]   .notifications-container[_ngcontent-%COMP%]   .notification-icon.priority-info[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.2)}[data-bs-theme=dark][_ngcontent-%COMP%]   .notifications-container[_ngcontent-%COMP%]   .notification-icon.priority-warning[_ngcontent-%COMP%]{background-color:rgba(var(--bs-warning-rgb),.2)}[data-bs-theme=dark][_ngcontent-%COMP%]   .notifications-container[_ngcontent-%COMP%]   .notification-icon.priority-error[_ngcontent-%COMP%]{background-color:rgba(var(--bs-danger-rgb),.2)}[data-bs-theme=dark][_ngcontent-%COMP%]   .notifications-container[_ngcontent-%COMP%]   .notification-icon.priority-critical[_ngcontent-%COMP%]{background-color:rgba(var(--bs-dark-rgb),.2)}[data-bs-theme=dark][_ngcontent-%COMP%]   .notifications-container[_ngcontent-%COMP%]   .notification-badge.status-en-attente[_ngcontent-%COMP%]{background-color:rgba(var(--bs-warning-rgb),.2)}[data-bs-theme=dark][_ngcontent-%COMP%]   .notifications-container[_ngcontent-%COMP%]   .notification-badge.status-envoye[_ngcontent-%COMP%]{background-color:rgba(var(--bs-info-rgb),.2)}[data-bs-theme=dark][_ngcontent-%COMP%]   .notifications-container[_ngcontent-%COMP%]   .notification-badge.status-delivre[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.2)}[data-bs-theme=dark][_ngcontent-%COMP%]   .notifications-container[_ngcontent-%COMP%]   .notification-badge.status-lu[_ngcontent-%COMP%]{background-color:rgba(var(--bs-success-rgb),.2)}[data-bs-theme=dark][_ngcontent-%COMP%]   .notifications-container[_ngcontent-%COMP%]   .notification-badge.status-echec[_ngcontent-%COMP%]{background-color:rgba(var(--bs-danger-rgb),.2)}"]})};export{X as NotificationsComponent};
