import{a as D}from"./chunk-4KA3LRVT.js";import{b as A}from"./chunk-27KQ6NAF.js";import{C as G,b as B,d as k,f as _,h as M,i as N,n as T,q as j,r as P,z as R}from"./chunk-OZCTR5Q5.js";import{b as F,c as x}from"./chunk-6P5VJYPL.js";import"./chunk-VLYMLFWW.js";import{e as L,f as E}from"./chunk-5IGNUQZL.js";import"./chunk-G64D4X4E.js";import"./chunk-HOOCBFFS.js";import{j as S,l as C,y as I}from"./chunk-E22WOTPK.js";import{Rb as l,Sb as i,Sc as o,Tb as t,Tc as a,Ub as c,fc as h,hb as e,hc as y,nb as b,ub as w,wc as s,xc as u,yc as f,zb as g}from"./chunk-RKWTZGMB.js";import"./chunk-EQDQRRRY.js";function q(r,m){r&1&&(i(0,"div",37),s(1),o(2,"translate"),t()),r&2&&(e(),f(" ",a(2,1,"login.usernameRequired"),`
`))}function z(r,m){r&1&&(i(0,"div",37),s(1),o(2,"translate"),t()),r&2&&(e(),f(" ",a(2,1,"login.passwordRequired"),`
`))}function O(r,m){if(r&1&&(i(0,"div",38),s(1),t()),r&2){let d=y();e(),f(" ",d.errorMessage," ")}}function H(r,m){r&1&&(i(0,"span"),s(1),o(2,"translate"),t()),r&2&&(e(),u(a(2,1,"login.signIn")))}function J(r,m){r&1&&(i(0,"span"),c(1,"span",39),s(2),o(3,"translate"),t()),r&2&&(e(2),f(" ",a(3,1,"login.signingIn")," "))}var V=class r{constructor(m,d,n){this.router=m;this.fb=d;this.authService=n;this.loginForm=this.fb.group({username:["",[_.required]],password:["",[_.required]],rememberMe:[!1]})}routes=x;show_password=!0;loginForm;isLoading=!1;errorMessage="";onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0,this.errorMessage="";let{username:m,password:d,rememberMe:n}=this.loginForm.value;this.authService.authenticate(m,d,n).subscribe({next:p=>{this.isLoading=!1,console.log("Login successful",p)},error:p=>{this.isLoading=!1,this.errorMessage=p.error?.message||"\xC9chec de la connexion. Veuillez v\xE9rifier vos identifiants.",console.error("Login error",p)}})}redirectPage(){this.router.navigate([x.index])}static \u0275fac=function(d){return new(d||r)(b(L),b(R),b(F))};static \u0275cmp=w({type:r,selectors:[["app-login"]],decls:57,vars:34,consts:[[1,"main-wrapper","auth-bg"],[1,"container-fuild"],[1,"w-100","overflow-hidden","position-relative","flex-wrap","d-block","vh-100"],[1,"row","justify-content-center","align-items-center","vh-100","overflow-auto","flex-wrap"],[1,"col-lg-4","mx-auto"],[1,"d-flex","justify-content-center","align-items-center",3,"ngSubmit","formGroup"],[1,"d-flex","flex-column","justify-content-lg-center","p-4","p-lg-0","pb-0","flex-fill"],[1,"mx-auto","mb-5","text-center"],["src","assets/img/logo.svg","alt","Logo",1,"img-fluid","mb-3"],[1,"d-flex","justify-content-end"],[1,"card","border-0","p-lg-3","shadow-lg"],[1,"card-body"],[1,"text-center","mb-3"],[1,"mb-2"],[1,"mb-0"],[1,"mb-3"],[1,"form-label"],[1,"input-group"],[1,"input-group-text","border-end-0"],[1,"isax","isax-user"],["type","text","formControlName","username",1,"form-control","border-start-0","ps-0",3,"placeholder"],["class","text-danger small mt-1",4,"ngIf"],[1,"pass-group","input-group"],[1,"isax","isax-lock"],["formControlName","password",1,"pass-inputs","form-control","border-start-0","ps-0",3,"type","placeholder"],[1,"isax","toggle-password",3,"click","ngClass"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"d-flex","align-items-center"],[1,"form-check","form-check-md","mb-0"],["id","remember_me","type","checkbox","formControlName","rememberMe",1,"form-check-input"],["for","remember_me",1,"form-check-label","mt-0"],[1,"text-end"],[3,"routerLink"],["class","alert alert-danger py-2 mb-3",4,"ngIf"],[1,"mb-1"],["type","submit",1,"btn","bg-primary-gradient","text-white","w-100",3,"disabled"],[4,"ngIf"],[1,"text-danger","small","mt-1"],[1,"alert","alert-danger","py-2","mb-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"]],template:function(d,n){if(d&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),h("ngSubmit",function(){return n.onSubmit()}),i(6,"div",6)(7,"div",7),c(8,"img",8),i(9,"div",9),c(10,"app-language-selector"),t()(),i(11,"div",10)(12,"div",11)(13,"div",12)(14,"h5",13),s(15),o(16,"translate"),t(),i(17,"p",14),s(18),o(19,"translate"),t()(),i(20,"div",15)(21,"label",16),s(22),o(23,"translate"),t(),i(24,"div",17)(25,"span",18),c(26,"i",19),t(),c(27,"input",20),o(28,"translate"),t(),g(29,q,3,3,"div",21),t(),i(30,"div",15)(31,"label",16),s(32),o(33,"translate"),t(),i(34,"div",22)(35,"span",18),c(36,"i",23),t(),c(37,"input",24),o(38,"translate"),i(39,"span",25),h("click",function(){return n.show_password=!n.show_password}),t()(),g(40,z,3,3,"div",21),t(),i(41,"div",26)(42,"div",27)(43,"div",28),c(44,"input",29),i(45,"label",30),s(46),o(47,"translate"),t()()(),i(48,"div",31)(49,"a",32),s(50),o(51,"translate"),t()()(),g(52,O,2,1,"div",33),i(53,"div",34)(54,"button",35),g(55,H,3,3,"span",36)(56,J,4,3,"span",36),t()()()()()()()()()()()),d&2){let p,v;e(5),l("formGroup",n.loginForm),e(10),u(a(16,18,"login.title")),e(3),u(a(19,20,"login.subtitle")),e(4),u(a(23,22,"login.username")),e(5),l("placeholder",a(28,24,"login.usernamePlaceholder")),e(2),l("ngIf",((p=n.loginForm.get("username"))==null?null:p.invalid)&&((p=n.loginForm.get("username"))==null?null:p.touched)),e(3),u(a(33,26,"login.password")),e(5),l("type",n.show_password?"password":"text")("placeholder",a(38,28,"login.passwordPlaceholder")),e(2),l("ngClass",n.show_password===!0?"toggle-password isax-eye-slash":"toggle-password isax-eye"),e(),l("ngIf",((v=n.loginForm.get("password"))==null?null:v.invalid)&&((v=n.loginForm.get("password"))==null?null:v.touched)),e(6),u(a(47,30,"login.rememberMe")),e(3),l("routerLink",n.routes.forgot_password),e(),u(a(51,32,"login.forgotPassword")),e(2),l("ngIf",n.errorMessage),e(2),l("disabled",n.loginForm.invalid||n.isLoading),e(),l("ngIf",!n.isLoading),e(),l("ngIf",n.isLoading)}},dependencies:[I,S,C,E,G,T,k,B,M,N,j,P,D,A],styles:[".right-side-views[_ngcontent-%COMP%]{display:none}"]})};export{V as LoginComponent};
