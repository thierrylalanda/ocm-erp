import{a as fe,b as W,c as Ce,d as xe,e as Q}from"./chunk-SWA4GWCC.js";import{a as ve}from"./chunk-H5RQM42I.js";import{B as ge,C as $,b as re,d as L,f,h as V,i as le,j as me,m as ce,n as se,q as pe,r as de,s as q,t as B,u as j,z as ue}from"./chunk-OZCTR5Q5.js";import{c as oe,g as ae}from"./chunk-HOOCBFFS.js";import{k as ie,l as U,y as X}from"./chunk-E22WOTPK.js";import{$b as z,Bb as H,Dc as Y,Ec as J,Fc as K,Ic as ne,Rb as c,Sb as n,Tb as t,Ub as u,fc as g,ha as Z,hb as l,hc as p,la as ee,nb as b,ra as v,sa as _,tc as C,ub as N,wc as i,xc as x,yc as h,zb as s,zc as te}from"./chunk-RKWTZGMB.js";import{f as A}from"./chunk-EQDQRRRY.js";function Pe(r,o){r&1&&(n(0,"div",48),i(1," Le nom de la soci\xE9t\xE9 est requis "),t())}function Me(r,o){r&1&&(n(0,"div",48),i(1," L'activit\xE9 est requise "),t())}function Se(r,o){r&1&&(n(0,"div",48),i(1," Un email valide est requis "),t())}function Oe(r,o){r&1&&(n(0,"div",48),i(1," Le num\xE9ro contribuable est requis "),t())}function Fe(r,o){r&1&&(n(0,"div",48),i(1," Le RCCM est requis "),t())}function we(r,o){r&1&&(n(0,"div",48),i(1," Le r\xE9gime fiscal est requis "),t())}function Te(r,o){r&1&&(n(0,"div",48),i(1," La devise est requise "),t())}function De(r,o){r&1&&(n(0,"span"),i(1,"Cr\xE9er la soci\xE9t\xE9"),t())}function Ie(r,o){r&1&&(n(0,"span"),i(1,"Cr\xE9ation en cours..."),t())}function ke(r,o){if(r&1&&(n(0,"div",48),i(1),t()),r&2){let e=p();l(),h(" ",e.errorMessage," ")}}function Re(r,o){if(r&1&&(n(0,"div",49),i(1),t()),r&2){let e=p();l(),h(" ",e.successMessage," ")}}var G=class r{constructor(o,e){this.fb=o;this.createCompanyUseCase=e;this.companyForm=this.fb.group({nom:["",[f.required,f.minLength(2)]],activite:["",[f.required,f.minLength(3)]],adresse:[""],boitePostal:[""],pays:["Cameroun"],region:[""],telephone:[""],nc:["",[f.required]],rccm:["",[f.required]],regimeFiscal:["",[f.required]],devise:["XAF",[f.required]],email:["",[f.required,f.email]],siteWeb:[""],logo:[""],favicon:[""],actif:[!0]})}companyCreated=new H;cancel=new H;companyForm;isLoading=!1;errorMessage="";successMessage="";onSubmit(){return A(this,null,function*(){if(this.companyForm.invalid){this.markFormGroupTouched(this.companyForm);return}this.isLoading=!0,this.errorMessage="",this.successMessage="";try{let o=this.companyForm.value,e=yield this.createCompanyUseCase.execute(o);this.successMessage=`Soci\xE9t\xE9 "${e.nom}" cr\xE9\xE9e avec succ\xE8s ! ID: ${e.id}`,this.companyCreated.emit(e),setTimeout(()=>{this.companyForm.reset({pays:"Cameroun",devise:"XAF",actif:!0})},2e3)}catch(o){this.errorMessage=o.message||"Une erreur est survenue lors de la cr\xE9ation de la soci\xE9t\xE9",console.error("Erreur cr\xE9ation soci\xE9t\xE9:",o)}finally{this.isLoading=!1}})}onCancel(){this.cancel.emit()}markFormGroupTouched(o){Object.values(o.controls).forEach(e=>{e.markAsTouched(),e instanceof me&&this.markFormGroupTouched(e)})}static \u0275fac=function(e){return new(e||r)(b(ue),b(W))};static \u0275cmp=N({type:r,selectors:[["app-company-form"]],outputs:{companyCreated:"companyCreated",cancel:"cancel"},decls:103,vars:27,consts:[[1,"company-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nom"],["id","nom","type","text","formControlName","nom","placeholder","Entrez le nom de la soci\xE9t\xE9"],["class","error-message",4,"ngIf"],["for","activite"],["id","activite","type","text","formControlName","activite","placeholder","Entrez l'activit\xE9 principale"],[1,"form-row"],["for","email"],["id","email","type","email","formControlName","email","placeholder","contact@societe.com"],["for","telephone"],["id","telephone","type","tel","formControlName","telephone","placeholder","+237 6 XX XX XX XX"],["for","nc"],["id","nc","type","text","formControlName","nc","placeholder","NCXXXXXXXXX"],["for","rccm"],["id","rccm","type","text","formControlName","rccm","placeholder","RCCMXXXXXXXXX"],["for","regimeFiscal"],["id","regimeFiscal","formControlName","regimeFiscal"],["value",""],["value","R\xE9gime r\xE9el simplifi\xE9"],["value","R\xE9gime r\xE9el normal"],["value","R\xE9gime forfaitaire"],["value","R\xE9gime lib\xE9ratoire"],["for","devise"],["id","devise","formControlName","devise"],["value","XAF"],["value","EUR"],["value","USD"],["value","XOF"],["for","adresse"],["id","adresse","formControlName","adresse","placeholder","Entrez l'adresse compl\xE8te","rows","2"],["for","pays"],["id","pays","type","text","formControlName","pays","placeholder","Cameroun"],["for","region"],["id","region","type","text","formControlName","region","placeholder","Centre"],["for","boitePostal"],["id","boitePostal","type","text","formControlName","boitePostal","placeholder","BP 1234"],["for","siteWeb"],["id","siteWeb","type","url","formControlName","siteWeb","placeholder","https://www.societe.com"],["for","logo"],["id","logo","type","url","formControlName","logo","placeholder","https://www.societe.com/logo.png"],[1,"checkbox-label"],["type","checkbox","formControlName","actif"],[1,"form-actions"],["type","submit",3,"disabled"],[4,"ngIf"],["type","button",3,"click"],["class","success-message",4,"ngIf"],[1,"error-message"],[1,"success-message"]],template:function(e,a){if(e&1&&(n(0,"form",0),g("ngSubmit",function(){return a.onSubmit()}),n(1,"h2"),i(2,"Cr\xE9er une nouvelle soci\xE9t\xE9"),t(),n(3,"div",1)(4,"label",2),i(5,"Nom de la soci\xE9t\xE9 *"),t(),u(6,"input",3),s(7,Pe,2,0,"div",4),t(),n(8,"div",1)(9,"label",5),i(10,"Activit\xE9 principale *"),t(),u(11,"input",6),s(12,Me,2,0,"div",4),t(),n(13,"div",7)(14,"div",1)(15,"label",8),i(16,"Email *"),t(),u(17,"input",9),s(18,Se,2,0,"div",4),t(),n(19,"div",1)(20,"label",10),i(21,"T\xE9l\xE9phone"),t(),u(22,"input",11),t()(),n(23,"div",7)(24,"div",1)(25,"label",12),i(26,"Num\xE9ro Contribuable (NC) *"),t(),u(27,"input",13),s(28,Oe,2,0,"div",4),t(),n(29,"div",1)(30,"label",14),i(31,"RCCM *"),t(),u(32,"input",15),s(33,Fe,2,0,"div",4),t()(),n(34,"div",7)(35,"div",1)(36,"label",16),i(37,"R\xE9gime Fiscal *"),t(),n(38,"select",17)(39,"option",18),i(40,"S\xE9lectionnez un r\xE9gime"),t(),n(41,"option",19),i(42,"R\xE9gime r\xE9el simplifi\xE9"),t(),n(43,"option",20),i(44,"R\xE9gime r\xE9el normal"),t(),n(45,"option",21),i(46,"R\xE9gime forfaitaire"),t(),n(47,"option",22),i(48,"R\xE9gime lib\xE9ratoire"),t()(),s(49,we,2,0,"div",4),t(),n(50,"div",1)(51,"label",23),i(52,"Devise *"),t(),n(53,"select",24)(54,"option",18),i(55,"S\xE9lectionnez une devise"),t(),n(56,"option",25),i(57,"Franc CFA (XAF)"),t(),n(58,"option",26),i(59,"Euro (EUR)"),t(),n(60,"option",27),i(61,"Dollar US (USD)"),t(),n(62,"option",28),i(63,"Franc CFA Ouest (XOF)"),t()(),s(64,Te,2,0,"div",4),t()(),n(65,"div",1)(66,"label",29),i(67,"Adresse"),t(),u(68,"textarea",30),t(),n(69,"div",7)(70,"div",1)(71,"label",31),i(72,"Pays"),t(),u(73,"input",32),t(),n(74,"div",1)(75,"label",33),i(76,"R\xE9gion"),t(),u(77,"input",34),t(),n(78,"div",1)(79,"label",35),i(80,"Bo\xEEte Postale"),t(),u(81,"input",36),t()(),n(82,"div",7)(83,"div",1)(84,"label",37),i(85,"Site Web"),t(),u(86,"input",38),t(),n(87,"div",1)(88,"label",39),i(89,"Logo (URL)"),t(),u(90,"input",40),t()(),n(91,"div",1)(92,"label",41),u(93,"input",42),i(94," Soci\xE9t\xE9 active "),t()(),n(95,"div",43)(96,"button",44),s(97,De,2,0,"span",45)(98,Ie,2,0,"span",45),t(),n(99,"button",46),g("click",function(){return a.onCancel()}),i(100,"Annuler"),t()(),s(101,ke,2,1,"div",4)(102,Re,2,1,"div",47),t()),e&2){let m,d,E,P,M,S,O,F,w,T,D,I,k,R;c("formGroup",a.companyForm),l(6),C("is-invalid",((m=a.companyForm.get("nom"))==null?null:m.invalid)&&((m=a.companyForm.get("nom"))==null?null:m.touched)),l(),c("ngIf",((d=a.companyForm.get("nom"))==null?null:d.invalid)&&((d=a.companyForm.get("nom"))==null?null:d.touched)),l(4),C("is-invalid",((E=a.companyForm.get("activite"))==null?null:E.invalid)&&((E=a.companyForm.get("activite"))==null?null:E.touched)),l(),c("ngIf",((P=a.companyForm.get("activite"))==null?null:P.invalid)&&((P=a.companyForm.get("activite"))==null?null:P.touched)),l(5),C("is-invalid",((M=a.companyForm.get("email"))==null?null:M.invalid)&&((M=a.companyForm.get("email"))==null?null:M.touched)),l(),c("ngIf",((S=a.companyForm.get("email"))==null?null:S.invalid)&&((S=a.companyForm.get("email"))==null?null:S.touched)),l(9),C("is-invalid",((O=a.companyForm.get("nc"))==null?null:O.invalid)&&((O=a.companyForm.get("nc"))==null?null:O.touched)),l(),c("ngIf",((F=a.companyForm.get("nc"))==null?null:F.invalid)&&((F=a.companyForm.get("nc"))==null?null:F.touched)),l(4),C("is-invalid",((w=a.companyForm.get("rccm"))==null?null:w.invalid)&&((w=a.companyForm.get("rccm"))==null?null:w.touched)),l(),c("ngIf",((T=a.companyForm.get("rccm"))==null?null:T.invalid)&&((T=a.companyForm.get("rccm"))==null?null:T.touched)),l(5),C("is-invalid",((D=a.companyForm.get("regimeFiscal"))==null?null:D.invalid)&&((D=a.companyForm.get("regimeFiscal"))==null?null:D.touched)),l(11),c("ngIf",((I=a.companyForm.get("regimeFiscal"))==null?null:I.invalid)&&((I=a.companyForm.get("regimeFiscal"))==null?null:I.touched)),l(4),C("is-invalid",((k=a.companyForm.get("devise"))==null?null:k.invalid)&&((k=a.companyForm.get("devise"))==null?null:k.touched)),l(11),c("ngIf",((R=a.companyForm.get("devise"))==null?null:R.invalid)&&((R=a.companyForm.get("devise"))==null?null:R.touched)),l(32),c("disabled",a.companyForm.invalid||a.isLoading),l(),c("ngIf",!a.isLoading),l(),c("ngIf",a.isLoading),l(3),c("ngIf",a.errorMessage),l(),c("ngIf",a.successMessage)}},dependencies:[X,U,$,se,B,j,L,re,q,V,le,pe,de],styles:[".company-form[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background:#f8f9fa;border-radius:8px;box-shadow:0 2px 4px #0000001a}h2[_ngcontent-%COMP%]{margin-bottom:24px;color:#333;text-align:center}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;margin-bottom:0}label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#555}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}input.is-invalid[_ngcontent-%COMP%], select.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px}.success-message[_ngcontent-%COMP%]{color:#28a745;font-size:14px;margin-top:12px;padding:10px;background-color:#d4edda;border:1px solid #c3e6cb;border-radius:4px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto;margin:0}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:24px;padding-top:16px;border-top:1px solid #eee}button[_ngcontent-%COMP%]{flex:1;padding:12px 20px;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .3s}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff}button[type=submit][_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}button[type=button][_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}button[type=button][_ngcontent-%COMP%]:hover{background-color:#545b62}"]})};var y=class r{constructor(o){this.http=o}baseUrl=ve.api+"hierarchie/societes";create(o){let e={nom:o.nom,code:o.code,description:o.description,email:o.email,phoneNumber:o.phoneNumber,address:o.address,city:o.city,pays:o.pays,currency:o.currency,activite:o.activite,postalBox:o.postalBox,region:o.region,taxNumber:o.taxNumber,tradeRegister:o.tradeRegister,fiscalRegime:o.fiscalRegime,faviconUrl:o.faviconUrl,maxUsers:o.maxUsers,timezone:o.timezone,language:o.language};return this.http.post(this.baseUrl,e).toPromise().then(a=>a).catch(a=>{throw console.error("Erreur cr\xE9ation soci\xE9t\xE9:",a),a})}update(o,e){return this.http.put(`${this.baseUrl}/${o}`,e).toPromise().then(a=>a).catch(a=>{throw console.error("Erreur mise \xE0 jour soci\xE9t\xE9:",a),a})}delete(o){return this.http.delete(`${this.baseUrl}/${o}`).toPromise().catch(e=>{throw console.error("Erreur suppression soci\xE9t\xE9:",e),e})}findById(o){return this.http.get(`${this.baseUrl}/${o}`).toPromise().then(e=>e).catch(e=>(console.error("Erreur r\xE9cup\xE9ration soci\xE9t\xE9:",e),null))}setStatut(o,e){return this.http.patch(`${this.baseUrl}/${o}/statut`,{isActive:e}).toPromise().then(a=>a).catch(a=>(console.error("Erreur changement statut soci\xE9t\xE9:",a),null))}findAll(){return this.http.get(this.baseUrl).toPromise().then(o=>o.content).catch(o=>(console.error("Erreur r\xE9cup\xE9ration liste soci\xE9t\xE9s:",o),[]))}findByCode(o){return this.http.get(`${this.baseUrl}?code=${o}`).toPromise().then(e=>e&&e.length>0?e[0]:null).catch(e=>(console.error("Erreur recherche par code:",e),null))}findByEmail(o){return this.http.get(`${this.baseUrl}?email=${o}`).toPromise().then(e=>e&&e.length>0?e[0]:null).catch(e=>(console.error("Erreur recherche par email:",e),null))}findByTaxNumber(o){return this.http.get(`${this.baseUrl}?taxNumber=${o}`).toPromise().then(e=>e&&e.length>0?e[0]:null).catch(e=>(console.error("Erreur recherche par num\xE9ro fiscal:",e),null))}findByTradeRegister(o){return this.http.get(`${this.baseUrl}?tradeRegister=${o}`).toPromise().then(e=>e&&e.length>0?e[0]:null).catch(e=>(console.error("Erreur recherche par registre commerce:",e),null))}createFromDto(o){let e=Ce(o);return this.create(e)}findAllAsDto(){return this.findAll().then(o=>o.map(e=>xe(e)))}static \u0275fac=function(e){return new(e||r)(ee(oe))};static \u0275prov=Z({token:r,factory:r.\u0275fac,providedIn:"root"})};function Ne(r,o){if(r&1){let e=z();n(0,"div",28),g("click",function(){v(e);let m=p();return _(m.onCancel())}),n(1,"div",29),g("click",function(m){return v(e),_(m.stopPropagation())}),n(2,"div",30)(3,"h2"),i(4,"Cr\xE9er une nouvelle soci\xE9t\xE9"),t(),n(5,"button",31),g("click",function(){v(e);let m=p();return _(m.onCancel())}),i(6,"\xD7"),t()(),n(7,"div",32)(8,"p",33),i(9,"Remplissez le formulaire ci-dessous pour ajouter une nouvelle soci\xE9t\xE9 \xE0 votre organisation"),t(),n(10,"app-company-form",34),g("companyCreated",function(m){v(e);let d=p();return _(d.onCompanyCreated(m))})("cancel",function(){v(e);let m=p();return _(m.onCancel())}),t()()()()}}function ze(r,o){r&1&&(n(0,"p"),i(1," Aucune soci\xE9t\xE9 ne correspond \xE0 vos crit\xE8res de recherche. "),t())}function Ue(r,o){r&1&&(n(0,"p"),i(1," Commencez par cr\xE9er votre premi\xE8re soci\xE9t\xE9. "),t())}function Xe(r,o){if(r&1){let e=z();n(0,"div",35)(1,"div",36),i(2,"\u{1F3E2}"),t(),n(3,"h3"),i(4,"Aucune soci\xE9t\xE9 trouv\xE9e"),t(),s(5,ze,2,0,"p",37)(6,Ue,2,0,"p",37),n(7,"button",4),g("click",function(){v(e);let m=p();return _(m.showForm=!0)}),i(8," Cr\xE9er une soci\xE9t\xE9 "),t()()}if(r&2){let e=p();l(5),c("ngIf",e.searchTerm||e.filterStatus),l(),c("ngIf",!e.searchTerm&&!e.filterStatus)}}function Le(r,o){if(r&1&&(n(0,"tr")(1,"td")(2,"div",40)(3,"div",41),i(4),t(),n(5,"div",42),i(6),t()()(),n(7,"td"),i(8),t(),n(9,"td"),i(10),t(),n(11,"td")(12,"div",43)(13,"div"),i(14),t(),n(15,"div"),i(16),t()()(),n(17,"td"),i(18),t(),n(19,"td")(20,"span",44),i(21),t()(),n(22,"td"),i(23),t(),n(24,"td")(25,"div",45)(26,"button",46),i(27,"\u{1F441}\uFE0F"),t(),n(28,"button",47),i(29,"\u270F\uFE0F"),t(),n(30,"button",48),i(31,"\u{1F5D1}\uFE0F"),t()()()()),r&2){let e=o.$implicit,a=p(2);l(4),x(e.nom),l(2),h("ID: ",e.id),l(2),x(e.activite),l(2),x(e.email),l(4),h("NC: ",e.nc),l(2),h("RCCM: ",e.rccm),l(2),x(e.pays),l(2),C("active",e.actif),l(),h(" ",e.actif?"Active":"Inactive"," "),l(2),x(a.formatDate(e.createdAt))}}function Ve(r,o){if(r&1&&(n(0,"div",38)(1,"table")(2,"thead")(3,"tr")(4,"th"),i(5,"Nom"),t(),n(6,"th"),i(7,"Activit\xE9"),t(),n(8,"th"),i(9,"Email"),t(),n(10,"th"),i(11,"NC/RCCM"),t(),n(12,"th"),i(13,"Pays"),t(),n(14,"th"),i(15,"Statut"),t(),n(16,"th"),i(17,"Cr\xE9\xE9e le"),t(),n(18,"th"),i(19,"Actions"),t()()(),n(20,"tbody"),s(21,Le,32,11,"tr",39),t()()()),r&2){let e=p();l(21),c("ngForOf",e.filteredCompanies)}}function qe(r,o){if(r&1){let e=z();n(0,"div",49)(1,"button",50),g("click",function(){v(e);let m=p();return _(m.previousPage())}),i(2,"\u2190 Pr\xE9c\xE9dent"),t(),n(3,"span"),i(4),t(),n(5,"button",50),g("click",function(){v(e);let m=p();return _(m.nextPage())}),i(6,"Suivant \u2192"),t()()}if(r&2){let e=p();l(),c("disabled",e.currentPage===1),l(3),te("Page ",e.currentPage," sur ",e.totalPages),l(),c("disabled",e.currentPage===e.totalPages)}}var he=class r{constructor(o){this.companyRepository=o}companies=[];filteredCompanies=[];showForm=!1;searchTerm="";filterStatus="";currentPage=1;pageSize=10;isLoading=!1;ngOnInit(){this.loadCompanies()}loadCompanies(){return A(this,null,function*(){this.isLoading=!0;try{let o=yield this.companyRepository.findAll();console.log(o),this.companies=o.map(e=>({id:e.id||1,nom:e.nom,activite:e.activite||"",adresse:e.address||"",boitePostal:e.postalBox||"",pays:e.pays||"",region:e.region||"",telephone:e.phoneNumber||"",nc:e.taxNumber||"",rccm:e.tradeRegister||"",regimeFiscal:e.fiscalRegime||"",devise:e.currency||"XAF",email:e.email,siteWeb:e.website||"",logo:e.logoUrl||"",favicon:e.faviconUrl||"",actif:e.isActive,createdAt:e.createdAt!=null?e.createdAt.toISOString():"",updatedAt:e.updatedAt!=null?e.updatedAt.toISOString():""})),this.filterCompanies()}catch(o){console.error("Erreur lors du chargement des soci\xE9t\xE9s:",o),this.loadTestData()}finally{this.isLoading=!1}})}loadTestData(){this.companies=[{id:1,nom:"OCM SARL",activite:"D\xE9veloppement logiciel",adresse:"123 Rue du Commerce",boitePostal:"BP 1234",pays:"Cameroun",region:"Centre",telephone:"+237 6 12 34 56 78",nc:"NC123456789",rccm:"RCCM123456789",regimeFiscal:"R\xE9gime r\xE9el simplifi\xE9",devise:"XAF",email:"contact@ocm.cm",siteWeb:"https://ocm.cm",logo:"",favicon:"",actif:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:2,nom:"Tech Solutions SA",activite:"Consulting IT",adresse:"456 Avenue des Technologies",boitePostal:"BP 5678",pays:"France",region:"\xCEle-de-France",telephone:"+33 1 23 45 67 89",nc:"NC987654321",rccm:"RCCM987654321",regimeFiscal:"R\xE9gime r\xE9el normal",devise:"EUR",email:"contact@techsolutions.fr",siteWeb:"https://techsolutions.fr",logo:"",favicon:"",actif:!0,createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date(Date.now()-864e5).toISOString()}],this.filterCompanies()}get activeCompanies(){return this.companies.filter(o=>o.actif).length}get todayCompanies(){let o=new Date().toDateString();return this.companies.filter(e=>new Date(e.createdAt).toDateString()===o).length}get uniqueCountries(){return new Set(this.companies.map(e=>e.pays).filter(Boolean)).size}get totalPages(){return Math.ceil(this.filteredCompanies.length/this.pageSize)}onCompanyCreated(o){this.companies.unshift(o),this.filterCompanies(),this.showForm=!1}onCancel(){this.showForm=!1}filterCompanies(){let o=this.companies;if(this.searchTerm){let e=this.searchTerm.toLowerCase();o=o.filter(a=>a.nom.toLowerCase().includes(e)||a.activite.toLowerCase().includes(e)||a.email.toLowerCase().includes(e)||a.nc.toLowerCase().includes(e)||a.rccm.toLowerCase().includes(e))}this.filterStatus==="active"?o=o.filter(e=>e.actif):this.filterStatus==="inactive"&&(o=o.filter(e=>!e.actif)),this.filteredCompanies=o,this.currentPage=1}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}formatDate(o){return new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(e){return new(e||r)(b(y))};static \u0275cmp=N({type:r,selectors:[["app-company-management"]],features:[ne([{provide:fe,useClass:y},{provide:W,useClass:Q},Q,y])],decls:87,vars:11,consts:[[1,"company-management"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"list-section"],[1,"section-header"],[1,"list-controls"],[1,"search-box"],["type","text","placeholder","Rechercher une soci\xE9t\xE9...",3,"ngModelChange","input","ngModel"],[1,"search-icon"],[3,"ngModelChange","change","ngModel"],["value",""],["value","active"],["value","inactive"],["class","empty-state",4,"ngIf"],["class","companies-table",4,"ngIf"],["class","pagination",4,"ngIf"],[1,"quick-actions"],[1,"actions-grid"],[1,"action-card"],[1,"action-icon"],[1,"action-text"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"modal-description"],[3,"companyCreated","cancel"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf"],[1,"companies-table"],[4,"ngFor","ngForOf"],[1,"company-info"],[1,"company-name"],[1,"company-id"],[1,"tax-info"],[1,"status-badge"],[1,"action-buttons"],["title","Voir les d\xE9tails",1,"btn-icon"],["title","Modifier",1,"btn-icon"],["title","Supprimer",1,"btn-icon"],[1,"pagination"],[3,"click","disabled"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),i(4,"Gestion des Soci\xE9t\xE9s"),t(),n(5,"p"),i(6,"Cr\xE9ez et g\xE9rez les soci\xE9t\xE9s de votre organisation"),t()(),n(7,"div",3)(8,"button",4),g("click",function(){return a.showForm=!a.showForm}),i(9),t()()(),n(10,"div",5)(11,"div",6)(12,"div",7),i(13,"\u{1F3E2}"),t(),n(14,"div",8)(15,"h3"),i(16),t(),n(17,"p"),i(18,"Soci\xE9t\xE9s totales"),t()()(),n(19,"div",6)(20,"div",7),i(21,"\u2705"),t(),n(22,"div",8)(23,"h3"),i(24),t(),n(25,"p"),i(26,"Soci\xE9t\xE9s actives"),t()()(),n(27,"div",6)(28,"div",7),i(29,"\u{1F4C5}"),t(),n(30,"div",8)(31,"h3"),i(32),t(),n(33,"p"),i(34,"Cr\xE9\xE9es aujourd'hui"),t()()(),n(35,"div",6)(36,"div",7),i(37,"\u{1F30D}"),t(),n(38,"div",8)(39,"h3"),i(40),t(),n(41,"p"),i(42,"Pays diff\xE9rents"),t()()()(),s(43,Ne,11,0,"div",9),n(44,"div",10)(45,"div",11)(46,"h2"),i(47,"Liste des soci\xE9t\xE9s"),t(),n(48,"div",12)(49,"div",13)(50,"input",14),K("ngModelChange",function(d){return J(a.searchTerm,d)||(a.searchTerm=d),d}),g("input",function(){return a.filterCompanies()}),t(),n(51,"span",15),i(52,"\u{1F50D}"),t()(),n(53,"select",16),K("ngModelChange",function(d){return J(a.filterStatus,d)||(a.filterStatus=d),d}),g("change",function(){return a.filterCompanies()}),n(54,"option",17),i(55,"Tous les statuts"),t(),n(56,"option",18),i(57,"Actives"),t(),n(58,"option",19),i(59,"Inactives"),t()()()(),s(60,Xe,9,2,"div",20)(61,Ve,22,1,"div",21)(62,qe,7,4,"div",22),t(),n(63,"div",23)(64,"h3"),i(65,"Actions rapides"),t(),n(66,"div",24)(67,"button",25)(68,"span",26),i(69,"\u{1F4CA}"),t(),n(70,"span",27),i(71,"Rapports"),t()(),n(72,"button",25)(73,"span",26),i(74,"\u{1F4C1}"),t(),n(75,"span",27),i(76,"Exporter"),t()(),n(77,"button",25)(78,"span",26),i(79,"\u{1F504}"),t(),n(80,"span",27),i(81,"Synchroniser"),t()(),n(82,"button",25)(83,"span",26),i(84,"\u2699\uFE0F"),t(),n(85,"span",27),i(86,"Param\xE8tres"),t()()()()()),e&2&&(l(9),h(" ",a.showForm?"Masquer le formulaire":"Nouvelle soci\xE9t\xE9"," "),l(7),x(a.companies.length),l(8),x(a.activeCompanies),l(8),x(a.todayCompanies),l(8),x(a.uniqueCountries),l(3),c("ngIf",a.showForm),l(7),Y("ngModel",a.searchTerm),l(3),Y("ngModel",a.filterStatus),l(7),c("ngIf",a.filteredCompanies.length===0),l(),c("ngIf",a.filteredCompanies.length>0),l(),c("ngIf",a.filteredCompanies.length>0))},dependencies:[X,ie,U,ge,B,j,L,q,V,ce,$,ae,G],styles:[".company-management[_ngcontent-%COMP%]{padding:24px;background:#f8f9fa;min-height:100vh}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;padding:24px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-size:28px}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;box-shadow:0 2px 8px #0000001a;display:flex;align-items:center;gap:16px}.stat-icon[_ngcontent-%COMP%]{font-size:32px}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:24px;color:#333}.stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.form-section[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:12px;box-shadow:0 2px 8px #0000001a;margin-bottom:32px}.section-header[_ngcontent-%COMP%]{margin-bottom:24px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-size:20px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.list-section[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:12px;box-shadow:0 2px 8px #0000001a;margin-bottom:32px}.list-controls[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.search-box[_ngcontent-%COMP%]{flex:1;position:relative}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 40px 10px 16px;border:1px solid #ddd;border-radius:6px;font-size:14px}.search-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#666}select[_ngcontent-%COMP%]{padding:10px 16px;border:1px solid #ddd;border-radius:6px;font-size:14px;background:#fff}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#666}.companies-table[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%]{text-align:left;padding:16px;background:#f8f9fa;color:#333;font-weight:600;border-bottom:2px solid #dee2e6}td[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #dee2e6;vertical-align:top}.company-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.company-name[_ngcontent-%COMP%]{font-weight:500;color:#333}.company-id[_ngcontent-%COMP%]{font-size:12px;color:#666}.tax-info[_ngcontent-%COMP%]{font-size:12px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge[_ngcontent-%COMP%]:not(.active){background:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{padding:6px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;transition:all .3s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f8f9fa;border-color:#007bff}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:24px;margin-top:24px;padding-top:24px;border-top:1px solid #dee2e6}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.quick-actions[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:12px;box-shadow:0 2px 8px #0000001a}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:900px;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_slideIn .3s ease;box-shadow:0 10px 40px #0003}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #dee2e6;background:#f8f9fa;border-radius:12px 12px 0 0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:20px}.modal-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s}.modal-close[_ngcontent-%COMP%]:hover{background:#e9ecef;color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px}.modal-description[_ngcontent-%COMP%]{margin:0 0 20px;color:#666;font-size:14px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.quick-actions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#333}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px}.action-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;padding:20px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;transition:all .3s}.action-card[_ngcontent-%COMP%]:hover{border-color:#007bff;background:#f8f9fa}.action-icon[_ngcontent-%COMP%]{font-size:32px}.action-text[_ngcontent-%COMP%]{font-size:14px;color:#333}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;text-align:center}.list-controls[_ngcontent-%COMP%]{flex-direction:column}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.actions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]})};export{he as CompanyManagementComponent};
