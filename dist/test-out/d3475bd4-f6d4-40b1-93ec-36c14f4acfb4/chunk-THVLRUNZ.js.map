{
  "version": 3,
  "sources": ["src/app/modules/_shared/domain/types/result.type.ts", "src/app/modules/_shared/domain/errors/domain.error.ts"],
  "sourcesContent": ["/**\n * Result Pattern for functional error handling\n * \n * Instead of throwing exceptions, return a Result object that can be either:\n * - Success: contains a value\n * - Failure: contains an error\n * \n * @example\n * // Use case\n * async execute(dto: CreateUserDto): Promise<Result<UserResponseDto, DomainError>> {\n *   const emailResult = Email.create(dto.email);\n *   if (emailResult.isFailure) {\n *     return Result.fail(emailResult.error);\n *   }\n *   \n *   const user = await this.repository.create(userEntity);\n *   return Result.ok(UserMapper.toResponseDto(user));\n * }\n * \n * // Component\n * const result = await this.createUserUseCase.execute(dto);\n * if (result.isFailure) {\n *   this.toastService.typeError(result.error.message);\n *   return;\n * }\n * this.user = result.value;\n */\nexport class Result<T, E = Error> {\n    private constructor(\n        private readonly _isSuccess: boolean,\n        private readonly _value?: T,\n        private readonly _error?: E\n    ) {\n        Object.freeze(this);\n    }\n\n    /**\n     * Create a successful result\n     */\n    static ok<T>(value: T): Result<T, never> {\n        return new Result<T, never>(true, value, undefined);\n    }\n\n    /**\n     * Create a failed result\n     */\n    static fail<E>(error: E): Result<never, E> {\n        return new Result<never, E>(false, undefined, error);\n    }\n\n    /**\n     * Check if the result is successful\n     */\n    get isSuccess(): boolean {\n        return this._isSuccess;\n    }\n\n    /**\n     * Check if the result is a failure\n     */\n    get isFailure(): boolean {\n        return !this._isSuccess;\n    }\n\n    /**\n     * Get the value (only available if success)\n     * @throws Error if called on a failure result\n     */\n    get value(): T {\n        if (!this._isSuccess) {\n            throw new Error('Cannot get value from a failed result');\n        }\n        return this._value!;\n    }\n\n    /**\n     * Get the error (only available if failure)\n     * @throws Error if called on a success result\n     */\n    get error(): E {\n        if (this._isSuccess) {\n            throw new Error('Cannot get error from a successful result');\n        }\n        return this._error!;\n    }\n\n    /**\n     * Get the value or a default value if failure\n     */\n    getValueOrDefault(defaultValue: T): T {\n        return this._isSuccess ? this._value! : defaultValue;\n    }\n\n    /**\n     * Get the value or null if failure\n     */\n    getValueOrNull(): T | null {\n        return this._isSuccess ? this._value! : null;\n    }\n\n    /**\n     * Map the value to another type\n     */\n    map<U>(fn: (value: T) => U): Result<U, E> {\n        if (this._isSuccess) {\n            return Result.ok(fn(this._value!));\n        }\n        return Result.fail(this._error!);\n    }\n\n    /**\n     * Map the error to another type\n     */\n    mapError<F>(fn: (error: E) => F): Result<T, F> {\n        if (this._isSuccess) {\n            return Result.ok(this._value!);\n        }\n        return Result.fail(fn(this._error!));\n    }\n\n    /**\n     * Combine multiple results\n     */\n    static combine<T, E>(results: Result<T, E>[]): Result<T[], E> {\n        const values: T[] = [];\n\n        for (const result of results) {\n            if (result.isFailure) {\n                return Result.fail(result.error);\n            }\n            values.push(result.value);\n        }\n\n        return Result.ok(values);\n    }\n}\n", "/**\n * Base class for all domain errors\n * \n * Domain errors represent business rule violations or domain-specific failures.\n * They should be used instead of generic Error objects for better error handling.\n */\nexport abstract class DomainError extends Error {\n    public readonly timestamp: Date;\n    public readonly code: string;\n\n    protected constructor(\n        message: string,\n        code: string = 'DOMAIN_ERROR'\n    ) {\n        super(message);\n        this.name = this.constructor.name;\n        this.code = code;\n        this.timestamp = new Date();\n\n        // Maintains proper stack trace for where our error was thrown (only available on V8)\n        if ((Error as any).captureStackTrace) {\n            (Error as any).captureStackTrace(this, this.constructor);\n        }\n    }\n\n    /**\n     * Convert error to JSON for logging/API responses\n     */\n    toJSON(): Record<string, any> {\n        return {\n            name: this.name,\n            code: this.code,\n            message: this.message,\n            timestamp: this.timestamp.toISOString()\n        };\n    }\n}\n\n/**\n * Validation error - used when input validation fails\n */\nexport class ValidationError extends DomainError {\n    constructor(message: string, public readonly field?: string) {\n        super(message, 'VALIDATION_ERROR');\n    }\n\n    override toJSON(): Record<string, any> {\n        return {\n            ...super.toJSON(),\n            field: this.field\n        };\n    }\n}\n\n/**\n * Not found error - used when an entity is not found\n */\nexport class NotFoundError extends DomainError {\n    constructor(\n        entityName: string,\n        identifier: string | number\n    ) {\n        super(`${entityName} avec l'identifiant ${identifier} introuvable`, 'NOT_FOUND');\n    }\n}\n\n/**\n * Already exists error - used when trying to create a duplicate\n */\nexport class AlreadyExistsError extends DomainError {\n    constructor(\n        entityName: string,\n        field: string,\n        value: string\n    ) {\n        super(`${entityName} avec ${field} '${value}' existe déjà`, 'ALREADY_EXISTS');\n    }\n}\n\n/**\n * Unauthorized error - used when user lacks permissions\n */\nexport class UnauthorizedError extends DomainError {\n    constructor(action: string) {\n        super(`Non autorisé à effectuer l'action: ${action}`, 'UNAUTHORIZED');\n    }\n}\n\n/**\n * Business rule violation error\n */\nexport class BusinessRuleViolationError extends DomainError {\n    constructor(rule: string) {\n        super(`Violation de règle métier: ${rule}`, 'BUSINESS_RULE_VIOLATION');\n    }\n}\n\n/**\n * Infrastructure error - used for technical failures\n */\nexport class InfrastructureError extends DomainError {\n    constructor(message: string, public readonly originalError?: Error) {\n        super(message, 'INFRASTRUCTURE_ERROR');\n    }\n\n    override toJSON(): Record<string, any> {\n        return {\n            ...super.toJSON(),\n            originalError: this.originalError?.message\n        };\n    }\n}\n"],
  "mappings": "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",
  "names": []
}
