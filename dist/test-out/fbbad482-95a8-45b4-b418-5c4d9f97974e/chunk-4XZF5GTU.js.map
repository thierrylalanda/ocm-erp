{
  "version": 3,
  "sources": ["src/app/modules/_shared/domain/value-objects/user-name.vo.ts"],
  "sourcesContent": ["import { ValueObject } from '../base/value-object.base';\nimport { Result } from '../types/result.type';\nimport { ValidationError } from '../errors/domain.error';\n\n/**\n * UserName Value Object\n * \n * Validates and normalizes usernames.\n * Ensures uniqueness constraints and format rules.\n * \n * @example\n * const usernameResult = UserName.create('john.doe');\n * if (usernameResult.isSuccess) {\n *   const username = usernameResult.value;\n *   console.log(username.getValue()); // 'john.doe'\n * }\n */\nexport class UserName extends ValueObject<string> {\n    private static readonly USERNAME_REGEX = /^[a-zA-Z0-9._-]{3,30}$/;\n    private static readonly MIN_LENGTH = 3;\n    private static readonly MAX_LENGTH = 30;\n    private static readonly RESERVED_NAMES = [\n        'admin', 'administrator', 'root', 'system', 'superuser',\n        'test', 'demo', 'guest', 'anonymous', 'null', 'undefined'\n    ];\n\n    private constructor(value: string) {\n        super(value);\n    }\n\n    /**\n     * Create a UserName value object\n     * \n     * @param username - The username string to validate\n     * @returns Result with UserName or ValidationError\n     */\n    static create(username: string): Result<UserName, ValidationError> {\n        // Check if empty\n        if (!username || username.trim().length === 0) {\n            return Result.fail(new ValidationError('Nom d\\'utilisateur requis', 'userName'));\n        }\n\n        // Normalize (trim and lowercase)\n        const normalizedUsername = username.trim().toLowerCase();\n\n        // Check length\n        if (normalizedUsername.length < this.MIN_LENGTH) {\n            return Result.fail(\n                new ValidationError(\n                    `Nom d'utilisateur trop court (min ${this.MIN_LENGTH} caractères)`,\n                    'userName'\n                )\n            );\n        }\n\n        if (normalizedUsername.length > this.MAX_LENGTH) {\n            return Result.fail(\n                new ValidationError(\n                    `Nom d'utilisateur trop long (max ${this.MAX_LENGTH} caractères)`,\n                    'userName'\n                )\n            );\n        }\n\n        // Check format (alphanumeric, dots, underscores, hyphens only)\n        if (!this.USERNAME_REGEX.test(normalizedUsername)) {\n            return Result.fail(\n                new ValidationError(\n                    'Nom d\\'utilisateur invalide (lettres, chiffres, ., _, - uniquement)',\n                    'userName'\n                )\n            );\n        }\n\n        // Check reserved names\n        if (this.RESERVED_NAMES.includes(normalizedUsername)) {\n            return Result.fail(\n                new ValidationError('Ce nom d\\'utilisateur est réservé', 'userName')\n            );\n        }\n\n        // Check for consecutive special characters\n        if (/[._-]{2,}/.test(normalizedUsername)) {\n            return Result.fail(\n                new ValidationError(\n                    'Le nom d\\'utilisateur ne peut pas contenir de caractères spéciaux consécutifs',\n                    'userName'\n                )\n            );\n        }\n\n        // Check if starts or ends with special character\n        if (/^[._-]|[._-]$/.test(normalizedUsername)) {\n            return Result.fail(\n                new ValidationError(\n                    'Le nom d\\'utilisateur ne peut pas commencer ou finir par un caractère spécial',\n                    'userName'\n                )\n            );\n        }\n\n        return Result.ok(new UserName(normalizedUsername));\n    }\n\n    /**\n     * Check if username contains only alphanumeric characters\n     */\n    isAlphanumericOnly(): boolean {\n        return /^[a-zA-Z0-9]+$/.test(this.value);\n    }\n\n    /**\n     * Get display name (capitalize first letter)\n     */\n    getDisplayName(): string {\n        return this.value.charAt(0).toUpperCase() + this.value.slice(1);\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;AAAA,IAiBa;AAjBb;;;;AACA;AACA;AAeM,IAAO,WAAP,MAAO,kBAAiB,YAAmB;MACrC,OAAgB,iBAAiB;MACjC,OAAgB,aAAa;MAC7B,OAAgB,aAAa;MAC7B,OAAgB,iBAAiB;QACrC;QAAS;QAAiB;QAAQ;QAAU;QAC5C;QAAQ;QAAQ;QAAS;QAAa;QAAQ;;MAGlD,YAAoB,OAAa;AAC7B,cAAM,KAAK;MACf;;;;;;;MAQA,OAAO,OAAO,UAAgB;AAE1B,YAAI,CAAC,YAAY,SAAS,KAAI,EAAG,WAAW,GAAG;AAC3C,iBAAO,OAAO,KAAK,IAAI,gBAAgB,4BAA6B,UAAU,CAAC;QACnF;AAGA,cAAM,qBAAqB,SAAS,KAAI,EAAG,YAAW;AAGtD,YAAI,mBAAmB,SAAS,KAAK,YAAY;AAC7C,iBAAO,OAAO,KACV,IAAI,gBACA,qCAAqC,KAAK,UAAU,mBACpD,UAAU,CACb;QAET;AAEA,YAAI,mBAAmB,SAAS,KAAK,YAAY;AAC7C,iBAAO,OAAO,KACV,IAAI,gBACA,oCAAoC,KAAK,UAAU,mBACnD,UAAU,CACb;QAET;AAGA,YAAI,CAAC,KAAK,eAAe,KAAK,kBAAkB,GAAG;AAC/C,iBAAO,OAAO,KACV,IAAI,gBACA,sEACA,UAAU,CACb;QAET;AAGA,YAAI,KAAK,eAAe,SAAS,kBAAkB,GAAG;AAClD,iBAAO,OAAO,KACV,IAAI,gBAAgB,0CAAqC,UAAU,CAAC;QAE5E;AAGA,YAAI,YAAY,KAAK,kBAAkB,GAAG;AACtC,iBAAO,OAAO,KACV,IAAI,gBACA,yFACA,UAAU,CACb;QAET;AAGA,YAAI,gBAAgB,KAAK,kBAAkB,GAAG;AAC1C,iBAAO,OAAO,KACV,IAAI,gBACA,sFACA,UAAU,CACb;QAET;AAEA,eAAO,OAAO,GAAG,IAAI,UAAS,kBAAkB,CAAC;MACrD;;;;MAKA,qBAAkB;AACd,eAAO,iBAAiB,KAAK,KAAK,KAAK;MAC3C;;;;MAKA,iBAAc;AACV,eAAO,KAAK,MAAM,OAAO,CAAC,EAAE,YAAW,IAAK,KAAK,MAAM,MAAM,CAAC;MAClE;;;;",
  "names": []
}
