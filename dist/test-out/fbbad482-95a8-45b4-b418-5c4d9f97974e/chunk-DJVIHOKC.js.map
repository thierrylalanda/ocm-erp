{
  "version": 3,
  "sources": ["src/app/modules/_shared/domain/value-objects/phone-number.vo.ts"],
  "sourcesContent": ["import { ValueObject } from '../base/value-object.base';\nimport { Result } from '../types/result.type';\nimport { ValidationError } from '../errors/domain.error';\n\n/**\n * PhoneNumber Value Object\n * \n * Validates and normalizes phone numbers.\n * Supports international format with country code.\n * \n * @example\n * const phoneResult = PhoneNumber.create('+237690123456');\n * if (phoneResult.isSuccess) {\n *   const phone = phoneResult.value;\n *   console.log(phone.getFormatted()); // '+237 690 123 456'\n * }\n */\nexport class PhoneNumber extends ValueObject<string> {\n    private static readonly PHONE_REGEX = /^[\\d\\s\\-\\+\\(\\)]{8,20}$/;\n    private static readonly MIN_LENGTH = 8;\n    private static readonly MAX_LENGTH = 20;\n\n    private constructor(value: string) {\n        super(value);\n    }\n\n    /**\n     * Create a PhoneNumber value object\n     * \n     * @param phone - The phone number string to validate\n     * @returns Result with PhoneNumber or ValidationError\n     */\n    static create(phone: string): Result<PhoneNumber, ValidationError> {\n        // Check if empty\n        if (!phone || phone.trim().length === 0) {\n            return Result.fail(new ValidationError('Numéro de téléphone requis', 'telephone'));\n        }\n\n        // Normalize (remove spaces)\n        const normalizedPhone = phone.trim();\n\n        // Check length\n        if (normalizedPhone.length < this.MIN_LENGTH) {\n            return Result.fail(\n                new ValidationError(`Numéro de téléphone trop court (min ${this.MIN_LENGTH} caractères)`, 'telephone')\n            );\n        }\n\n        if (normalizedPhone.length > this.MAX_LENGTH) {\n            return Result.fail(\n                new ValidationError(`Numéro de téléphone trop long (max ${this.MAX_LENGTH} caractères)`, 'telephone')\n            );\n        }\n\n        // Check format\n        if (!this.PHONE_REGEX.test(normalizedPhone)) {\n            return Result.fail(new ValidationError('Format de numéro de téléphone invalide', 'telephone'));\n        }\n\n        return Result.ok(new PhoneNumber(normalizedPhone));\n    }\n\n    /**\n     * Get formatted phone number\n     * @example '+237690123456' -> '+237 690 123 456'\n     */\n    getFormatted(): string {\n        // Remove all non-digit characters except +\n        const cleaned = this.value.replace(/[^\\d+]/g, '');\n\n        // Format with spaces\n        if (cleaned.startsWith('+')) {\n            const countryCode = cleaned.substring(0, 4);\n            const rest = cleaned.substring(4);\n            return `${countryCode} ${rest.match(/.{1,3}/g)?.join(' ') || rest}`;\n        }\n\n        return cleaned.match(/.{1,3}/g)?.join(' ') || cleaned;\n    }\n\n    /**\n     * Get digits only (no formatting)\n     */\n    getDigitsOnly(): string {\n        return this.value.replace(/\\D/g, '');\n    }\n\n    /**\n     * Check if phone number is international (starts with +)\n     */\n    isInternational(): boolean {\n        return this.value.startsWith('+');\n    }\n\n    /**\n     * Get country code (if international)\n     */\n    getCountryCode(): string | null {\n        if (!this.isInternational()) {\n            return null;\n        }\n\n        // Extract country code (usually 1-4 digits after +)\n        const match = this.value.match(/^\\+(\\d{1,4})/);\n        return match ? match[1] : null;\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;AAAA,IAiBa;AAjBb;;;;AACA;AACA;AAeM,IAAO,cAAP,MAAO,qBAAoB,YAAmB;MACxC,OAAgB,cAAc;MAC9B,OAAgB,aAAa;MAC7B,OAAgB,aAAa;MAErC,YAAoB,OAAa;AAC7B,cAAM,KAAK;MACf;;;;;;;MAQA,OAAO,OAAO,OAAa;AAEvB,YAAI,CAAC,SAAS,MAAM,KAAI,EAAG,WAAW,GAAG;AACrC,iBAAO,OAAO,KAAK,IAAI,gBAAgB,uCAA8B,WAAW,CAAC;QACrF;AAGA,cAAM,kBAAkB,MAAM,KAAI;AAGlC,YAAI,gBAAgB,SAAS,KAAK,YAAY;AAC1C,iBAAO,OAAO,KACV,IAAI,gBAAgB,gDAAuC,KAAK,UAAU,mBAAgB,WAAW,CAAC;QAE9G;AAEA,YAAI,gBAAgB,SAAS,KAAK,YAAY;AAC1C,iBAAO,OAAO,KACV,IAAI,gBAAgB,+CAAsC,KAAK,UAAU,mBAAgB,WAAW,CAAC;QAE7G;AAGA,YAAI,CAAC,KAAK,YAAY,KAAK,eAAe,GAAG;AACzC,iBAAO,OAAO,KAAK,IAAI,gBAAgB,mDAA0C,WAAW,CAAC;QACjG;AAEA,eAAO,OAAO,GAAG,IAAI,aAAY,eAAe,CAAC;MACrD;;;;;MAMA,eAAY;AAER,cAAM,UAAU,KAAK,MAAM,QAAQ,WAAW,EAAE;AAGhD,YAAI,QAAQ,WAAW,GAAG,GAAG;AACzB,gBAAM,cAAc,QAAQ,UAAU,GAAG,CAAC;AAC1C,gBAAM,OAAO,QAAQ,UAAU,CAAC;AAChC,iBAAO,GAAG,WAAW,IAAI,KAAK,MAAM,SAAS,GAAG,KAAK,GAAG,KAAK,IAAI;QACrE;AAEA,eAAO,QAAQ,MAAM,SAAS,GAAG,KAAK,GAAG,KAAK;MAClD;;;;MAKA,gBAAa;AACT,eAAO,KAAK,MAAM,QAAQ,OAAO,EAAE;MACvC;;;;MAKA,kBAAe;AACX,eAAO,KAAK,MAAM,WAAW,GAAG;MACpC;;;;MAKA,iBAAc;AACV,YAAI,CAAC,KAAK,gBAAe,GAAI;AACzB,iBAAO;QACX;AAGA,cAAM,QAAQ,KAAK,MAAM,MAAM,cAAc;AAC7C,eAAO,QAAQ,MAAM,CAAC,IAAI;MAC9B;;;;",
  "names": []
}
