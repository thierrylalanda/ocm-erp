<div class="login-wrapper">
  <div class="row g-0 h-100 min-vh-100">

    <!-- Left Side: Hero Section (Themed) -->
    <div class="col-lg-7 d-none d-lg-flex login-hero">
      <div class="hero-content">
        <div class="mb-4">
          <!-- Optional: Large Icon or Illustration -->
          <i class="isax isax-cloud-change display-1 opacity-50"></i>
        </div>
        <h1>OCM ERP</h1>
        <p>La plateforme professionnelle pour gérer votre activité en toute simplicité.</p>

        <div class="hero-features">
          <div class="feature-item">
            <i class="isax isax-shield-tick"></i> Sécurisé
          </div>
          <div class="feature-item">
            <i class="isax isax-flash-1"></i> Rapide
          </div>
          <div class="feature-item">
            <i class="isax isax-chart-21"></i> Analytique
          </div>
        </div>
      </div>
    </div>

    <!-- Right Side: Login Form -->
    <div class="col-lg-5 login-form-section">

      <!-- Language Selector Top Right -->
      <app-language-selector></app-language-selector>

      <div class="login-content">
        <div class="auth-header">
          <img src="assets/img/logo.png" alt="Logo" class="logo-img">
          <h3>{{ 'login.title' | translate }}</h3>
          <p>{{ 'login.subtitle' | translate }}</p>
        </div>

        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

          <!-- Error Message -->
          <div *ngIf="errorMessage" class="alert alert-danger d-flex align-items-center mb-4 border-0 shadow-sm"
            role="alert">
            <i class="isax isax-warning-2 me-2"></i>
            <div class="small">{{ errorMessage }}</div>
          </div>

          <!-- Username -->
          <div class="form-floating">
            <input type="text" class="form-control" id="username" formControlName="username"
              [placeholder]="'login.usernamePlaceholder' | translate"
              [class.is-invalid]="loginForm.get('username')?.invalid && loginForm.get('username')?.touched">
            <label for="username">{{ 'login.username' | translate }}</label>
            <div *ngIf="loginForm.get('username')?.invalid && loginForm.get('username')?.touched"
              class="invalid-feedback text-start">
              {{ 'login.usernameRequired' | translate }}
            </div>
          </div>

          <!-- Password -->
          <div class="form-floating position-relative">
            <input [type]="show_password ? 'password' : 'text'" class="form-control" id="password"
              formControlName="password" [placeholder]="'login.passwordPlaceholder' | translate"
              [class.is-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
              style="padding-right: 2.5rem;">
            <label for="password">{{ 'login.password' | translate }}</label>

            <!-- Eye Icon -->
            <span class="position-absolute top-50 end-0 translate-middle-y me-3 cursor-pointer text-muted"
              (click)="show_password = !show_password">
              <i class="isax" [ngClass]="show_password ? 'isax-eye-slash' : 'isax-eye'" style="font-size: 1.2rem;"></i>
            </span>

            <div *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
              class="invalid-feedback text-start">
              {{ 'login.passwordRequired' | translate }}
            </div>
          </div>

          <!-- Remember Me & Forgot Password -->
          <div class="d-flex align-items-center justify-content-between mb-4 mt-3">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="rememberMe" formControlName="rememberMe">
              <label class="form-check-label user-select-none small" for="rememberMe">
                {{ 'login.rememberMe' | translate }}
              </label>
            </div>
            <a [routerLink]="routes.forgot_password" class="forgot-link small">
              {{ 'login.forgotPassword' | translate }}
            </a>
          </div>

          <!-- Submit Action -->
          <button type="submit" class="btn btn-primary w-100 py-3 mb-3 shadow-sm"
            [disabled]="loginForm.invalid || isLoading">
            <span *ngIf="!isLoading">{{ 'login.signIn' | translate }}</span>
            <div *ngIf="isLoading" class="d-flex align-items-center justify-content-center">
              <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
              {{ 'login.signingIn' | translate }}
            </div>
          </button>

        </form>
      </div>

      <!-- Copyright -->
      <div class="copyright-text">
        &copy; {{ currentYear }} OCM ERP. Tous droits réservés.
      </div>

    </div>
  </div>
</div>