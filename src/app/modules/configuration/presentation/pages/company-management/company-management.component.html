<div class="company-management">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>Gestion des SociÃ©tÃ©s</h1>
      <p>CrÃ©ez et gÃ©rez les sociÃ©tÃ©s de votre organisation</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-primary" (click)="showForm = !showForm">
        {{ showForm ? 'Masquer le formulaire' : 'Nouvelle sociÃ©tÃ©' }}
      </button>
    </div>
  </div>

  <!-- Stats -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">ğŸ¢</div>
      <div class="stat-content">
        <h3>{{ companies.length }}</h3>
        <p>SociÃ©tÃ©s totales</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">âœ…</div>
      <div class="stat-content">
        <h3>{{ activeCompanies }}</h3>
        <p>SociÃ©tÃ©s actives</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ“…</div>
      <div class="stat-content">
        <h3>{{ todayCompanies }}</h3>
        <p>CrÃ©Ã©es aujourd'hui</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸŒ</div>
      <div class="stat-content">
        <h3>{{ uniqueCountries }}</h3>
        <p>Pays diffÃ©rents</p>
      </div>
    </div>
  </div>

  <!-- Modal for Creation Form -->
  <div *ngIf="showForm" class="modal-overlay" (click)="onCancel()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>CrÃ©er une nouvelle sociÃ©tÃ©</h2>
        <button class="modal-close" (click)="onCancel()">Ã—</button>
      </div>
      <div class="modal-body">
        <p class="modal-description">Remplissez le formulaire ci-dessous pour ajouter une nouvelle sociÃ©tÃ© Ã  votre organisation</p>
        <app-company-form
          (companyCreated)="onCompanyCreated($event)"
          (cancel)="onCancel()">
        </app-company-form>
      </div>
    </div>
  </div>

  <!-- Companies List -->
  <div class="list-section">
    <div class="section-header">
      <h2>Liste des sociÃ©tÃ©s</h2>
      <div class="list-controls">
        <div class="search-box">
          <input 
            type="text" 
            placeholder="Rechercher une sociÃ©tÃ©..." 
            [(ngModel)]="searchTerm"
            (input)="filterCompanies()"
          >
          <span class="search-icon">ğŸ”</span>
        </div>
        <select [(ngModel)]="filterStatus" (change)="filterCompanies()">
          <option value="">Tous les statuts</option>
          <option value="active">Actives</option>
          <option value="inactive">Inactives</option>
        </select>
      </div>
    </div>

    <div *ngIf="filteredCompanies.length === 0" class="empty-state">
      <div class="empty-icon">ğŸ¢</div>
      <h3>Aucune sociÃ©tÃ© trouvÃ©e</h3>
      <p *ngIf="searchTerm || filterStatus">
        Aucune sociÃ©tÃ© ne correspond Ã  vos critÃ¨res de recherche.
      </p>
      <p *ngIf="!searchTerm && !filterStatus">
        Commencez par crÃ©er votre premiÃ¨re sociÃ©tÃ©.
      </p>
      <button class="btn btn-primary" (click)="showForm = true">
        CrÃ©er une sociÃ©tÃ©
      </button>
    </div>

    <div *ngIf="filteredCompanies.length > 0" class="companies-table">
      <table>
        <thead>
          <tr>
            <th>Nom</th>
            <th>ActivitÃ©</th>
            <th>Email</th>
            <th>NC/RCCM</th>
            <th>Pays</th>
            <th>Statut</th>
            <th>CrÃ©Ã©e le</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let company of filteredCompanies">
            <td>
              <div class="company-info">
                <div class="company-name">{{ company.nom }}</div>
                <div class="company-id">ID: {{ company.id }}</div>
              </div>
            </td>
            <td>{{ company.activite }}</td>
            <td>{{ company.email }}</td>
            <td>
              <div class="tax-info">
                <div>NC: {{ company.nc }}</div>
                <div>RCCM: {{ company.rccm }}</div>
              </div>
            </td>
            <td>{{ company.pays }}</td>
            <td>
              <span class="status-badge" [class.active]="company.actif">
                {{ company.actif ? 'Active' : 'Inactive' }}
              </span>
            </td>
            <td>{{ formatDate(company.createdAt) }}</td>
            <td>
              <div class="action-buttons">
                <button class="btn-icon" title="Voir les dÃ©tails">ğŸ‘ï¸</button>
                <button class="btn-icon" title="Modifier">âœï¸</button>
                <button class="btn-icon" title="Supprimer">ğŸ—‘ï¸</button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div *ngIf="filteredCompanies.length > 0" class="pagination">
      <button [disabled]="currentPage === 1" (click)="previousPage()">â† PrÃ©cÃ©dent</button>
      <span>Page {{ currentPage }} sur {{ totalPages }}</span>
      <button [disabled]="currentPage === totalPages" (click)="nextPage()">Suivant â†’</button>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <h3>Actions rapides</h3>
    <div class="actions-grid">
      <button class="action-card">
        <span class="action-icon">ğŸ“Š</span>
        <span class="action-text">Rapports</span>
      </button>
      <button class="action-card">
        <span class="action-icon">ğŸ“</span>
        <span class="action-text">Exporter</span>
      </button>
      <button class="action-card">
        <span class="action-icon">ğŸ”„</span>
        <span class="action-text">Synchroniser</span>
      </button>
      <button class="action-card">
        <span class="action-icon">âš™ï¸</span>
        <span class="action-text">ParamÃ¨tres</span>
      </button>
    </div>
  </div>
</div>
